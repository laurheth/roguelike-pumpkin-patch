(()=>{"use strict";var t=function(){return(t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e="pumpkin-tile";const n=function(){function n(t,n,i){this.element=document.createElement("div"),this.element.classList.add(e);var o=t.content,r=void 0===o?"":o,s=t.color,a=void 0===s?"":s,l=t.background,h=void 0===l?"":l,c=t.className,u=void 0===c?"":c,p=t.classList,f=void 0===p?[]:p;!function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}}(t,["content","color","background","className","classList"]),this.content=r,this.color=a,this.background=h,f.length>0?this.classList=f:this.className=u,this.tileWidth=(null==i?void 0:i.tileWidth)?i.tileWidth:16,this.tileHeight=(null==i?void 0:i.tileHeight)?i.tileHeight:this.tileWidth,this.position=n}return Object.defineProperty(n.prototype,"content",{get:function(){return this._content},set:function(t){if(this.confirmContentElement(),this._content!==t){if("string"==typeof t)this.contentElement.innerHTML=t;else{for(;this.contentElement.lastElementChild;)this.contentElement.removeChild(this.contentElement.lastElementChild);this.contentElement.appendChild(t)}this._content=t}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"background",{get:function(){return this._background},set:function(t){t!==this._background&&(this._background=t,this.element.style.backgroundColor=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){t!==this._color&&(this._color=t,this.element.style.color=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(e){this._position=t({},e),this.element.style.left=e.x*this.tileWidth+"px",this.element.style.top=e.y*this.tileHeight+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tileWidth",{get:function(){return this._tileWidth},set:function(t){this._tileWidth=t,this.element.style.width=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tileHeight",{get:function(){return this._tileHeight},set:function(t){this._tileHeight=t,this.element.style.height=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this.classList.join(" ")},set:function(t){this.classList=t?t.split(" "):[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classList",{get:function(){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}([e],this._classList)},set:function(t){var n,i,o=this;this._classList||(this._classList=[]),t.length===this._classList.length&&t.every((function(t){return o._classList.includes(t)}))&&this._classList.every((function(e){return t.includes(e)}))||(this._classList.length>0&&(n=this.element.classList).remove.apply(n,this._classList),this._classList=t.filter((function(t){return t.trim()&&t!==e})),t.length>0&&(i=this.element.classList).add.apply(i,this.classList))},enumerable:!1,configurable:!0}),n.prototype.setOptions=function(t){var e=t.content,n=void 0===e?"":e,i=t.background,o=void 0===i?"":i,r=t.color,s=void 0===r?"":r,a=t.className,l=void 0===a?"":a,h=t.classList;this.content=n,this.background=o,this.color=s,h?this.classList=h:this.className=l},n.prototype.updateOptions=function(t){var e=t.content,n=t.background,i=t.color,o=t.className,r=t.classList;void 0!==e&&(this.content=e),void 0!==n&&(this.background=n),void 0!==i&&(this.color=i),r&&r.length>0?this.classList=r:void 0!==o&&(this.className=o)},n.prototype.confirmContentElement=function(){this.contentElement||(this.contentElement=document.createElement("div"),this.element.appendChild(this.contentElement))},n}();const i=function(){function t(t){var e=t.target,n=t.width,i=void 0===n?1:n,o=t.height,r=void 0===o?1:o,s=t.tileWidth,a=t.tileHeight;!function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}}(t,["target","width","height","tileWidth","tileHeight"]),this.target=e,this.target.className?this.target.classList.add("pumpkin-container"):this.target.className="pumpkin-container",this.element=document.createElement("div"),this.element.className="pumpkin-display",this.element.setAttribute("aria-hidden","true"),this.dimensions={width:i,height:r},this.tileSize={tileWidth:s||16,tileHeight:a||s||16},this.applyDefaultStyles(),this.target.appendChild(this.element)}return Object.defineProperty(t.prototype,"tileSize",{get:function(){return this._tileSize},set:function(t){var e;this._tileSize=t,this.element.style.fontSize=t.tileHeight+"px",null===(e=this.tiles)||void 0===e||e.forEach((function(e){e.tileWidth=t.tileWidth,e.tileHeight=t.tileHeight,e.position=e.position})),this.resetSize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return{width:this._width,height:this._height}},set:function(t){t.width!==this._width&&t.height!==this._height&&(this._width=t.width,this._height=t.height,this.allocateDisplay(),this.resetSize(),this.moveToCenter())},enumerable:!1,configurable:!0}),t.prototype.resetSize=function(){this._width&&this._height&&this.tileSize&&(this.element.style.width=this._width*this.tileSize.tileWidth+"px",this.element.style.height=this._height*this.tileSize.tileHeight+"px")},t.prototype.centerDisplay=function(t,e){this.centerPosition=void 0===t||void 0===e?void 0:{x:t,y:e},this.moveToCenter()},t.prototype.moveToCenter=function(){if(this.centerPosition){var t=(this.centerPosition.x+.5)/this.dimensions.width,e=(this.centerPosition.y+.5)/this.dimensions.height;this.element.style.transform="translate("+100*-t+"%,"+100*-e+"%)"}else this.element.style.transform=""},t.prototype.allocateDisplay=function(){var t=this;this.tiles&&this.tiles.forEach((function(e){t.element.removeChild(e.element)})),this.tiles=[];for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++){var o=new n({content:""},{x:i,y:e},this.tileSize);this.tiles.push(o),this.element.appendChild(o.element)}},t.prototype.getTile=function(t,e){if(t>=0&&t<this._width&&e>=0&&e<this._height){var n=t+e*this._width;return this.tiles[n]}},t.prototype.formatTileOptions=function(t){return"string"==typeof t||t instanceof HTMLElement?{content:t}:t},t.prototype.setTile=function(t,e,n){var i=this.getTile(t,e);i&&i.setOptions(this.formatTileOptions(n))},t.prototype.updateTile=function(t,e,n){var i=this.getTile(t,e);i&&i.updateOptions(this.formatTileOptions(n))},t.prototype.calculateDimensions=function(t){void 0===t&&(t=this.target.getBoundingClientRect());var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);return{width:Math.floor(e/this.tileSize.tileWidth),height:Math.floor(n/this.tileSize.tileHeight)}},t.prototype.calculateTileSize=function(t){void 0===t&&(t=this.target.getBoundingClientRect());var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top),i={tileWidth:e/this.dimensions.width,tileHeight:n/this.dimensions.height},o=Math.min(i.tileWidth,i.tileHeight);return{tileWidth:o,tileHeight:o}},t.prototype.applyDefaultStyles=function(){var t="pumpkin-default-styles";if(!document.getElementById(t)){var e=document.createElement("style");e.id=t,e.type="text/css",e.appendChild(document.createTextNode("\n.pumpkin-container {\n    position: relative;\n    overflow: hidden;\n    background-color: #000000;\n    color: #ffffff;\n}\n\n.pumpkin-display {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.pumpkin-tile {\n    position: absolute;\n}\n\n.pumpkin-tile > * {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 10;\n}\n"));var n=document.head,i=document.querySelector("style, link");n.insertBefore(e,i)}},t}();const o=function(){function t(t){t||(t={});var e=t.type,n=void 0===e?"simple":e;this.type=n,this.queue=[],this.time=0}return t.prototype.add=function(t){var e={};if(t instanceof Function?e.callback=t:"act"in t?e.actor=t:Object.assign(e,t),void 0===e.repeats&&e.actor&&(e.repeats=!0),"complex"===this.type){e.delay||(e.delay=1);var n=e.delay+this.time;if(0===this.queue.length||this.queue[this.queue.length-1].time<=n)this.queue.push({event:e,time:n});else for(var i=0;i<this.queue.length;i++)if(n<this.queue[i].time){this.queue.splice(i,0,{event:e,time:n});break}}else this.queue.push({event:e,time:0})},t.prototype.advance=function(){return t=this,e=void 0,i=function(){var t;return function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(e){switch(e.label){case 0:if(0===this.queue.length)throw new Error("Event queue is empty.");return t=this.queue.shift(),this.time=t.time,"number"==typeof t.event.repeats&&t.event.repeats--,t.event.repeats&&this.add(t.event),t.event.callback?[4,t.event.callback()]:[3,2];case 1:e.sent(),e.label=2;case 2:return t.event.actor?[4,t.event.actor.act()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i},t.prototype.remove=function(t){var e=this,n=[];this.queue.forEach((function(e,i){e.event.actor===t&&n.push(i)})),n.reverse(),n.forEach((function(t){e.queue.splice(t,1)}))},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),t}(),r=function(){function t(t,e){t||(t=Date.now()),this.seed=Math.floor(t),this.weyl=0,this.x=0,this.base=e||1e5;for(var n=0;n<10;n++)this.getRandom()}return t.prototype.getRandom=function(){return this.x*=this.x,this.x+=this.weyl+=this.seed,this.x=(this.x>>>32|this.x<<32)>>>0,this.x%this.base/this.base},t.prototype.getNumber=function(t,e,n){return void 0===n&&Number.isInteger(t)&&Number.isInteger(e)&&(n=!0),n?Math.floor(this.getRandom()*(e+1-t))+Math.ceil(t):this.getRandom()*(e-t)+t},t.prototype.getRandomElement=function(t){return t[this.getNumber(0,t.length-1,!0)]},t.prototype.getWeightedElement=function(t){var e=0,n=!0;t.forEach((function(t){e+=t.weight,n=n&&Number.isInteger(t.weight)}));for(var i=this.getNumber(n?1:0,e,n),o=0;o<t.length;o++)if((i-=t[o].weight)<=0)return t[o].option;throw new Error("No match found.")},t}();var s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};const a=function(){function t(t){var e=t.canPass,n=t.metric,i=t.maxIterations,o=t.weight;!function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}}(t,["canPass","metric","maxIterations","weight"]),this.canPass=e,n||(n=function(t,e){return Math.abs(e[1]-t[1])+Math.abs(e[0]-t[0])}),o||(o=function(t){return 1}),this.maxIterations=i,this.metric=n,this.weight=o}return t.prototype.findPath=function(t,e,n){var i=this;void 0===n&&(n=!1);for(var o=[],r=this.maxIterations?this.maxIterations:40*this.metric(t,e),a=0,l=[{position:s(t),steps:0,distanceFromGoal:this.metric(t,e),previousLocation:null}],h=[],c=[0,1,1.2];a<r&&!this.contains(l,e);)a++,l.forEach((function(t){for(var o=-1;o<2;o++)for(var r=-1;r<2;r++)if(!n||0===o||0===r){var s=[t.position[0]+o,t.position[1]+r],a=c[Math.abs(o)+Math.abs(r)]*i.weight(s);if(i.canPass(s)){var u=i.getLocation(l,s),p=i.getLocation(h,s);u||p?(u&&u.steps>t.steps+a&&(u.steps=t.steps+a,u.previousLocation=t),p&&p.steps>t.steps+a&&(p.steps=t.steps+a,p.previousLocation=t)):h.push({position:s,steps:t.steps+a,distanceFromGoal:i.metric(s,e),previousLocation:t})}}})),h.sort((function(t,e){return e.steps+e.distanceFromGoal-(t.steps+t.distanceFromGoal)})),l.push(h.pop());var u=this.getLocation(l,e);if(this.contains(l,e))for(a=0;(u.position[0]!==t[0]||u.position[1]!==t[1])&&a<r;)a++,o.push(u.position),u=u.previousLocation;return o.reverse()},t.prototype.isEqual=function(t,e){return t.position[0]===e.position[0]&&t.position[1]===e.position[1]},t.prototype.contains=function(t,e){var n=this;return Array.isArray(e)?t.some((function(t){return t.position[0]===e[0]&&t.position[1]===e[1]})):t.some((function(t){return n.isEqual(t,e)}))},t.prototype.getLocation=function(t,e){for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.position[0]===e[0]&&o.position[1]===e[1])return o}},t}(),l=function(){function t(t,e){this.canSee=t,this.range=e||8}return t.prototype.look=function(t,e){var n=e||this.range;this.canSee(t);for(var i=[],o=[],r=0,s=0,a=1;a<=n;a++){for(var l=0;l<4;l++)for(var h=-a;h<=a;h++){0===l?(r=h,s=a):1===l?(s=h,r=a):2===l?(r=h,s=-a):(s=h,r=-a);var c=[t[0]+r,t[1]+s];if(!(this.distance(t,c)>n)){var u=this.angleTo(t,c),p=this.angularSize(t,c)/2,f=!1;this.isInShadows(u,i)&&this.isInShadows(u+p,i)&&this.isInShadows(u-p,i)&&(f=!0),!f&&this.canSee(c)||o.push({startAngle:u-p,endAngle:u+p})}}for(;o.length>0;)this.combineShadow(i,o.pop());if(1===i.length&&i[0].endAngle-i[0].startAngle>=360)return}},t.prototype.angleTo=function(t,e){var n=e[1]-t[1],i=e[0]-t[0],o=180*Math.atan2(n,i)/Math.PI;return o>=0?o:o+360},t.prototype.angularSize=function(t,e){var n=this.distance(t,e);return 360*Math.atan(1/(2*n))/Math.PI},t.prototype.distance=function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))},t.prototype.isInShadows=function(t,e){for(var n=t-360,i=0,o=e;i<o.length;i++){var r=o[i];if(t<=r.endAngle&&t>=r.startAngle||n<=r.endAngle&&n>=r.startAngle)return!0}return!1},t.prototype.combineShadow=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=t[i];e.startAngle<o.endAngle&&e.endAngle>o.startAngle&&(e.startAngle=Math.min(o.startAngle,e.startAngle),e.endAngle=Math.max(o.endAngle,e.endAngle),n.push(i))}if(n.length>0){var r=t[n.shift()];for(r.startAngle=e.startAngle,r.endAngle=e.endAngle,i=n.length-1;i>=0;i--)t.splice(n[i],1)}else t.push(e)},t}();const h=function(){function t(t){this.contents=t.map((function(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}(t)}))}return t.prototype.equals=function(t){return this.compatible(t,0,0)},t.prototype.compatible=function(t,e,n){return this.contents.every((function(i,o){return i.every((function(i,r){var s=r+e,a=o+n;return!(s>=0&&a>=0&&a<t.contents.length&&s<t.contents[a].length)||i===t.contents[a][s]}))}))},t.prototype.constrain=function(t,e,n){return!(n>=0&&n<this.contents.length&&e>=0&&e<this.contents[n].length)||this.contents[n][e]===t},t}();var c=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n};const u=function(){function t(t){var e,n=t.input,i=t.n,o=void 0===i?1:i,s=t.m,a=void 0===s?o:s,l=t.repeatInput,h=void 0!==l&&l,u=t.random,p=(c(t,["input","n","m","repeatInput","random"]),n.map((function(t){return"string"==typeof t?t.split(""):t})));e=this.processInput(p,h,o,a),this.rules=e[0],this.frequencies=e[1],this.n=o,this.m=a,this.random=u||new r}return t.prototype.processInput=function(t,e,n,i){for(var o=t.length,r=o-(e?0:i-1),s=Math.min.apply(Math,t.map((function(t){return t.length}))),a=s-(e?0:n-1),l=[],c=0;c<a;c++)for(var u=0;u<r;u++){for(var p=[],f=0;f<i;f++){for(var d=[],g=(u+f)%o,m=0;m<n;m++){var v=(m+c)%s;d.push(t[g][v])}p.push(d)}var y=new h(p);l.push(y)}var b=[],w=[];return l.forEach((function(t){var e=b.findIndex((function(e){return e.equals(t)}));e>=0?w[e].weight++:(b.push(t),w.push({option:t,weight:1}))})),[b.map((function(t){var e={up:[],down:[],left:[],right:[]};return b.forEach((function(n,i){t.compatible(n,-1,0)&&e.right.push(i),t.compatible(n,1,0)&&e.left.push(i),t.compatible(n,0,-1)&&e.down.push(i),t.compatible(n,0,1)&&e.up.push(i)})),e})),w]},t.prototype.generate=function(t){var e=this;return new Promise((function(n,i){e.generateSync(t,n,i)}))},t.prototype.generateSync=function(t,e,n){for(var i=this,o=t.width,r=t.height,s=t.repeatOutput,a=(c(t,["width","height","repeatOutput"]),[]),l=[],h=[],u=0;u<r;u++){for(var p=[],f=0;f<o;f++){for(var d=[],g=0;g<this.frequencies.length;g++)for(var m=0;m<this.frequencies[g].weight;m++)d.push(g);var v={options:d,position:[f,u]};p.push(v),l.push(v)}a.push(p)}var y=function(){if(l.length>0){l.sort((function(t,e){return t.options.length-e.options.length}));var t=l.shift();t.options.length<=0&&n(new Error("WFC contradiction encountered."));var o=[i.random.getRandomElement(t.options)];t.options=o,h.push(t),i.applyAdjacency(a,t.position,s),setTimeout(y,0)}else e(i.postProcess(a))};y()},t.prototype.postProcess=function(t){for(var e=this,n=t.length+(this.m-1),i=t.length+(this.n-1),o=[],r=0;r<n;r++){for(var s=[],a=0;a<i;a++)s.push(null);o.push(s)}return t.forEach((function(t,n){t.forEach((function(t,i){if(t.options.length>0)for(var r=e.frequencies[t.options[0]].option,s=0;s<e.n;s++)for(var a=0;a<e.m;a++)o[n+a][i+s]=r.contents[a][s]}))})),o},t.prototype.applyAdjacency=function(t,e,n,i){var o=e[0];void 0===i&&(i=!1);for(var r=[t[e[1]][o]],s=[];r.length>0;){var a=r.pop();this.propogate(t,a.position,n,s).forEach((function(t){r.push(t)})),i||s.push(a)}},t.prototype.propogate=function(t,e,n,i){var o=this,r=e[0],s=e[1];void 0===i&&(i=[]);var a=t[s][r],l={up:[],down:[],left:[],right:[]};a.options.forEach((function(t){var e=o.rules[t];e.up.forEach((function(t){return l.up.push(t)})),e.down.forEach((function(t){return l.down.push(t)})),e.left.forEach((function(t){return l.left.push(t)})),e.right.forEach((function(t){return l.right.push(t)}))})),l.up=l.up.filter((function(t,e,n){return n.indexOf(t)===e})),l.down=l.down.filter((function(t,e,n){return n.indexOf(t)===e})),l.left=l.left.filter((function(t,e,n){return n.indexOf(t)===e})),l.right=l.right.filter((function(t,e,n){return n.indexOf(t)===e}));var h=[],c={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]};return["up","down","left","right"].forEach((function(e){var o=r+c[e][0],a=s+c[e][1];if(n&&(o+=t[0].length,o%=t[0].length,a+=t.length,a%=t.length),o>=0&&o<t[0].length&&a>=0&&a<t.length){if(i.includes(t[a][o]))return;var u=t[a][o].options.length;t[a][o].options=t[a][o].options.filter((function(t){return l[e].includes(t)})),u>t[a][o].options.length&&h.push(t[a][o])}})),h},t}(),p={target:document.getElementById("displayExample"),width:20,height:15},f=new i(p);f.tileSize=f.calculateTileSize(),window.addEventListener("resize",(()=>{f.tileSize=f.calculateTileSize()}));for(let t=0;t<p.width;t++)for(let e=0;e<p.height;e++)0===t||0===e||t===p.width-1||e===p.height-1?f.setTile(t,e,{content:"#",className:"brickWall"}):3===t&&5===e?f.setTile(t,e,{content:"@",classList:["player"]}):f.setTile(t,e,{content:".",className:"coolFloor"});for(let t=5;t<10;t++)f.updateTile(t,t,{className:"superAwesome"});const d=()=>{const t=Math.floor(Date.now()),e=new r(t),n=e.getRandom(),i=e.getNumber(0,10),o=e.getNumber(0,10,!1),s=e.getRandomElement([1,2,3,4,5,6,7]),a=e.getWeightedElement([{weight:10,option:"Cute dog"},{weight:15,option:"Awesome cat"},{weight:1,option:"Rare Franklin"}]),l=document.getElementById("randomResults");for(;l.lastChild;)l.removeChild(l.lastChild);const h=function(t,e){const n=document.createElement("li"),i=`${t} : ${e}`;n.appendChild(document.createTextNode(i)),l.appendChild(n)};h("x",n.toString()),h("y",i.toString()),h("noThanksNotInteger",o.toString()),h("randomElement",s.toString()),h("randomWeightedElement",a.toString())};d(),document.getElementById("randomButton").addEventListener("click",d);const g=new i({target:document.querySelector(".colorDisplay"),width:10,height:10});for(let t=0;t<10;t++)for(let e=0;e<10;e++)0===t||0===e||9===t||9===e?g.setTile(t,e,"#"):3===t&&3===e?g.setTile(t,e,"@"):4===t&&5===e?g.setTile(t,e,{content:"g",color:"green",background:"rgba(128,0,0,0.2)"}):g.setTile(t,e,".");g.tileSize=g.calculateTileSize(),g.centerDisplay(3,3);const m=["####################","#..................#","#..#.....#....#....#","#..#.....###...##..#","#..#.....#.........#","#.............####.#","#........#....#....#","####...###....#....#","#........#....#....#","####################"],v=m[0].length,y=m.length,b=new i({target:document.getElementById("fovMap"),width:v,height:y});b.tileSize=b.calculateTileSize();const w=new l((t=>{const e=t[0],n=t[1];if(e<0||e>=v||n<0||n>=y)return!1;const i=m[n][e];return b.setTile(e,n,i),"#"!==i}),20),E=[5,5],S=m[E[1]];m[E[1]]=S.slice(0,E[0])+"@"+S.slice(E[0]+1),w.look(E);const O=document.getElementById("simpleEventList"),x=document.getElementById("complexEventList"),T=(t,e)=>{const n=document.createElement("li");n.appendChild(document.createTextNode(t)),e.appendChild(n)},k=new o({type:"simple"}),L={act:()=>T("The Goblin goblins!",O)},P={act:()=>T("The cat meows!",O)};k.add(L),k.add(P),k.add({callback:()=>T("Drip drip goes the faucet.",O),repeats:!0}),k.add({callback:()=>T("Rushing wind! Oh no!",O),repeats:2}),k.add({callback:()=>T("The house of cards falls over. Whoops!",O)});for(let t=0;t<20;t++)k.advance();const _=new o({type:"complex"}),z={act:()=>T("Fast cat nyooms!",x)},I={act:()=>T("Slow ogre is sloooow",x)};_.add({actor:z,delay:1}),_.add({actor:I,delay:5}),_.add({callback:()=>T("The mail has just arrived. Sweet!",x),delay:16});for(let t=0;t<20;t++)_.advance();m[E[1]]=S.slice(0,E[0])+"."+S.slice(E[0]+1);const j=new i({target:document.getElementById("pathDisplay"),width:v,height:y});j.tileSize=j.calculateTileSize(),m.forEach(((t,e)=>t.split("").forEach(((t,n)=>{j.setTile(n,e,t)}))));const A=[1,8];new a({canPass:([t,e])=>!(t<0||t>=v||e<0||e>=y)&&"#"!==m[e][t]}).findPath(A,[15,8],!1).forEach((([t,e])=>{j.updateTile(t,e,{content:"X",className:"pathMarker"})})),j.updateTile(A[0],A[1],"@"),window.addEventListener("resize",(()=>{g.tileSize=g.calculateTileSize(),b.tileSize=b.calculateTileSize(),j.tileSize=j.calculateTileSize()}));const M=new i({target:document.getElementById("wfcDisplay"),width:20,height:20});M.tileSize=M.calculateTileSize(),new u({input:[".#..",".#..","####",".#.."],n:3,repeatInput:!0}).generate({width:20,height:20,repeatOutput:!0}).then((t=>{t.forEach(((t,e)=>{t.forEach(((t,n)=>{M.setTile(n,e,t)}))}))}));const N=new i({target:document.getElementById("wfcDisplayTwo"),width:20,height:20});N.tileSize=N.calculateTileSize(),new u({input:["                 ","             X   ","    X#       #   ","     #       #   ","     #  X    #   ","     #########   ","     #     #     ","     #     X     ","     X           ","                 "],n:3,repeatInput:!0}).generate({width:20,height:20,repeatOutput:!0}).then((t=>{t.forEach(((t,e)=>{t.forEach(((t,n)=>{N.setTile(n,e,t)}))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9kaXNwbGF5L1RpbGUuanMiLCJ3ZWJwYWNrOi8vcm9ndWVsaWtlLXB1bXBraW4tcGF0Y2gvLi9saWIvZGlzcGxheS9EaXNwbGF5LmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL2Rpc3BsYXkvRGlzcGxheVN0eWxlLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL2V2ZW50L0V2ZW50TWFuYWdlci5qcyIsIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9yYW5kb20vUmFuZG9tLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL3BhdGhmaW5kZXIvUGF0aEZpbmRlci5qcyIsIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9mb3YvRk9WLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL3dmYy9XZmNUaWxlLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL3dmYy9XRkMuanMiLCJ3ZWJwYWNrOi8vcm9ndWVsaWtlLXB1bXBraW4tcGF0Y2gvLi9kb2NzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiYmFzZUNsYXNzTmFtZSIsIlRpbGUiLCJ0aWxlT3B0aW9ucyIsInBvc2l0aW9uIiwidGlsZVNpemUiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiX2EiLCJjb250ZW50IiwiX2IiLCJjb2xvciIsIl9jIiwiYmFja2dyb3VuZCIsIl9kIiwiY2xhc3NOYW1lIiwiX2UiLCJlIiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5U3ltYm9scyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiX19yZXN0IiwidGlsZVdpZHRoIiwidGlsZUhlaWdodCIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiX2NvbnRlbnQiLCJzZXQiLCJuZXdDb250ZW50IiwiY29uZmlybUNvbnRlbnRFbGVtZW50IiwiY29udGVudEVsZW1lbnQiLCJpbm5lckhUTUwiLCJsYXN0RWxlbWVudENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJfYmFja2dyb3VuZCIsIm5ld0JhY2tncm91bmQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIl9jb2xvciIsIm5ld2NvbG9yIiwiX3Bvc2l0aW9uIiwibGVmdCIsIngiLCJ0b3AiLCJ5IiwiX3RpbGVXaWR0aCIsIm5ld1dpZHRoIiwid2lkdGgiLCJfdGlsZUhlaWdodCIsIm5ld0hlaWdodCIsImhlaWdodCIsImpvaW4iLCJuZXdDbGFzcyIsInNwbGl0IiwiaWwiLCJyIiwiQXJyYXkiLCJrIiwiYSIsImoiLCJqbCIsIl9fc3ByZWFkQXJyYXlzIiwiX2NsYXNzTGlzdCIsIm5ld0NsYXNzTGlzdCIsIl90aGlzIiwiZXZlcnkiLCJuYW1lIiwiaW5jbHVkZXMiLCJyZW1vdmUiLCJmaWx0ZXIiLCJ0cmltIiwic2V0T3B0aW9ucyIsIm5ld09wdGlvbnMiLCJ1cGRhdGVPcHRpb25zIiwiRGlzcGxheSIsInBhcmFtZXRlcnMiLCJ0YXJnZXQiLCJzZXRBdHRyaWJ1dGUiLCJkaW1lbnNpb25zIiwiYXBwbHlEZWZhdWx0U3R5bGVzIiwiX3RpbGVTaXplIiwibmV3VGlsZVNpemUiLCJmb250U2l6ZSIsInRpbGVzIiwiZm9yRWFjaCIsInRpbGUiLCJyZXNldFNpemUiLCJfd2lkdGgiLCJfaGVpZ2h0IiwibmV3RGltZW5zaW9ucyIsImFsbG9jYXRlRGlzcGxheSIsIm1vdmVUb0NlbnRlciIsImNlbnRlckRpc3BsYXkiLCJjZW50ZXJQb3NpdGlvbiIsInVuZGVmaW5lZCIsInhQZXJjZW50IiwieVBlcmNlbnQiLCJ0cmFuc2Zvcm0iLCJuZXdUaWxlIiwicHVzaCIsImdldFRpbGUiLCJpbmRleCIsImZvcm1hdFRpbGVPcHRpb25zIiwiaW5wdXQiLCJIVE1MRWxlbWVudCIsInNldFRpbGUiLCJ1cGRhdGVUaWxlIiwiY2FsY3VsYXRlRGltZW5zaW9ucyIsImNsaWVudFJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRXaWR0aCIsIk1hdGgiLCJhYnMiLCJyaWdodCIsImNsaWVudEhlaWdodCIsImJvdHRvbSIsImZsb29yIiwiY2FsY3VsYXRlVGlsZVNpemUiLCJzaXplIiwibWF4VGlsZVNpemUiLCJtaW4iLCJzdHlsZXNJZCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGVzIiwiaWQiLCJ0eXBlIiwiY3JlYXRlVGV4dE5vZGUiLCJoZWFkIiwiZmlyc3RTdHlsZSIsInF1ZXJ5U2VsZWN0b3IiLCJpbnNlcnRCZWZvcmUiLCJFdmVudE1hbmFnZXIiLCJxdWV1ZSIsInRpbWUiLCJhZGRlZEV2ZW50IiwiZXZlbnQiLCJGdW5jdGlvbiIsImNhbGxiYWNrIiwiYWN0b3IiLCJyZXBlYXRzIiwiZGVsYXkiLCJzY2hlZHVsZUZvciIsInNwbGljZSIsImFkdmFuY2UiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsImdlbmVyYXRvciIsInRoaXNFdmVudCIsImJvZHkiLCJmIiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwibmV4dCIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsImRvbmUiLCJ2YWx1ZSIsInBvcCIsInN0ZXAiLCJfX2dlbmVyYXRvciIsIkVycm9yIiwic2hpZnQiLCJhY3QiLCJQIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInJlc3VsdCIsInRoZW4iLCJtYXRjaGVzIiwicmV2ZXJzZSIsIm1hdGNoIiwiUmFuZG9tIiwic2VlZCIsImJhc2UiLCJEYXRlIiwibm93Iiwid2V5bCIsImdldFJhbmRvbSIsImdldE51bWJlciIsIm1heCIsImludGVnZXIiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJjZWlsIiwiZ2V0UmFuZG9tRWxlbWVudCIsImFycmF5IiwiZ2V0V2VpZ2h0ZWRFbGVtZW50IiwidG90YWxXZWlnaHQiLCJ3ZWlnaHQiLCJyYW5kb21OdW1iZXIiLCJvcHRpb24iLCJQYXRoRmluZGVyIiwiY2FuUGFzcyIsIm1ldHJpYyIsIm1heEl0ZXJhdGlvbnMiLCJwb3NpdGlvbjEiLCJwb3NpdGlvbjIiLCJmaW5kUGF0aCIsInN0YXJ0UG9zaXRpb24iLCJlbmRQb3NpdGlvbiIsIm9ydGhvZ29uYWxPbmx5Iiwicm91dGUiLCJpdGVyYXRpb25zIiwiY2xvc2VkTGlzdCIsInN0ZXBzIiwiZGlzdGFuY2VGcm9tR29hbCIsInByZXZpb3VzTG9jYXRpb24iLCJvcGVuTGlzdCIsInN0ZXBTaXplQXJyIiwiY29udGFpbnMiLCJsb2NhdGlvbiIsIm5ld1Bvc2l0aW9uIiwic3RlcFNpemUiLCJpbkNsb3NlZExpc3RBbHJlYWR5IiwiZ2V0TG9jYXRpb24iLCJpbk9wZW5MaXN0QWxyZWFkeSIsInNvcnQiLCJiIiwiaXNFcXVhbCIsImxvY2F0aW9uTGlzdCIsInRlc3RMb2NhdGlvbiIsImlzQXJyYXkiLCJzb21lIiwidGVzdFBvc2l0aW9uIiwiX2kiLCJsb2NhdGlvbkxpc3RfMSIsImxvY2F0aW9uXzEiLCJGT1YiLCJjYW5TZWUiLCJyYW5nZSIsImxvb2siLCJsb29rUmFuZ2VPdmVycmlkZSIsInNoYWRvd3MiLCJuZXdTaGFkb3dzIiwiZGlzdGFuY2UiLCJzaWRlIiwiZWRnZSIsImxvb2tQb3MiLCJhbmdsZVRvIiwiYW5ndWxhclNpemUiLCJpblNoYWRvd3MiLCJpc0luU2hhZG93cyIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsImNvbWJpbmVTaGFkb3ciLCJhbmdsZSIsImF0YW4yIiwiUEkiLCJhdGFuIiwic3FydCIsInBvdyIsIm5lZ0FuZ2xlIiwic2hhZG93c18xIiwic2hhZG93IiwibmV3U2hhZG93Iiwib3ZlckxhcEFyciIsIm1haW5TaGFkb3ciLCJXZmNUaWxlIiwiY29udGVudHMiLCJtYXAiLCJyb3ciLCJlcXVhbHMiLCJjb21wYXRpYmxlIiwidmFsIiwieFBvcyIsInlQb3MiLCJjb25zdHJhaW4iLCJjb25zdHJhaW50IiwiV0ZDIiwicGFyYW1zIiwibSIsInJlcGVhdElucHV0IiwicmFuZG9tIiwiaW5wdXRJbWFnZSIsInByb2Nlc3NJbnB1dCIsInJ1bGVzIiwiZnJlcXVlbmNpZXMiLCJoZWlnaHRUaWxlcyIsIndpZHRoVGlsZXMiLCJyYXdUaWxlcyIsInRpbGVJbnB1dCIsImZpbmRJbmRleCIsIm90aGVyVGlsZSIsInJ1bGUiLCJ1cCIsImRvd24iLCJnZW5lcmF0ZSIsImdlbmVyYXRlU3luYyIsInJlcGVhdE91dHB1dCIsIndhdmVGdW5jdGlvbiIsImVudHJvcHlMaXN0IiwiZG9uZUxpc3QiLCJjb2x1bW4iLCJudW0iLCJjb3VudCIsIm9wdGlvbnMiLCJsb29wU3RlcCIsImNob2ljZSIsImFwcGx5QWRqYWNlbmN5Iiwic2V0VGltZW91dCIsInBvc3RQcm9jZXNzIiwib3V0cHV0IiwiYmFja1RyYWNrIiwidG9Eb1RpbGVzIiwiZG9uZVRpbGVzIiwiZG9UaWxlIiwicHJvcG9nYXRlIiwiaWdub3JlTGlzdCIsImFnZ3JlZ2F0ZVJ1bGVzIiwiYXJyIiwibmV4dFRpbGVzIiwic3RlcERpcmVjdGlvbnMiLCJ4eCIsInl5IiwiYmVmb3JlTGVuZ3RoIiwiZGlzcGxheSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyYW5kb21TdHVmZiIsIm9wdGlvbmFsU2VlZCIsIm5vVGhhbmtzTm90SW50ZWdlciIsInJhbmRvbUVsZW1lbnQiLCJyYW5kb21XZWlnaHRlZEVsZW1lbnQiLCJyZXN1bHRzTGlzdCIsImxhc3RDaGlsZCIsImF0dGFjaFJlc3VsdCIsImxpIiwidGV4dCIsInRvU3RyaW5nIiwiY29sb3JEaXNwbGF5IiwiZm92RGlzcGxheSIsImZvdiIsInBsYXllclBvcyIsIm1hcFJvdyIsInNsaWNlIiwic2ltcGxlTGlzdCIsImNvbXBsZXhMaXN0Iiwic2hvd0FjdGlvbiIsImFjdGlvbiIsImxpc3QiLCJsaXN0SXRlbSIsInNpbXBsZUV2ZW50cyIsInNpbXBsZUdvYmxpbiIsInNpbXBsZUNhdCIsImNvbXBsZXhFdmVudHMiLCJmYXN0Q2F0Iiwic2xvd09ncmUiLCJwYXRoRGlzcGxheSIsInN0YXJ0UG9zIiwid2ZjRGlzcGxheSIsImNvbCIsIndmY0Rpc3BsYXlUd28iXSwibWFwcGluZ3MiOiJtQkFBQSxJQUFJQSxFQUFzQyxXQVN0QyxPQVJBQSxFQUFXQyxPQUFPQyxRQUFVLFNBQVNDLEdBQ2pDLElBQUssSUFBSUMsRUFBR0MsRUFBSSxFQUFHQyxFQUFJQyxVQUFVQyxPQUFRSCxFQUFJQyxFQUFHRCxJQUU1QyxJQUFLLElBQUlJLEtBRFRMLEVBQUlHLFVBQVVGLEdBQ09KLE9BQU9TLFVBQVVDLGVBQWVDLEtBQUtSLEVBQUdLLEtBQ3pETixFQUFFTSxHQUFLTCxFQUFFSyxJQUVqQixPQUFPTixJQUVLVSxNQUFNQyxLQUFNUCxZQW9CNUJRLEVBQWdCLGVBNk1wQixRQTNNMEIsV0FDdEIsU0FBU0MsRUFBS0MsRUFBYUMsRUFBVUMsR0FFakNMLEtBQUtNLFFBQVVDLFNBQVNDLGNBQWMsT0FDdENSLEtBQUtNLFFBQVFHLFVBQVVDLElBQUlULEdBRTNCLElBQUlVLEVBQUtSLEVBQVlTLFFBQVNBLE9BQWlCLElBQVBELEVBQWdCLEdBQUtBLEVBQUlFLEVBQUtWLEVBQVlXLE1BQU9BLE9BQWUsSUFBUEQsRUFBZ0IsR0FBS0EsRUFBSUUsRUFBS1osRUFBWWEsV0FBWUEsT0FBb0IsSUFBUEQsRUFBZ0IsR0FBS0EsRUFBSUUsRUFBS2QsRUFBWWUsVUFBV0EsT0FBbUIsSUFBUEQsRUFBZ0IsR0FBS0EsRUFBSUUsRUFBS2hCLEVBQVlNLFVBQVdBLE9BQW1CLElBQVBVLEVBQWdCLEdBQUtBLEdBMUI3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QUU4UyxhIiwiZmlsZSI6InNjcmlwdGJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxudmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn07XHJcbnZhciBfX3NwcmVhZEFycmF5cyA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheXMpIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG52YXIgYmFzZUNsYXNzTmFtZSA9IFwicHVtcGtpbi10aWxlXCI7XHJcbi8qKiBDbGFzcyB0byBrZWVwIHRyYWNrIG9mIGVhY2ggaW5kaXZpZHVhbCB0aWxlIGluIHRoZSBkaXNwbGF5ICovXHJcbnZhciBUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGlsZSh0aWxlT3B0aW9ucywgcG9zaXRpb24sIHRpbGVTaXplKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIG5lY2Vzc2FyeSBlbGVtZW50cyBhbmQgYXBwbHkgY2xhc3Nlc1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGJhc2VDbGFzc05hbWUpO1xyXG4gICAgICAgIC8vIFNldCB0aWxlIGNvbnRlbnQgYW5kIGNvbG91ciBzY2hlbWVcclxuICAgICAgICB2YXIgX2EgPSB0aWxlT3B0aW9ucy5jb250ZW50LCBjb250ZW50ID0gX2EgPT09IHZvaWQgMCA/ICcnIDogX2EsIF9iID0gdGlsZU9wdGlvbnMuY29sb3IsIGNvbG9yID0gX2IgPT09IHZvaWQgMCA/ICcnIDogX2IsIF9jID0gdGlsZU9wdGlvbnMuYmFja2dyb3VuZCwgYmFja2dyb3VuZCA9IF9jID09PSB2b2lkIDAgPyAnJyA6IF9jLCBfZCA9IHRpbGVPcHRpb25zLmNsYXNzTmFtZSwgY2xhc3NOYW1lID0gX2QgPT09IHZvaWQgMCA/ICcnIDogX2QsIF9lID0gdGlsZU9wdGlvbnMuY2xhc3NMaXN0LCBjbGFzc0xpc3QgPSBfZSA9PT0gdm9pZCAwID8gW10gOiBfZSwgcmVzdCA9IF9fcmVzdCh0aWxlT3B0aW9ucywgW1wiY29udGVudFwiLCBcImNvbG9yXCIsIFwiYmFja2dyb3VuZFwiLCBcImNsYXNzTmFtZVwiLCBcImNsYXNzTGlzdFwiXSk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuICAgICAgICBpZiAoY2xhc3NMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QgPSBjbGFzc0xpc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2V0IHRoZSB0aWxlIHNpemVcclxuICAgICAgICB0aGlzLnRpbGVXaWR0aCA9ICh0aWxlU2l6ZSA9PT0gbnVsbCB8fCB0aWxlU2l6ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGlsZVNpemUudGlsZVdpZHRoKSA/IHRpbGVTaXplLnRpbGVXaWR0aCA6IDE2O1xyXG4gICAgICAgIHRoaXMudGlsZUhlaWdodCA9ICh0aWxlU2l6ZSA9PT0gbnVsbCB8fCB0aWxlU2l6ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGlsZVNpemUudGlsZUhlaWdodCkgPyB0aWxlU2l6ZS50aWxlSGVpZ2h0IDogdGhpcy50aWxlV2lkdGg7XHJcbiAgICAgICAgLy8gU2V0IHRoZSB0aWxlIHBvc2l0aW9uXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbGUucHJvdG90eXBlLCBcImNvbnRlbnRcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRoZSB0aWxlIGNvbnRlbnRzICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb250ZW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3Q29udGVudCkge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgY29udGVudEVsZW1lbnQgaWYgaXQgZG9lc24ndCBhbHJlYWR5IGV4aXN0XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlybUNvbnRlbnRFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSBuZXcgYW5kIG9sZCBjb250ZW50IGRvbid0IG1hdGNoXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb250ZW50ICE9PSBuZXdDb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBjb250ZW50IGlzIGEgc3RyaW5nLCBqdXN0IGFkZCBpdFxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQuaW5uZXJIVE1MID0gbmV3Q29udGVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIElmIGl0IGlzIGFuIGVsZW1lbnQsIGVtcHR5IHRoZSB0aWxlIGFuZCBhcHBlbmQgdGhlIG5ldyBjb250ZW50XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5jb250ZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5jb250ZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZChuZXdDb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnQgPSBuZXdDb250ZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbGUucHJvdG90eXBlLCBcImJhY2tncm91bmRcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRoZSBiYWNrZ3JvdW5kIGNvbG91ciAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYmFja2dyb3VuZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld0JhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgaWYgKG5ld0JhY2tncm91bmQgIT09IHRoaXMuX2JhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JhY2tncm91bmQgPSBuZXdCYWNrZ3JvdW5kO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG5ld0JhY2tncm91bmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwiY29sb3JcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRoZSBjb2xvciBjb2xvdXIgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3Y29sb3IpIHtcclxuICAgICAgICAgICAgaWYgKG5ld2NvbG9yICE9PSB0aGlzLl9jb2xvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29sb3IgPSBuZXdjb2xvcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5jb2xvciA9IG5ld2NvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbGUucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHtcclxuICAgICAgICAvKiogR2V0IG9yIHNldCBwb3NpdGlvbiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IF9fYXNzaWduKHt9LCBwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gcG9zaXRpb24ueCAqIHRoaXMudGlsZVdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gcG9zaXRpb24ueSAqIHRoaXMudGlsZUhlaWdodCArIFwicHhcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwidGlsZVdpZHRoXCIsIHtcclxuICAgICAgICAvKiogR2V0IG9yIHNldCB0aWxlIHdpZHRoICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aWxlV2lkdGg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdXaWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl90aWxlV2lkdGggPSBuZXdXaWR0aDtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbGUucHJvdG90eXBlLCBcInRpbGVIZWlnaHRcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRoZSB0aWxlIGhlaWdodCAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGlsZUhlaWdodDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld0hlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLl90aWxlSGVpZ2h0ID0gbmV3SGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaWxlLnByb3RvdHlwZSwgXCJjbGFzc05hbWVcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRoZSBjbGFzc25hbWUgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3NMaXN0LmpvaW4oXCIgXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3Q2xhc3MpIHtcclxuICAgICAgICAgICAgaWYgKG5ld0NsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdCA9IG5ld0NsYXNzLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwiY2xhc3NMaXN0XCIsIHtcclxuICAgICAgICAvKiogR2V0IG9yIHNldCB0aGUgbGlzdCBvZiBjbGFzc2VzICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5cyhbYmFzZUNsYXNzTmFtZV0sIHRoaXMuX2NsYXNzTGlzdCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdDbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9jbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NsYXNzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE9ubHkgYWRkL3JlbW92ZSBjbGFzc2VzIGlmIHRoZSB0d28gbGlzdHMgYXJlIGFjdHVhbGx5IGRpZmZlcmVudFxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHVnbHksIGJ1dCBjaGFuZ2luZyB0aGUgRE9NIGlzIG1vcmUgZXhwZW5zaXZlIHRoYW4gdGhpcyBpcy5cclxuICAgICAgICAgICAgaWYgKG5ld0NsYXNzTGlzdC5sZW5ndGggIT09IHRoaXMuX2NsYXNzTGlzdC5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgICFuZXdDbGFzc0xpc3QuZXZlcnkoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIF90aGlzLl9jbGFzc0xpc3QuaW5jbHVkZXMobmFtZSk7IH0pIHx8XHJcbiAgICAgICAgICAgICAgICAhdGhpcy5fY2xhc3NMaXN0LmV2ZXJ5KGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBuZXdDbGFzc0xpc3QuaW5jbHVkZXMobmFtZSk7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2xhc3NMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0KS5yZW1vdmUuYXBwbHkoX2EsIHRoaXMuX2NsYXNzTGlzdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGFzc0xpc3QgPSBuZXdDbGFzc0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRyaW0oKSAmJiB4ICE9PSBiYXNlQ2xhc3NOYW1lOyB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdDbGFzc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCB1c2luZyB0aGUgZ2V0dGVyLCB0byBlbnN1cmUgYmFzZUNsYXNzTmFtZSBpcyBzdGlsbCBvbiB0aGUgbGlzdC5cclxuICAgICAgICAgICAgICAgICAgICAoX2IgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX2IsIHRoaXMuY2xhc3NMaXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKiBTZXQgb3B0aW9ucyBmb3IgdGhlIHRpbGUgKi9cclxuICAgIFRpbGUucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAobmV3T3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYSA9IG5ld09wdGlvbnMuY29udGVudCwgY29udGVudCA9IF9hID09PSB2b2lkIDAgPyBcIlwiIDogX2EsIF9iID0gbmV3T3B0aW9ucy5iYWNrZ3JvdW5kLCBiYWNrZ3JvdW5kID0gX2IgPT09IHZvaWQgMCA/IFwiXCIgOiBfYiwgX2MgPSBuZXdPcHRpb25zLmNvbG9yLCBjb2xvciA9IF9jID09PSB2b2lkIDAgPyBcIlwiIDogX2MsIF9kID0gbmV3T3B0aW9ucy5jbGFzc05hbWUsIGNsYXNzTmFtZSA9IF9kID09PSB2b2lkIDAgPyBcIlwiIDogX2QsIGNsYXNzTGlzdCA9IG5ld09wdGlvbnMuY2xhc3NMaXN0O1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgaWYgKGNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdCA9IGNsYXNzTGlzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBvcHRpb25zIGZvciB0aGUgdGlsZVxyXG4gICAgICovXHJcbiAgICBUaWxlLnByb3RvdHlwZS51cGRhdGVPcHRpb25zID0gZnVuY3Rpb24gKG5ld09wdGlvbnMpIHtcclxuICAgICAgICB2YXIgY29udGVudCA9IG5ld09wdGlvbnMuY29udGVudCwgYmFja2dyb3VuZCA9IG5ld09wdGlvbnMuYmFja2dyb3VuZCwgY29sb3IgPSBuZXdPcHRpb25zLmNvbG9yLCBjbGFzc05hbWUgPSBuZXdPcHRpb25zLmNsYXNzTmFtZSwgY2xhc3NMaXN0ID0gbmV3T3B0aW9ucy5jbGFzc0xpc3Q7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgYmFja2dyb3VuZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGNvbG9yICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYXNzTGlzdCAmJiBjbGFzc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdCA9IGNsYXNzTGlzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNsYXNzTmFtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrIGlmIGEgY29udGVudEVsZW1lbnQgZXhpc3RzLCBhbmQgaWYgaXQgZG9lc24ndCwgYWRkIGl0ICovXHJcbiAgICBUaWxlLnByb3RvdHlwZS5jb25maXJtQ29udGVudEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gVGlsZTtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgVGlsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxuaW1wb3J0IFRpbGUgZnJvbSAnLi9UaWxlLmpzJztcclxuaW1wb3J0IGNzcyBmcm9tICcuL0Rpc3BsYXlTdHlsZS5qcyc7XHJcbi8qKiBEaXNwbGF5IGNsYXNzLCB0byBjcmVhdGUgYW5kIGNvbnRyb2wgYSBkaXNwbGF5ICovXHJcbnZhciBEaXNwbGF5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqIENyZWF0ZSBhIG5ldyBEaXNwbGF5XHJcbiAgICAgKiAgQHBhcmFtIHtEaXNwbGF5UGFyYW1zfSBwYXJhbWV0ZXJzIC0gT2JqZWN0IG9mIHBhcmFtZXRlcnMgdG8gaW5pdGlhbGl6ZSB0aGUgZGlzcGxheS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRGlzcGxheShwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9IHBhcmFtZXRlcnMudGFyZ2V0LCBfYSA9IHBhcmFtZXRlcnMud2lkdGgsIHdpZHRoID0gX2EgPT09IHZvaWQgMCA/IDEgOiBfYSwgX2IgPSBwYXJhbWV0ZXJzLmhlaWdodCwgaGVpZ2h0ID0gX2IgPT09IHZvaWQgMCA/IDEgOiBfYiwgdGlsZVdpZHRoID0gcGFyYW1ldGVycy50aWxlV2lkdGgsIHRpbGVIZWlnaHQgPSBwYXJhbWV0ZXJzLnRpbGVIZWlnaHQsIHJlc3QgPSBfX3Jlc3QocGFyYW1ldGVycywgW1widGFyZ2V0XCIsIFwid2lkdGhcIiwgXCJoZWlnaHRcIiwgXCJ0aWxlV2lkdGhcIiwgXCJ0aWxlSGVpZ2h0XCJdKTtcclxuICAgICAgICAvLyBTZXQgdGhlIHRhcmdldFxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldC5jbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuY2xhc3NMaXN0LmFkZChcInB1bXBraW4tY29udGFpbmVyXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuY2xhc3NOYW1lID0gXCJwdW1wa2luLWNvbnRhaW5lclwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGVsZW1lbnQgZm9yIHRoZSBkaXNwbGF5XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IFwicHVtcGtpbi1kaXNwbGF5XCI7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAvLyBTZXQgdGhlIGRpc3BsYXkgZGltZW5zaW9uc1xyXG4gICAgICAgIHRoaXMuZGltZW5zaW9ucyA9IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xyXG4gICAgICAgIHRoaXMudGlsZVNpemUgPSB7XHJcbiAgICAgICAgICAgIHRpbGVXaWR0aDogKHRpbGVXaWR0aCkgPyB0aWxlV2lkdGggOiAxNixcclxuICAgICAgICAgICAgdGlsZUhlaWdodDogKHRpbGVIZWlnaHQpID8gdGlsZUhlaWdodCA6ICh0aWxlV2lkdGgpID8gdGlsZVdpZHRoIDogMTZcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEFkZCBzdHlsZSB0byB0aGUgcGFnZSBmb3IgdGhlIGRpc3BsYXlcclxuICAgICAgICB0aGlzLmFwcGx5RGVmYXVsdFN0eWxlcygpO1xyXG4gICAgICAgIC8vIEFwcGVuZCB0byB0aGUgY29udGFpbmVyIGVsZW1lbnRcclxuICAgICAgICB0aGlzLnRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERpc3BsYXkucHJvdG90eXBlLCBcInRpbGVTaXplXCIsIHtcclxuICAgICAgICAvKiogVGlsZSBzaXplICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aWxlU2l6ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1RpbGVTaXplKSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgdGhpcy5fdGlsZVNpemUgPSBuZXdUaWxlU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmZvbnRTaXplID0gbmV3VGlsZVNpemUudGlsZUhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgKF9hID0gdGhpcy50aWxlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvckVhY2goZnVuY3Rpb24gKHRpbGUpIHtcclxuICAgICAgICAgICAgICAgIHRpbGUudGlsZVdpZHRoID0gbmV3VGlsZVNpemUudGlsZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGlsZS50aWxlSGVpZ2h0ID0gbmV3VGlsZVNpemUudGlsZUhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRpbGUucG9zaXRpb24gPSB0aWxlLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFNpemUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICA7XHJcbiAgICA7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGlzcGxheS5wcm90b3R5cGUsIFwiZGltZW5zaW9uc1wiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIGRpc3BsYXkgZGltZW5zaW9ucyAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyB3aWR0aDogdGhpcy5fd2lkdGgsIGhlaWdodDogdGhpcy5faGVpZ2h0IH07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdEaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdEaW1lbnNpb25zLndpZHRoICE9PSB0aGlzLl93aWR0aCAmJiBuZXdEaW1lbnNpb25zLmhlaWdodCAhPT0gdGhpcy5faGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93aWR0aCA9IG5ld0RpbWVuc2lvbnMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBuZXdEaW1lbnNpb25zLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBkaXNwbGF5IHRvIGFjY29tb2RhdGUgdGhlIG5ldyBzaXplXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlRGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNpemUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVRvQ2VudGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICA7XHJcbiAgICA7XHJcbiAgICAvKiogUmVzZXQgZGlzcGxheSBlbGVtZW50IHNpemUgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLnJlc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fd2lkdGggJiYgdGhpcy5faGVpZ2h0ICYmIHRoaXMudGlsZVNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy5fd2lkdGggKiB0aGlzLnRpbGVTaXplLnRpbGVXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuX2hlaWdodCAqIHRoaXMudGlsZVNpemUudGlsZUhlaWdodCArIFwicHhcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFBvc2l0aW9uIHRvIGNlbnRlciB0aGUgZGlzcGxheSB2aWV3IG9uICovXHJcbiAgICBEaXNwbGF5LnByb3RvdHlwZS5jZW50ZXJEaXNwbGF5ID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHggPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHkgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXJQb3NpdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2VudGVyUG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB4OiB4LFxyXG4gICAgICAgICAgICAgICAgeTogeVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vdmVUb0NlbnRlcigpO1xyXG4gICAgfTtcclxuICAgIERpc3BsYXkucHJvdG90eXBlLm1vdmVUb0NlbnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jZW50ZXJQb3NpdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgeFBlcmNlbnQgPSAodGhpcy5jZW50ZXJQb3NpdGlvbi54ICsgMC41KSAvIHRoaXMuZGltZW5zaW9ucy53aWR0aDtcclxuICAgICAgICAgICAgdmFyIHlQZXJjZW50ID0gKHRoaXMuY2VudGVyUG9zaXRpb24ueSArIDAuNSkgLyB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyAteFBlcmNlbnQgKiAxMDAgKyBcIiUsXCIgKyAteVBlcmNlbnQgKiAxMDAgKyBcIiUpXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIEJ1aWxkIHRoZSBhcnJheSBvZiB0aWxlcyBhbmQgYXR0YWNoIHRoZW0gdG8gdGhlIGRpc3BsYXkgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmFsbG9jYXRlRGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFN0YXJ0IGEgZnJlc2ggdGlsZXMgYXJyYXlcclxuICAgICAgICBpZiAodGhpcy50aWxlcykge1xyXG4gICAgICAgICAgICAvLyBFbXB0eSBkaXNwbGF5IGlmIGl0IGhhcyBjb250ZW50cyBhbHJlYWR5XHJcbiAgICAgICAgICAgIHRoaXMudGlsZXMuZm9yRWFjaChmdW5jdGlvbiAodGlsZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0aWxlLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aWxlcyA9IFtdO1xyXG4gICAgICAgIC8vIEdlbmVyYXRlIHRpbGVzXHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLl9oZWlnaHQ7IHkrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuX3dpZHRoOyB4KyspIHtcclxuICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBuZXcgdGlsZVxyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1RpbGUgPSBuZXcgVGlsZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJycsXHJcbiAgICAgICAgICAgICAgICB9LCB7IHg6IHgsIHk6IHkgfSwgdGhpcy50aWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGxpc3Qgb2YgdGlsZXNcclxuICAgICAgICAgICAgICAgIHRoaXMudGlsZXMucHVzaChuZXdUaWxlKTtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0byB0aGUgYWN0dWFsIGRpc3BsYXlcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChuZXdUaWxlLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHZXQgdGhlIGRpc3BsYXkgdGlsZSBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFBvc2l0aW9uIGZyb20gdGhlIGxlZnQgc2lkZSBvZiB0aGUgZGlzcGxheVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSBQb3NpdGlvbiBmcm9tIHRoZSB0b3Agb2YgdGhlIGRpc3BsYXlcclxuICAgICovXHJcbiAgICBEaXNwbGF5LnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgICAgICBpZiAoeCA+PSAwICYmIHggPCB0aGlzLl93aWR0aCAmJiB5ID49IDAgJiYgeSA8IHRoaXMuX2hlaWdodCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB4ICsgeSAqIHRoaXMuX3dpZHRoO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlc1tpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogVGFrZSBpbnB1dCBhbmQgZm9ybWF0IGludG8gVGlsZU9wdGlvbnMgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmZvcm1hdFRpbGVPcHRpb25zID0gZnVuY3Rpb24gKGlucHV0KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjb250ZW50OiBpbnB1dCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRlbnQ6IGlucHV0IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBTZXQgZGV0YWlscyBmb3IgdGhlIHNwZWNpZmllZCB0aWxlICovXHJcbiAgICBEaXNwbGF5LnByb3RvdHlwZS5zZXRUaWxlID0gZnVuY3Rpb24gKHgsIHksIG5ld09wdGlvbnMpIHtcclxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuZ2V0VGlsZSh4LCB5KTtcclxuICAgICAgICBpZiAodGlsZSkge1xyXG4gICAgICAgICAgICB0aWxlLnNldE9wdGlvbnModGhpcy5mb3JtYXRUaWxlT3B0aW9ucyhuZXdPcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBVcGRhdGUgZGV0YWlscyBmb3IgdGhlIHNwZWNpZmllZCB0aWxlLCBwcmVzZXJ2aW5nIGV2ZXJ5IHVuc2V0IHByb3BlcnR5LiAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUudXBkYXRlVGlsZSA9IGZ1bmN0aW9uICh4LCB5LCBuZXdPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmdldFRpbGUoeCwgeSk7XHJcbiAgICAgICAgaWYgKHRpbGUpIHtcclxuICAgICAgICAgICAgdGlsZS51cGRhdGVPcHRpb25zKHRoaXMuZm9ybWF0VGlsZU9wdGlvbnMobmV3T3B0aW9ucykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogR2l2ZW4gdGhlIHNpemUgb2YgdGhlIHRhcmdldCBjb250YWluZXIsIGFuZCB0aGUgdGlsZSBzaXplLCBkZXRlcm1pbmUgdGhlIG51bWJlciBvZiB0aWxlcyBuZWVkZWQuICovXHJcbiAgICBEaXNwbGF5LnByb3RvdHlwZS5jYWxjdWxhdGVEaW1lbnNpb25zID0gZnVuY3Rpb24gKGNsaWVudFJlY3QpIHtcclxuICAgICAgICBpZiAoY2xpZW50UmVjdCA9PT0gdm9pZCAwKSB7IGNsaWVudFJlY3QgPSB0aGlzLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgfVxyXG4gICAgICAgIHZhciBjbGllbnRXaWR0aCA9IE1hdGguYWJzKGNsaWVudFJlY3QucmlnaHQgLSBjbGllbnRSZWN0LmxlZnQpO1xyXG4gICAgICAgIHZhciBjbGllbnRIZWlnaHQgPSBNYXRoLmFicyhjbGllbnRSZWN0LmJvdHRvbSAtIGNsaWVudFJlY3QudG9wKTtcclxuICAgICAgICAvLyBSb3VuZCBkb3duOyB3ZSBkbyBub3Qgd2FudCBwYXJ0aWFsIHRpbGVzXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd2lkdGg6IE1hdGguZmxvb3IoY2xpZW50V2lkdGggLyB0aGlzLnRpbGVTaXplLnRpbGVXaWR0aCksXHJcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5mbG9vcihjbGllbnRIZWlnaHQgLyB0aGlzLnRpbGVTaXplLnRpbGVIZWlnaHQpXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogR2l2ZW4gdGhlIHNpemUgb2YgdGhlIHRhcmdldCBjb250YWluZXIsIGFuZCB0aGUgbnVtYmVyIG9mIHRpbGVzLCBkZXRlcm1pbmUgdGhlIHRpbGUgc2l6ZSBuZWVkZWRcclxuICAgICAqICBUaGlzIGFzc3VtZXMgc3F1YXJlIHRpbGVzIGFyZSBkZXNpcmVkLlxyXG4gICAgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmNhbGN1bGF0ZVRpbGVTaXplID0gZnVuY3Rpb24gKGNsaWVudFJlY3QpIHtcclxuICAgICAgICBpZiAoY2xpZW50UmVjdCA9PT0gdm9pZCAwKSB7IGNsaWVudFJlY3QgPSB0aGlzLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgfVxyXG4gICAgICAgIHZhciBjbGllbnRXaWR0aCA9IE1hdGguYWJzKGNsaWVudFJlY3QucmlnaHQgLSBjbGllbnRSZWN0LmxlZnQpO1xyXG4gICAgICAgIHZhciBjbGllbnRIZWlnaHQgPSBNYXRoLmFicyhjbGllbnRSZWN0LmJvdHRvbSAtIGNsaWVudFJlY3QudG9wKTtcclxuICAgICAgICAvLyBUaGlzIGNvdWxkIHBvdGVudGlhbGx5IGdpdmUgYWJzdXJkIHJlc3VsdHMsIHNvIGdldCB0aGUgXCJuYWl2ZSBmaXJzdC1ndWVzc1wiIGhlcmVcclxuICAgICAgICB2YXIgc2l6ZSA9IHtcclxuICAgICAgICAgICAgdGlsZVdpZHRoOiBjbGllbnRXaWR0aCAvIHRoaXMuZGltZW5zaW9ucy53aWR0aCxcclxuICAgICAgICAgICAgdGlsZUhlaWdodDogY2xpZW50SGVpZ2h0IC8gdGhpcy5kaW1lbnNpb25zLmhlaWdodFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQ2hvb3NlIHRoZSBsb3dlc3Qgb2YgdGhlIHR3by4gVGhpcyBpcyB0aGUgbWF4aW11bSBzcXVhcmUgdGlsZSBzaXplIHRoYXQgd2lsbCBmaXQgdGhlIGdpdmVuIGRpbWVuc2lvbnNcclxuICAgICAgICB2YXIgbWF4VGlsZVNpemUgPSBNYXRoLm1pbihzaXplLnRpbGVXaWR0aCwgc2l6ZS50aWxlSGVpZ2h0KTtcclxuICAgICAgICAvLyBEb24ndCBib3RoZXIgcm91bmRpbmc7IGZvbnRzIGNhbiBiZSBwcmVjaXNlIG51bWJlcnNcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0aWxlV2lkdGg6IG1heFRpbGVTaXplLFxyXG4gICAgICAgICAgICB0aWxlSGVpZ2h0OiBtYXhUaWxlU2l6ZVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIEFkZCB0aGUgZGVmYXVsdCBzdHlsZXMgdG8gdGhlIGhlYWQgb2YgdGhlIHBhZ2UuICovXHJcbiAgICBEaXNwbGF5LnByb3RvdHlwZS5hcHBseURlZmF1bHRTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlc0lkID0gXCJwdW1wa2luLWRlZmF1bHQtc3R5bGVzXCI7XHJcbiAgICAgICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBzdHlsZXMgYXJlbid0IGFscmVhZHkgcHJlc2VudFxyXG4gICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3R5bGVzSWQpKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgc3R5bGUgZWxlbWVudFxyXG4gICAgICAgICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICBzdHlsZXMuaWQgPSBzdHlsZXNJZDtcclxuICAgICAgICAgICAgc3R5bGVzLnR5cGUgPSBcInRleHQvY3NzXCI7XHJcbiAgICAgICAgICAgIHN0eWxlcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBoZWFkIG9mIHRoZSBwYWdlXHJcbiAgICAgICAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuaGVhZDtcclxuICAgICAgICAgICAgLy8gRmluZCB0aGUgZmlyc3Qgc3R5bGUgb3IgbGluayBlbGVtZW50LCBhbmQgaW5zZXJ0IGluIGZyb250IG9mIGl0XHJcbiAgICAgICAgICAgIHZhciBmaXJzdFN0eWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInN0eWxlLCBsaW5rXCIpO1xyXG4gICAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzdHlsZXMsIGZpcnN0U3R5bGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRGlzcGxheTtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgRGlzcGxheTtcclxuO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaXNwbGF5LmpzLm1hcCIsIi8vIERlZmF1bHQgc3R5bGluZyBmb3IgdGhlIGRpc3BsYXkuIFRoaXMgZ2V0cyBpbnNlcnRlZCBpbnRvIHRoZSBkb2N1bWVudCBoZWFkLCBiZWZvcmUgb3RoZXIgc3R5bGVzaGVldHMgKHNvIHRoYXQgeW91IGNhbiBvdmVycmlkZSB0aGVtIGlmIGRlc2lyZWQhKVxyXG52YXIgY3NzID0gXCJcXG4ucHVtcGtpbi1jb250YWluZXIge1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XFxuICAgIGNvbG9yOiAjZmZmZmZmO1xcbn1cXG5cXG4ucHVtcGtpbi1kaXNwbGF5IHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBsZWZ0OiA1MCU7XFxuICAgIHRvcDogNTAlO1xcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcXG59XFxuXFxuLnB1bXBraW4tdGlsZSB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG59XFxuXFxuLnB1bXBraW4tdGlsZSA+ICoge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IDUwJTtcXG4gICAgdG9wOiA1MCU7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xcbiAgICB6LWluZGV4OiAxMDtcXG59XFxuXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNzcztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlzcGxheVN0eWxlLmpzLm1hcCIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59O1xyXG4vKiogRXZlbnQgbWFuYWdlciwgdG8ga2VlcCB0cmFjayBvZiB0dXJucyAqL1xyXG52YXIgRXZlbnRNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKHBhcmFtZXRlcnMpIHtcclxuICAgICAgICBpZiAoIXBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICA7XHJcbiAgICAgICAgdmFyIF9hID0gcGFyYW1ldGVycy50eXBlLCB0eXBlID0gX2EgPT09IHZvaWQgMCA/IFwic2ltcGxlXCIgOiBfYTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqIEFkZCBhbiBldmVudCB0byB0aGUgcXVldWUgKi9cclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGFkZGVkRXZlbnQpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB7fTtcclxuICAgICAgICAvLyBEZXRlcm1pbmUgdHlwZSBvZiB0aGUgaW5wdXQsIGFuZCBoYW5kbGUgYWNjb3JkaW5nbHlcclxuICAgICAgICBpZiAoYWRkZWRFdmVudCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LmNhbGxiYWNrID0gYWRkZWRFdmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXCJhY3RcIiBpbiBhZGRlZEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LmFjdG9yID0gYWRkZWRFdmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZXZlbnQsIGFkZGVkRXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3N1bWUgcmVwZWF0aW5nIGlmIGFuIGFjdG9yIHdhcyBwcm92aWRlZFxyXG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnQucmVwZWF0cyA9PT0gXCJ1bmRlZmluZWRcIiAmJiBldmVudC5hY3Rvcikge1xyXG4gICAgICAgICAgICBldmVudC5yZXBlYXRzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ29tcGxleCBldmVudCBxdWV1ZSB1c2VzIGRlbGF5IHRpbWUgYSBiaXQgYmV0dGVyXHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gXCJjb21wbGV4XCIpIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudC5kZWxheSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuZGVsYXkgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZUZvciA9IGV2ZW50LmRlbGF5ICsgdGhpcy50aW1lO1xyXG4gICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGV2ZW50IGF0IHRoZSBhcHByb3ByaWF0ZSB0aW1lXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCB8fCB0aGlzLnF1ZXVlW3RoaXMucXVldWUubGVuZ3RoIC0gMV0udGltZSA8PSBzY2hlZHVsZUZvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogc2NoZWR1bGVGb3JcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnF1ZXVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxlRm9yIDwgdGhpcy5xdWV1ZVtpXS50aW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUuc3BsaWNlKGksIDAsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IHNjaGVkdWxlRm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNpbXBsZSwgbm8gd2VpcmQgdGltZSBzaGl0XHJcbiAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgICAgICB0aW1lOiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUnVuIHRoZSBuZXh0IGV2ZW50ICovXHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLmFkdmFuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGhpc0V2ZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25maXJtIGlmIHRoZXJlIGlzIGFueXRoaW5nIGluIHRoZSBxdWV1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV2ZW50IHF1ZXVlIGlzIGVtcHR5LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzRXZlbnQgPSB0aGlzLnF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGltZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWUgPSB0aGlzRXZlbnQudGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgcmVwZWF0cyBpcyBhIG51bWJlciwgcmVkdWNlIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNFdmVudC5ldmVudC5yZXBlYXRzID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzRXZlbnQuZXZlbnQucmVwZWF0cy0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0IG5lZWRzIHRvIHJlcGVhdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0V2ZW50LmV2ZW50LnJlcGVhdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlLWFkZCB0byB0aGUgcXVldWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXNFdmVudC5ldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzRXZlbnQuZXZlbnQuY2FsbGJhY2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzRXZlbnQuZXZlbnQuY2FsbGJhY2soKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpc0V2ZW50LmV2ZW50LmFjdG9yKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpc0V2ZW50LmV2ZW50LmFjdG9yLmFjdCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogUmVtb3ZlIGFjdG9yIGZyb20gdGhlIGV2ZW50IHF1ZXVlICovXHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChhY3Rvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50LCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQuZXZlbnQuYWN0b3IgPT09IGFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUmV2ZXJzZSBtYXRjaGVzICh3b3JrIGZyb20gdGhlIGVuZCBmaXJzdClcclxuICAgICAgICBtYXRjaGVzLnJldmVyc2UoKTtcclxuICAgICAgICAvLyBSZW1vdmUgZWFjaCBtYXRjaFxyXG4gICAgICAgIG1hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgX3RoaXMucXVldWUuc3BsaWNlKG1hdGNoLCAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRNYW5hZ2VyLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xyXG4gICAgICAgIC8qKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBxdWV1ZWQgZXZlbnRzIGluIHRoZSBxdWV1ZS4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBFdmVudE1hbmFnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCBkZWZhdWx0IEV2ZW50TWFuYWdlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRNYW5hZ2VyLmpzLm1hcCIsIi8qKiBSYW5kb20gZ2VuZXJhdG9yICovXHJcbnZhciBSYW5kb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSYW5kb20oc2VlZCwgYmFzZSkge1xyXG4gICAgICAgIGlmICghc2VlZCkge1xyXG4gICAgICAgICAgICAvLyBHZXQgc2VlZCBmcm9tIG1pbGxpc2Vjb25kcyBzaW5jZSBKYW4gMXN0LCAxOTcwXHJcbiAgICAgICAgICAgIHNlZWQgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlZWQgPSBNYXRoLmZsb29yKHNlZWQpO1xyXG4gICAgICAgIHRoaXMud2V5bCA9IDA7XHJcbiAgICAgICAgdGhpcy54ID0gMDtcclxuICAgICAgICB0aGlzLmJhc2UgPSAoYmFzZSkgPyBiYXNlIDogMTAwMDAwO1xyXG4gICAgICAgIC8vIFJ1biBpdCBhIGNvdXBsZSBvZiB0aW1lcywgaW4gY2FzZSB0aGUgc2VlZCBpc24ndCB0aGF0IGdvb2QuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UmFuZG9tKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqIEdlbmVyYXRlIGEgcmFuZG9tIG51bWJlciBmcm9tIDAgPD0gbnVtYmVyIDwgMSAqL1xyXG4gICAgLy8gQW4gYXR0ZW1wdCB0byByZXByb2R1Y2Ugc29tZXRoaW5nIHJlc2VtYmxpbmcgdGhlIE1pZGRsZSBTcXVhcmUgV2V5bCBTZXF1ZW5jZSBQUk5HXHJcbiAgICAvLyBTZWUgV2lkeW5za2kgKDIwMTcpIGh0dHBzOi8vYXJ4aXYub3JnL2Ficy8xNzA0LjAwMzU4djVcclxuICAgIC8vIFRoZSBhYm92ZSBhbGdvcml0aG0gdXNlcyB1bnNpZ25lZCBpbnRzLiBKUyB1c2VzIHNpZ25lZCBmbG9hdHMuIEZ1cnRoZXIgdGVzdGluZyByZXF1aXJlZCB0byBzZWUgd2hldGhlciBvciBub3QgdGhpcyBpcyBhY3R1YWxseSBhIHByb2JsZW0uXHJcbiAgICBSYW5kb20ucHJvdG90eXBlLmdldFJhbmRvbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnggKj0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMueCArPSAodGhpcy53ZXlsICs9IHRoaXMuc2VlZCk7XHJcbiAgICAgICAgLy8gTm90ZSwgPj4+IG1ha2VzIHRoZSBzaGlmdCBiZSB1bnNpZ25lZC4gVGhlID4+PiAwIGF0IHRoZSBlbmQgZmxpcHMgdGhlIFwic2lnblwiIGJpdCB0byBiZSBwb3NpdGl2ZSwgZW5zdXJpbmcgYSBub24tbmVnYXRpdmUgcmVzdWx0LlxyXG4gICAgICAgIHRoaXMueCA9ICgodGhpcy54ID4+PiAzMikgfCAodGhpcy54IDw8IDMyKSkgPj4+IDA7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnggJSB0aGlzLmJhc2UpIC8gdGhpcy5iYXNlO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXQgYSByYW5kb20gbnVtYmVyIGluIGEgcmFuZ2UgKi9cclxuICAgIFJhbmRvbS5wcm90b3R5cGUuZ2V0TnVtYmVyID0gZnVuY3Rpb24gKG1pbiwgbWF4LCBpbnRlZ2VyKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbnRlZ2VyID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKG1pbikgJiYgTnVtYmVyLmlzSW50ZWdlcihtYXgpKSB7XHJcbiAgICAgICAgICAgICAgICBpbnRlZ2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW50ZWdlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLmdldFJhbmRvbSgpICogKG1heCArIDEgLSBtaW4pKSArIE1hdGguY2VpbChtaW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmdldFJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogR2V0IGEgcmFuZG9tIGVsZW1lbnQgZnJvbSBhbiBhcnJheSAqL1xyXG4gICAgUmFuZG9tLnByb3RvdHlwZS5nZXRSYW5kb21FbGVtZW50ID0gZnVuY3Rpb24gKGFycmF5KSB7XHJcbiAgICAgICAgdmFyIHJhbmRvbUluZGV4ID0gdGhpcy5nZXROdW1iZXIoMCwgYXJyYXkubGVuZ3RoIC0gMSwgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5W3JhbmRvbUluZGV4XTtcclxuICAgIH07XHJcbiAgICAvKiogR2V0IGEgcmFuZG9tIGVsZW1lbnQsIHdpdGggd2VpZ2h0cyAqL1xyXG4gICAgUmFuZG9tLnByb3RvdHlwZS5nZXRXZWlnaHRlZEVsZW1lbnQgPSBmdW5jdGlvbiAoYXJyYXkpIHtcclxuICAgICAgICB2YXIgdG90YWxXZWlnaHQgPSAwO1xyXG4gICAgICAgIHZhciBpbnRlZ2VyID0gdHJ1ZTtcclxuICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRvdGFsV2VpZ2h0ICs9IGVsZW1lbnQud2VpZ2h0O1xyXG4gICAgICAgICAgICBpbnRlZ2VyID0gaW50ZWdlciAmJiBOdW1iZXIuaXNJbnRlZ2VyKGVsZW1lbnQud2VpZ2h0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgcmFuZG9tTnVtYmVyID0gdGhpcy5nZXROdW1iZXIoKGludGVnZXIpID8gMSA6IDAsIHRvdGFsV2VpZ2h0LCBpbnRlZ2VyKTtcclxuICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSB1bnRpbCB3ZSBoYXZlIGEgd2lubmVyXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICByYW5kb21OdW1iZXIgLT0gYXJyYXlbaV0ud2VpZ2h0O1xyXG4gICAgICAgICAgICBpZiAocmFuZG9tTnVtYmVyIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIEZvdW5kIGl0IVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5W2ldLm9wdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOb3QgZm91bmQ7IHNlZW1zIGxpa2UgYSBwcm9ibGVtXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWF0Y2ggZm91bmQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSYW5kb207XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFJhbmRvbSB9O1xyXG5leHBvcnQgZGVmYXVsdCBSYW5kb207XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJhbmRvbS5qcy5tYXAiLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxudmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcbi8qKiBQYXRoZmluZGVyIHRvIGRldGVybWluZSBob3cgdG8gdHJhdmVsIGZyb20gb25lIHBvaW50IHRvIGFub3RoZXIgKi9cclxudmFyIFBhdGhGaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQYXRoRmluZGVyKHBhcmFtZXRlcnMpIHtcclxuICAgICAgICB2YXIgY2FuUGFzcyA9IHBhcmFtZXRlcnMuY2FuUGFzcywgbWV0cmljID0gcGFyYW1ldGVycy5tZXRyaWMsIG1heEl0ZXJhdGlvbnMgPSBwYXJhbWV0ZXJzLm1heEl0ZXJhdGlvbnMsIHdlaWdodCA9IHBhcmFtZXRlcnMud2VpZ2h0LCByZXN0ID0gX19yZXN0KHBhcmFtZXRlcnMsIFtcImNhblBhc3NcIiwgXCJtZXRyaWNcIiwgXCJtYXhJdGVyYXRpb25zXCIsIFwid2VpZ2h0XCJdKTtcclxuICAgICAgICB0aGlzLmNhblBhc3MgPSBjYW5QYXNzO1xyXG4gICAgICAgIGlmICghbWV0cmljKSB7XHJcbiAgICAgICAgICAgIC8vIERlZmF1bHQgbWV0cmljIGlzIE1hbmhhdHRhbiBtZXRyaWMsIGlmIG5vbmUgcHJvdmlkZWRcclxuICAgICAgICAgICAgbWV0cmljID0gZnVuY3Rpb24gKHBvc2l0aW9uMSwgcG9zaXRpb24yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMocG9zaXRpb24yWzFdIC0gcG9zaXRpb24xWzFdKSArIE1hdGguYWJzKHBvc2l0aW9uMlswXSAtIHBvc2l0aW9uMVswXSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghd2VpZ2h0KSB7XHJcbiAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gZXZlcnl0aGluZyBiZWluZyBsZW5ndGggb2YgMVxyXG4gICAgICAgICAgICB3ZWlnaHQgPSBmdW5jdGlvbiAocG9zaXRpb24pIHsgcmV0dXJuIDE7IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWF4SXRlcmF0aW9ucyA9IG1heEl0ZXJhdGlvbnM7XHJcbiAgICAgICAgdGhpcy5tZXRyaWMgPSBtZXRyaWM7XHJcbiAgICAgICAgdGhpcy53ZWlnaHQgPSB3ZWlnaHQ7XHJcbiAgICB9XHJcbiAgICAvKiogRmluZCByb3V0ZSBmcm9tIHN0YXJ0UG9zaXRpb24gdG8gZW5kUG9zaXRpb24sIHZpYSBBKiAqL1xyXG4gICAgUGF0aEZpbmRlci5wcm90b3R5cGUuZmluZFBhdGggPSBmdW5jdGlvbiAoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24sIG9ydGhvZ29uYWxPbmx5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAob3J0aG9nb25hbE9ubHkgPT09IHZvaWQgMCkgeyBvcnRob2dvbmFsT25seSA9IGZhbHNlOyB9XHJcbiAgICAgICAgdmFyIHJvdXRlID0gW107XHJcbiAgICAgICAgLy8gTGltaXQgdGhlIGxvb3Agc28gaXQgZG9lc24ndCBicmVhayB0aGluZ3NcclxuICAgICAgICB2YXIgbWF4SXRlcmF0aW9ucyA9ICh0aGlzLm1heEl0ZXJhdGlvbnMpID8gdGhpcy5tYXhJdGVyYXRpb25zIDogNDAgKiB0aGlzLm1ldHJpYyhzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbik7XHJcbiAgICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGxpc3QsIGFuZCBhZGQgdGhlIHN0YXJ0IHRvIGl0XHJcbiAgICAgICAgdmFyIGNsb3NlZExpc3QgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBfX3NwcmVhZEFycmF5cyhzdGFydFBvc2l0aW9uKSxcclxuICAgICAgICAgICAgICAgIHN0ZXBzOiAwLFxyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tR29hbDogdGhpcy5tZXRyaWMoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24pLFxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNMb2NhdGlvbjogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB2YXIgb3Blbkxpc3QgPSBbXTtcclxuICAgICAgICAvLyBIYW5kbGUgZGlhZ29uYWxzXHJcbiAgICAgICAgdmFyIHN0ZXBTaXplQXJyID0gWzAsIDEsIDEuMl07XHJcbiAgICAgICAgLy8gRmluZCBhIHBhdGhcclxuICAgICAgICB3aGlsZSAoaXRlcmF0aW9ucyA8IG1heEl0ZXJhdGlvbnMgJiZcclxuICAgICAgICAgICAgIXRoaXMuY29udGFpbnMoY2xvc2VkTGlzdCwgZW5kUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbnMrKztcclxuICAgICAgICAgICAgLy8gRXhwYW5kIHRoZSBvcGVuIGxpc3RcclxuICAgICAgICAgICAgY2xvc2VkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IC0xOyBpIDwgMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IC0xOyBqIDwgMjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcnRob2dvbmFsT25seSAmJiBpICE9PSAwICYmIGogIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvbiA9IFtsb2NhdGlvbi5wb3NpdGlvblswXSArIGksIGxvY2F0aW9uLnBvc2l0aW9uWzFdICsgal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERldGVybWluZSB0aGUgY29zdCAvIHNpemUgb2Ygc3RlcCBpbnRvIHRoZSBzcXVhcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ZXBTaXplID0gc3RlcFNpemVBcnJbTWF0aC5hYnMoaSkgKyBNYXRoLmFicyhqKV0gKiBfdGhpcy53ZWlnaHQobmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmNhblBhc3MobmV3UG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5DbG9zZWRMaXN0QWxyZWFkeSA9IF90aGlzLmdldExvY2F0aW9uKGNsb3NlZExpc3QsIG5ld1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluT3Blbkxpc3RBbHJlYWR5ID0gX3RoaXMuZ2V0TG9jYXRpb24ob3Blbkxpc3QsIG5ld1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV3IHBvc2l0aW9uIGlzIGluIG5laXRoZXIgbGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluQ2xvc2VkTGlzdEFscmVhZHkgJiYgIWluT3Blbkxpc3RBbHJlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuTGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3UG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcHM6IGxvY2F0aW9uLnN0ZXBzICsgc3RlcFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tR29hbDogX3RoaXMubWV0cmljKG5ld1Bvc2l0aW9uLCBlbmRQb3NpdGlvbiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNMb2NhdGlvbjogbG9jYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHBvc2l0aW9uIGlzIGFscmVhZHkgaW4gdGhlIGxpc3QsIGFkanVzdCB0byBiZSB3aGljaGV2ZXIgdmVyc2lvbiBpcyBzaG9ydGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5DbG9zZWRMaXN0QWxyZWFkeSAmJiBpbkNsb3NlZExpc3RBbHJlYWR5LnN0ZXBzID4gbG9jYXRpb24uc3RlcHMgKyBzdGVwU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluQ2xvc2VkTGlzdEFscmVhZHkuc3RlcHMgPSBsb2NhdGlvbi5zdGVwcyArIHN0ZXBTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluQ2xvc2VkTGlzdEFscmVhZHkucHJldmlvdXNMb2NhdGlvbiA9IGxvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluT3Blbkxpc3RBbHJlYWR5ICYmIGluT3Blbkxpc3RBbHJlYWR5LnN0ZXBzID4gbG9jYXRpb24uc3RlcHMgKyBzdGVwU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluT3Blbkxpc3RBbHJlYWR5LnN0ZXBzID0gbG9jYXRpb24uc3RlcHMgKyBzdGVwU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbk9wZW5MaXN0QWxyZWFkeS5wcmV2aW91c0xvY2F0aW9uID0gbG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBTb3J0IHRoZSBvcGVuIGxpc3QgKGhpZ2hlc3QgLS0+IGxvd2VzdClcclxuICAgICAgICAgICAgb3Blbkxpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gKGIuc3RlcHMgKyBiLmRpc3RhbmNlRnJvbUdvYWwpIC0gKGEuc3RlcHMgKyBhLmRpc3RhbmNlRnJvbUdvYWwpOyB9KTtcclxuICAgICAgICAgICAgLy8gUG9wIG9mZiB0aGUgbG93ZXN0IG9wZW5MaXN0IGl0ZW0gYW5kIGFkZCBpdCB0byB0aGUgY2xvc2VkIGxpc3RcclxuICAgICAgICAgICAgY2xvc2VkTGlzdC5wdXNoKG9wZW5MaXN0LnBvcCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRm91bmQgYSByb3V0ZSEgUHV0IHRoZSBwaWVjZXMgdG9nZXRoZXIgYnkgd29ya2luZyBiYWNrd2FyZHNcclxuICAgICAgICB2YXIgbG9jYXRpb24gPSB0aGlzLmdldExvY2F0aW9uKGNsb3NlZExpc3QsIGVuZFBvc2l0aW9uKTtcclxuICAgICAgICBpZiAodGhpcy5jb250YWlucyhjbG9zZWRMaXN0LCBlbmRQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgaXRlcmF0aW9ucyA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlICgobG9jYXRpb24ucG9zaXRpb25bMF0gIT09IHN0YXJ0UG9zaXRpb25bMF0gfHwgbG9jYXRpb24ucG9zaXRpb25bMV0gIT09IHN0YXJ0UG9zaXRpb25bMV0pICYmIGl0ZXJhdGlvbnMgPCBtYXhJdGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVyYXRpb25zKys7XHJcbiAgICAgICAgICAgICAgICByb3V0ZS5wdXNoKGxvY2F0aW9uLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gbG9jYXRpb24ucHJldmlvdXNMb2NhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcm91dGUucmV2ZXJzZSgpO1xyXG4gICAgfTtcclxuICAgIFBhdGhGaW5kZXIucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAocG9zaXRpb24xLCBwb3NpdGlvbjIpIHtcclxuICAgICAgICByZXR1cm4gKHBvc2l0aW9uMS5wb3NpdGlvblswXSA9PT0gcG9zaXRpb24yLnBvc2l0aW9uWzBdICYmIHBvc2l0aW9uMS5wb3NpdGlvblsxXSA9PT0gcG9zaXRpb24yLnBvc2l0aW9uWzFdKTtcclxuICAgIH07XHJcbiAgICBQYXRoRmluZGVyLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChsb2NhdGlvbkxpc3QsIHRlc3RMb2NhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGVzdExvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb25MaXN0LnNvbWUoZnVuY3Rpb24gKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGxvY2F0aW9uLnBvc2l0aW9uWzBdID09PSB0ZXN0TG9jYXRpb25bMF0gJiYgbG9jYXRpb24ucG9zaXRpb25bMV0gPT09IHRlc3RMb2NhdGlvblsxXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uTGlzdC5zb21lKGZ1bmN0aW9uIChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlzRXF1YWwobG9jYXRpb24sIHRlc3RMb2NhdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQYXRoRmluZGVyLnByb3RvdHlwZS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbkxpc3QsIHRlc3RQb3NpdGlvbikge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbG9jYXRpb25MaXN0XzEgPSBsb2NhdGlvbkxpc3Q7IF9pIDwgbG9jYXRpb25MaXN0XzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbl8xID0gbG9jYXRpb25MaXN0XzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb25fMS5wb3NpdGlvblswXSA9PT0gdGVzdFBvc2l0aW9uWzBdICYmIGxvY2F0aW9uXzEucG9zaXRpb25bMV0gPT09IHRlc3RQb3NpdGlvblsxXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uXzE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGF0aEZpbmRlcjtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgUGF0aEZpbmRlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGF0aEZpbmRlci5qcy5tYXAiLCIvKiogRmllbGQgb2YgdmlldyAqL1xyXG52YXIgRk9WID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqIEFjY2VwdHMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgYSBsb2NhdGlvbiBpcyBzZWV0aHJvdWdoICovXHJcbiAgICBmdW5jdGlvbiBGT1YoY2FuU2VlLCByYW5nZSkge1xyXG4gICAgICAgIHRoaXMuY2FuU2VlID0gY2FuU2VlO1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSByYW5nZSA/IHJhbmdlIDogODtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKiBEbyB0aGUgRk9WIGNhbGN1bGF0aW9uICovXHJcbiAgICBGT1YucHJvdG90eXBlLmxvb2sgPSBmdW5jdGlvbiAocG9zaXRpb24sIGxvb2tSYW5nZU92ZXJyaWRlKSB7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gKGxvb2tSYW5nZU92ZXJyaWRlKSA/IGxvb2tSYW5nZU92ZXJyaWRlIDogdGhpcy5yYW5nZTtcclxuICAgICAgICAvLyBTZWUgdGhlIHN0YXJ0aW5nIGxvY2F0aW9uIChob29yYXkhIEdyZWF0IHN0YXJ0KVxyXG4gICAgICAgIHRoaXMuY2FuU2VlKHBvc2l0aW9uKTtcclxuICAgICAgICAvLyBjb25zdCBsb29rVGlsZXM6QXJyYXk8VGlsZT4gPSBbXTtcclxuICAgICAgICB2YXIgc2hhZG93cyA9IFtdO1xyXG4gICAgICAgIHZhciBuZXdTaGFkb3dzID0gW107XHJcbiAgICAgICAgLy8gRnJvbSBuZWFyYnkgdG8gZmFyIGF3YXlcclxuICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgdmFyIGogPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGRpc3RhbmNlID0gMTsgZGlzdGFuY2UgPD0gcmFuZ2U7IGRpc3RhbmNlKyspIHtcclxuICAgICAgICAgICAgLy8gR2V0IHNxdWFyZSBzaGVsbCBhcm91bmQgcG9zaXRpb25cclxuICAgICAgICAgICAgZm9yICh2YXIgc2lkZSA9IDA7IHNpZGUgPCA0OyBzaWRlKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGVkZ2UgPSAtZGlzdGFuY2U7IGVkZ2UgPD0gZGlzdGFuY2U7IGVkZ2UrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlZGdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNpZGUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGVkZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2lkZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gZWRnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IC1kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSBlZGdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gLWRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9va1BvcyA9IFtwb3NpdGlvblswXSArIGksIHBvc2l0aW9uWzFdICsgal07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3QgPSB0aGlzLmRpc3RhbmNlKHBvc2l0aW9uLCBsb29rUG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBPdXQgb2YgcmFuZ2U/IFNraXAuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPiByYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gc2hhZG93cz8gU2tpcC5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGVUbyA9IHRoaXMuYW5nbGVUbyhwb3NpdGlvbiwgbG9va1Bvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuZ3VsYXJTaXplID0gdGhpcy5hbmd1bGFyU2l6ZShwb3NpdGlvbiwgbG9va1BvcykgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpblNoYWRvd3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0luU2hhZG93cyhhbmdsZVRvLCBzaGFkb3dzKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzSW5TaGFkb3dzKGFuZ2xlVG8gKyBhbmd1bGFyU2l6ZSwgc2hhZG93cykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0luU2hhZG93cyhhbmdsZVRvIC0gYW5ndWxhclNpemUsIHNoYWRvd3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluU2hhZG93cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdywgdGVzdCBpZiB3ZSBjYW4gc2VlIHRocm91Z2ggdGhlIHRpbGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5TaGFkb3dzIHx8ICF0aGlzLmNhblNlZShsb29rUG9zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTcXVhcmUgaXMgb3BhcXVlISBBZGQgaXRzIHNoYWRvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTaGFkb3dzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBbmdsZTogYW5nbGVUbyAtIGFuZ3VsYXJTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQW5nbGU6IGFuZ2xlVG8gKyBhbmd1bGFyU2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIG5ld1NoYWRvd3MgdG8gc2hhZG93c1xyXG4gICAgICAgICAgICB3aGlsZSAobmV3U2hhZG93cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaGFkb3dzLnB1c2gobmV3U2hhZG93cy5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbWJpbmVTaGFkb3coc2hhZG93cywgbmV3U2hhZG93cy5wb3AoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2Ugc2hvdWxkIGNhbGwgaXQgcXVpdHNcclxuICAgICAgICAgICAgaWYgKHNoYWRvd3MubGVuZ3RoID09PSAxICYmIHNoYWRvd3NbMF0uZW5kQW5nbGUgLSBzaGFkb3dzWzBdLnN0YXJ0QW5nbGUgPj0gMzYwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIEdldCBhbmdsZSBhIHRpbGUgcmVzaWRlcyBpblxyXG4gICAgICogVGhpcyByYW5nZXMgZnJvbSAtMTgwIHRvIDE4MCwgc28gYmUgY2FyZWZ1bFxyXG4gICAgKi9cclxuICAgIEZPVi5wcm90b3R5cGUuYW5nbGVUbyA9IGZ1bmN0aW9uIChzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbikge1xyXG4gICAgICAgIHZhciB5ID0gZW5kUG9zaXRpb25bMV0gLSBzdGFydFBvc2l0aW9uWzFdO1xyXG4gICAgICAgIHZhciB4ID0gZW5kUG9zaXRpb25bMF0gLSBzdGFydFBvc2l0aW9uWzBdO1xyXG4gICAgICAgIHZhciBhbmdsZSA9IDE4MCAqIE1hdGguYXRhbjIoeSwgeCkgLyBNYXRoLlBJO1xyXG4gICAgICAgIHJldHVybiAoYW5nbGUgPj0gMCkgPyBhbmdsZSA6IGFuZ2xlICsgMzYwO1xyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHZXQgYW5ndWxhciBzaXplIG9mIGEgc3F1YXJlICovXHJcbiAgICBGT1YucHJvdG90eXBlLmFuZ3VsYXJTaXplID0gZnVuY3Rpb24gKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIDM2MCAqIE1hdGguYXRhbigxIC8gKDIgKiBkaXN0YW5jZSkpIC8gTWF0aC5QSTtcclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogR2V0IGRpc3RhbmNlICovXHJcbiAgICBGT1YucHJvdG90eXBlLmRpc3RhbmNlID0gZnVuY3Rpb24gKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdygoZW5kUG9zaXRpb25bMV0gLSBzdGFydFBvc2l0aW9uWzFdKSwgMikgKyBNYXRoLnBvdygoZW5kUG9zaXRpb25bMF0gLSBzdGFydFBvc2l0aW9uWzBdKSwgMikpO1xyXG4gICAgfTtcclxuICAgIC8qKiBDaGVjayBpZiBpbiBzaGFkb3dzICovXHJcbiAgICBGT1YucHJvdG90eXBlLmlzSW5TaGFkb3dzID0gZnVuY3Rpb24gKGFuZ2xlLCBzaGFkb3dzKSB7XHJcbiAgICAgICAgdmFyIG5lZ0FuZ2xlID0gYW5nbGUgLSAzNjA7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzaGFkb3dzXzEgPSBzaGFkb3dzOyBfaSA8IHNoYWRvd3NfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHNoYWRvdyA9IHNoYWRvd3NfMVtfaV07XHJcbiAgICAgICAgICAgIGlmICgoYW5nbGUgPD0gc2hhZG93LmVuZEFuZ2xlICYmIGFuZ2xlID49IHNoYWRvdy5zdGFydEFuZ2xlKSB8fCAobmVnQW5nbGUgPD0gc2hhZG93LmVuZEFuZ2xlICYmIG5lZ0FuZ2xlID49IHNoYWRvdy5zdGFydEFuZ2xlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKiBBZGQgYSBzaGFkb3cgdG8gdGhlIHNoYWRvdyBhcnJheSAqL1xyXG4gICAgRk9WLnByb3RvdHlwZS5jb21iaW5lU2hhZG93ID0gZnVuY3Rpb24gKHNoYWRvd3MsIG5ld1NoYWRvdykge1xyXG4gICAgICAgIHZhciBvdmVyTGFwQXJyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaGFkb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzaGFkb3cgPSBzaGFkb3dzW2ldO1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGV5IG92ZXJsYXBcclxuICAgICAgICAgICAgaWYgKG5ld1NoYWRvdy5zdGFydEFuZ2xlIDwgc2hhZG93LmVuZEFuZ2xlICYmIG5ld1NoYWRvdy5lbmRBbmdsZSA+IHNoYWRvdy5zdGFydEFuZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTaGFkb3cuc3RhcnRBbmdsZSA9IE1hdGgubWluKHNoYWRvdy5zdGFydEFuZ2xlLCBuZXdTaGFkb3cuc3RhcnRBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBuZXdTaGFkb3cuZW5kQW5nbGUgPSBNYXRoLm1heChzaGFkb3cuZW5kQW5nbGUsIG5ld1NoYWRvdy5lbmRBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBvdmVyTGFwQXJyLnB1c2goaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG92ZXJMYXBBcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgbWFpblNoYWRvdyA9IHNoYWRvd3Nbb3ZlckxhcEFyci5zaGlmdCgpXTtcclxuICAgICAgICAgICAgbWFpblNoYWRvdy5zdGFydEFuZ2xlID0gbmV3U2hhZG93LnN0YXJ0QW5nbGU7XHJcbiAgICAgICAgICAgIG1haW5TaGFkb3cuZW5kQW5nbGUgPSBuZXdTaGFkb3cuZW5kQW5nbGU7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBvdmVyTGFwQXJyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBzaGFkb3dzLnNwbGljZShvdmVyTGFwQXJyW2ldLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2hhZG93cy5wdXNoKG5ld1NoYWRvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBGT1Y7XHJcbn0oKSk7XHJcbmV4cG9ydCBkZWZhdWx0IEZPVjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Rk9WLmpzLm1hcCIsInZhciBfX3NwcmVhZEFycmF5cyA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheXMpIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG4vKipcclxuICogQSB0aWxlLCBhcyBkZWZpbmVkIGZvciBXYXZlIEZ1bmN0aW9uIENvbGxhcHNlIHB1cnBvc2VzXHJcbiAqL1xyXG52YXIgV2ZjVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdmY1RpbGUoaW5wdXQpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRzID0gaW5wdXQubWFwKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIF9fc3ByZWFkQXJyYXlzKHJvdyk7IH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIENoZWNrIGlmIHR3byBXZmNUaWxlJ3MgYXJlIGVxdWFsLCB0byByZW1vdmUgZHVwbGljYXRlcy4gKi9cclxuICAgIFdmY1RpbGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh0aWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGF0aWJsZSh0aWxlLCAwLCAwKTtcclxuICAgIH07XHJcbiAgICAvKiogQ2hlY2sgaWYgdHdvIFdmY1RpbGUncyBhcmUgY29tcGF0aWJsZSAoaS5lLiBjYW4gYmUgbmVpZ2hib3VycykgKi9cclxuICAgIFdmY1RpbGUucHJvdG90eXBlLmNvbXBhdGlibGUgPSBmdW5jdGlvbiAodGlsZSwgeCwgeSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRzLmV2ZXJ5KGZ1bmN0aW9uIChyb3csIGopIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJvdy5ldmVyeShmdW5jdGlvbiAodmFsLCBpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeFBvcyA9IGkgKyB4O1xyXG4gICAgICAgICAgICAgICAgdmFyIHlQb3MgPSBqICsgeTtcclxuICAgICAgICAgICAgICAgIGlmICh4UG9zID49IDAgJiYgeVBvcyA+PSAwICYmIHlQb3MgPCB0aWxlLmNvbnRlbnRzLmxlbmd0aCAmJiB4UG9zIDwgdGlsZS5jb250ZW50c1t5UG9zXS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsID09PSB0aWxlLmNvbnRlbnRzW3lQb3NdW3hQb3NdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBDaGVjayBpZiB0aGlzIHRpbGUgd29yayB3aXRoIGEgZ2l2ZW4gY29uc3RyYWludCAqL1xyXG4gICAgV2ZjVGlsZS5wcm90b3R5cGUuY29uc3RyYWluID0gZnVuY3Rpb24gKGNvbnN0cmFpbnQsIHgsIHkpIHtcclxuICAgICAgICBpZiAoeSA+PSAwICYmIHkgPCB0aGlzLmNvbnRlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAoeCA+PSAwICYmIHggPCB0aGlzLmNvbnRlbnRzW3ldLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudHNbeV1beF0gPT09IGNvbnN0cmFpbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdmY1RpbGU7XHJcbn0oKSk7XHJcbmV4cG9ydCBkZWZhdWx0IFdmY1RpbGU7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVdmY1RpbGUuanMubWFwIiwidmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn07XHJcbmltcG9ydCBXZmNUaWxlIGZyb20gJy4vV2ZjVGlsZS5qcyc7XHJcbmltcG9ydCBSYW5kb20gZnJvbSAnLi4vcmFuZG9tL1JhbmRvbS5qcyc7XHJcbi8qKlxyXG4gKiBDbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFdhdmUgRnVuY3Rpb24gQ29sbGFwc2UgYWxnb3JpdGhtLlxyXG4gKi9cclxudmFyIFdGQyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdGQyhwYXJhbXMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gcGFyYW1zLmlucHV0LCBfYiA9IHBhcmFtcy5uLCBuID0gX2IgPT09IHZvaWQgMCA/IDEgOiBfYiwgX2MgPSBwYXJhbXMubSwgbSA9IF9jID09PSB2b2lkIDAgPyBuIDogX2MsIF9kID0gcGFyYW1zLnJlcGVhdElucHV0LCByZXBlYXRJbnB1dCA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kLCByYW5kb20gPSBwYXJhbXMucmFuZG9tLCByZXN0ID0gX19yZXN0KHBhcmFtcywgW1wiaW5wdXRcIiwgXCJuXCIsIFwibVwiLCBcInJlcGVhdElucHV0XCIsIFwicmFuZG9tXCJdKTtcclxuICAgICAgICAvLyBDb252ZXJ0IGludG8gYSAyZCBhcnJheVxyXG4gICAgICAgIHZhciBpbnB1dEltYWdlID0gaW5wdXQubWFwKGZ1bmN0aW9uIChyb3cpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiByb3cgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb3cuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUHJvY2VzcyB0aGUgaW5wdXQgaW1hZ2UgYW5kIHN0b3JlIHRoYXQgZGF0YVxyXG4gICAgICAgIF9hID0gdGhpcy5wcm9jZXNzSW5wdXQoaW5wdXRJbWFnZSwgcmVwZWF0SW5wdXQsIG4sIG0pLCB0aGlzLnJ1bGVzID0gX2FbMF0sIHRoaXMuZnJlcXVlbmNpZXMgPSBfYVsxXTtcclxuICAgICAgICB0aGlzLm4gPSBuO1xyXG4gICAgICAgIHRoaXMubSA9IG07XHJcbiAgICAgICAgaWYgKCFyYW5kb20pIHtcclxuICAgICAgICAgICAgdGhpcy5yYW5kb20gPSBuZXcgUmFuZG9tKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJhbmRvbSA9IHJhbmRvbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCB0aGF0IHByb2Nlc3NlcyB0aGUgaW1hZ2UgdG8gZ2VuZXJhdGUgYWRqYWNlbmN5IHJ1bGVzIGFuZCB0aWxlIGZyZXF1ZW5jaWVzLlxyXG4gICAgICovXHJcbiAgICBXRkMucHJvdG90eXBlLnByb2Nlc3NJbnB1dCA9IGZ1bmN0aW9uIChpbnB1dCwgcmVwZWF0SW5wdXQsIG4sIG0pIHtcclxuICAgICAgICAvLyBHZXQgZGltZW5zaW9uc1xyXG4gICAgICAgIC8vIEhlaWdodCBpcyBqdXN0IHRoZSBsZW5ndGggb2YgdGhlIGFycmF5XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICB2YXIgaGVpZ2h0VGlsZXMgPSBoZWlnaHQgLSAoKCFyZXBlYXRJbnB1dCkgPyAobSAtIDEpIDogMCk7XHJcbiAgICAgICAgLy8gV2lkdGggaXMgdGhlIG1pbmltdW0gbGVuZ3RoIG9mIGEgc3ViYXJyYXk7IGZvcmNlIGl0IHRvIGJlIHNxdWFyZS5cclxuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLm1pbi5hcHBseShNYXRoLCBpbnB1dC5tYXAoZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93Lmxlbmd0aDsgfSkpO1xyXG4gICAgICAgIHZhciB3aWR0aFRpbGVzID0gd2lkdGggLSAoKCFyZXBlYXRJbnB1dCkgPyAobiAtIDEpIDogMCk7XHJcbiAgICAgICAgLy8gR2V0IGFsbCB0aWxlcyBpbiB0aGUgaW5wdXRcclxuICAgICAgICB2YXIgcmF3VGlsZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRoVGlsZXM7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhlaWdodFRpbGVzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aWxlSW5wdXQgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbTsgeSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5UG9zID0gKGogKyB5KSAlIGhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG47IHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeFBvcyA9ICh4ICsgaSkgJSB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LnB1c2goaW5wdXRbeVBvc11beFBvc10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aWxlSW5wdXQucHVzaChyb3cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1RpbGUgPSBuZXcgV2ZjVGlsZSh0aWxlSW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgcmF3VGlsZXMucHVzaChuZXdUaWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGaWx0ZXIgZG93biwgdG8gZ2V0IHJpZCBvZiByZXBlYXRzXHJcbiAgICAgICAgdmFyIHRpbGVzID0gW107XHJcbiAgICAgICAgdmFyIGZyZXF1ZW5jaWVzID0gW107XHJcbiAgICAgICAgcmF3VGlsZXMuZm9yRWFjaChmdW5jdGlvbiAodGlsZSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aWxlcy5maW5kSW5kZXgoZnVuY3Rpb24gKG90aGVyVGlsZSkgeyByZXR1cm4gb3RoZXJUaWxlLmVxdWFscyh0aWxlKTsgfSk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmcmVxdWVuY2llc1tpbmRleF0ud2VpZ2h0Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlcy5wdXNoKHRpbGUpO1xyXG4gICAgICAgICAgICAgICAgZnJlcXVlbmNpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiB0aWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodDogMSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gTmV4dCwgd2UgbmVlZCBhZGphY2VuY3kgcnVsZXNcclxuICAgICAgICB2YXIgcnVsZXMgPSB0aWxlcy5tYXAoZnVuY3Rpb24gKHRpbGUpIHtcclxuICAgICAgICAgICAgLy8gQmVnaW4gYSBuZXcgcnVsZSFcclxuICAgICAgICAgICAgdmFyIHJ1bGUgPSB7XHJcbiAgICAgICAgICAgICAgICB1cDogW10sXHJcbiAgICAgICAgICAgICAgICBkb3duOiBbXSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IFtdLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IFtdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGlsZSBpcyBjb21wYXRpYmxlIHdpdGggZXZlcnkgb3RoZXIgdGlsZSwgaW4gdGhlIDQgZGlyZWN0aW9uc1xyXG4gICAgICAgICAgICB0aWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChvdGhlclRpbGUsIGkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aWxlLmNvbXBhdGlibGUob3RoZXJUaWxlLCAtMSwgMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBydWxlLnJpZ2h0LnB1c2goaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGlsZS5jb21wYXRpYmxlKG90aGVyVGlsZSwgMSwgMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBydWxlLmxlZnQucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aWxlLmNvbXBhdGlibGUob3RoZXJUaWxlLCAwLCAtMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBydWxlLmRvd24ucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aWxlLmNvbXBhdGlibGUob3RoZXJUaWxlLCAwLCAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUudXAucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIERvbmUsIHJldHVybiB0aGUgZmluaXNoZWQgcnVsZVxyXG4gICAgICAgICAgICByZXR1cm4gcnVsZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gW3J1bGVzLCBmcmVxdWVuY2llc107XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBhbiBvdXRwdXQgaW1hZ2UuXHJcbiAgICAgKi9cclxuICAgIFdGQy5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAocGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5nZW5lcmF0ZVN5bmMocGFyYW1zLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgYW4gb3V0cHV0IGltYWdlLlxyXG4gICAgICovXHJcbiAgICBXRkMucHJvdG90eXBlLmdlbmVyYXRlU3luYyA9IGZ1bmN0aW9uIChwYXJhbXMsIHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gcGFyYW1zLndpZHRoLCBoZWlnaHQgPSBwYXJhbXMuaGVpZ2h0LCByZXBlYXRPdXRwdXQgPSBwYXJhbXMucmVwZWF0T3V0cHV0LCByZXN0ID0gX19yZXN0KHBhcmFtcywgW1wid2lkdGhcIiwgXCJoZWlnaHRcIiwgXCJyZXBlYXRPdXRwdXRcIl0pO1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgd2l0aCBhbGwgdGlsZXMgYmVpbmcgcG9zc2libGVcclxuICAgICAgICB2YXIgd2F2ZUZ1bmN0aW9uID0gW107XHJcbiAgICAgICAgdmFyIGVudHJvcHlMaXN0ID0gW107XHJcbiAgICAgICAgdmFyIGRvbmVMaXN0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBoZWlnaHQ7IGorKykge1xyXG4gICAgICAgICAgICB2YXIgcm93ID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2lkdGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbnVtID0gMDsgbnVtIDwgdGhpcy5mcmVxdWVuY2llcy5sZW5ndGg7IG51bSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY291bnQgPSAwOyBjb3VudCA8IHRoaXMuZnJlcXVlbmNpZXNbbnVtXS53ZWlnaHQ7IGNvdW50KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLnB1c2gobnVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBTYW1lIGRhdGEgaXMgaW4gYm90aDsgb25lIGlzIGp1c3QgZm9yIHBvc2l0aW9ucywgb25lIGlzIGZvciBzb3J0aW5nXHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBjb2x1bW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFtpLCBqXSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaChvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGVudHJvcHlMaXN0LnB1c2gob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2F2ZUZ1bmN0aW9uLnB1c2gocm93KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETzogQWRkIHN0ZXAgZm9yIGFwcGx5aW5nIGNvbnN0cmFpbnRzIHRvIHRoZSBpbWFnZVxyXG4gICAgICAgIC8vIEJlZ2luIHRoZSBtYWluIGxvb3AhXHJcbiAgICAgICAgLy8gSSB3YW50IHRvIG1ha2UgdGhpcyBub24tYmxvY2tpbmcsIHNvIGdvaW5nIHRvIGRvIHNvbWUgd2VpcmQgc2hpdCB3aXRoIHNldFRpbWVvdXQuXHJcbiAgICAgICAgdmFyIGxvb3BTdGVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoZW50cm9weUxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU29ydCB0aGUgZW50cm9weUxpc3QsIHRvIHB1dCB0aGUgb3B0aW9uIHdpdGggZmV3ZXN0IHBvc3NpYmlsaXRpZXMgZmlyc3RcclxuICAgICAgICAgICAgICAgIGVudHJvcHlMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5vcHRpb25zLmxlbmd0aCAtIGIub3B0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZmlyc3Qgc2V0IG9mIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gZW50cm9weUxpc3Quc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBpdCdzIGxlbmd0aCBpcyBub3QgMC4gSWYgaXQgaXMsIHdlIGZ1Y2tlZCB1cC5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9wdGlvbnMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBPdGhlciBvcHRpb25zIGZvciBmYWlsdXJlIChtYXliZSBhIGRlZmF1bHQgdGlsZT8gVWdseSBidXQgbm90IHRlcnJpYmxlIGZvciBhIHJvZ3VlbGlrZSlcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiV0ZDIGNvbnRyYWRpY3Rpb24gZW5jb3VudGVyZWQuXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENob29zZSBhbiBvcHRpb247XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hvaWNlID0gW190aGlzLnJhbmRvbS5nZXRSYW5kb21FbGVtZW50KG9wdGlvbnMub3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vcHRpb25zID0gY2hvaWNlO1xyXG4gICAgICAgICAgICAgICAgZG9uZUxpc3QucHVzaChvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIC8vIFByb3BhZ2F0ZSB0aGF0IGNob2ljZSB0byB0aGUgb3RoZXIgdGlsZXNcclxuICAgICAgICAgICAgICAgIF90aGlzLmFwcGx5QWRqYWNlbmN5KHdhdmVGdW5jdGlvbiwgb3B0aW9ucy5wb3NpdGlvbiwgcmVwZWF0T3V0cHV0KTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobG9vcFN0ZXAsIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5wb3N0UHJvY2Vzcyh3YXZlRnVuY3Rpb24pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9vcFN0ZXAoKTtcclxuICAgIH07XHJcbiAgICAvKiogQ29udmVydCB0aGUgYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBkZXNpcmVkIG91dHB1dCAqL1xyXG4gICAgV0ZDLnByb3RvdHlwZS5wb3N0UHJvY2VzcyA9IGZ1bmN0aW9uICh3YXZlRnVuY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSB3YXZlRnVuY3Rpb24ubGVuZ3RoICsgKHRoaXMubSAtIDEpO1xyXG4gICAgICAgIHZhciB3aWR0aCA9IHdhdmVGdW5jdGlvbi5sZW5ndGggKyAodGhpcy5uIC0gMSk7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVpZ2h0OyBqKyspIHtcclxuICAgICAgICAgICAgdmFyIHJvdyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKHJvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdhdmVGdW5jdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIGopIHtcclxuICAgICAgICAgICAgcm93LmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbiwgaSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5vcHRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGlsZSA9IF90aGlzLmZyZXF1ZW5jaWVzW29wdGlvbi5vcHRpb25zWzBdXS5vcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBfdGhpcy5uOyB4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBfdGhpcy5tOyB5KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtqICsgeV1baSArIHhdID0gdGlsZS5jb250ZW50c1t5XVt4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH07XHJcbiAgICAvKiogQXBwbHkgYWRqYWNlbmN5IHJ1bGVzICovXHJcbiAgICBXRkMucHJvdG90eXBlLmFwcGx5QWRqYWNlbmN5ID0gZnVuY3Rpb24gKHdhdmVGdW5jdGlvbiwgX2EsIHJlcGVhdE91dHB1dCwgYmFja1RyYWNrKSB7XHJcbiAgICAgICAgdmFyIHggPSBfYVswXSwgeSA9IF9hWzFdO1xyXG4gICAgICAgIGlmIChiYWNrVHJhY2sgPT09IHZvaWQgMCkgeyBiYWNrVHJhY2sgPSBmYWxzZTsgfVxyXG4gICAgICAgIHZhciB0b0RvVGlsZXMgPSBbd2F2ZUZ1bmN0aW9uW3ldW3hdXTtcclxuICAgICAgICB2YXIgZG9uZVRpbGVzID0gW107XHJcbiAgICAgICAgd2hpbGUgKHRvRG9UaWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBkb1RpbGUgPSB0b0RvVGlsZXMucG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcG9nYXRlKHdhdmVGdW5jdGlvbiwgZG9UaWxlLnBvc2l0aW9uLCByZXBlYXRPdXRwdXQsIGRvbmVUaWxlcykuZm9yRWFjaChmdW5jdGlvbiAobmV3VGlsZSkge1xyXG4gICAgICAgICAgICAgICAgdG9Eb1RpbGVzLnB1c2gobmV3VGlsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIWJhY2tUcmFjaykge1xyXG4gICAgICAgICAgICAgICAgZG9uZVRpbGVzLnB1c2goZG9UaWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogSW5kaXZpZHVhbCBwcm9wb2dhdGlvbiBzdGVwICovXHJcbiAgICBXRkMucHJvdG90eXBlLnByb3BvZ2F0ZSA9IGZ1bmN0aW9uICh3YXZlRnVuY3Rpb24sIF9hLCByZXBlYXRPdXRwdXQsIGlnbm9yZUxpc3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB4ID0gX2FbMF0sIHkgPSBfYVsxXTtcclxuICAgICAgICBpZiAoaWdub3JlTGlzdCA9PT0gdm9pZCAwKSB7IGlnbm9yZUxpc3QgPSBbXTsgfVxyXG4gICAgICAgIHZhciBvcHRpb25zID0gd2F2ZUZ1bmN0aW9uW3ldW3hdO1xyXG4gICAgICAgIHZhciBhZ2dyZWdhdGVSdWxlcyA9IHtcclxuICAgICAgICAgICAgdXA6IFtdLFxyXG4gICAgICAgICAgICBkb3duOiBbXSxcclxuICAgICAgICAgICAgbGVmdDogW10sXHJcbiAgICAgICAgICAgIHJpZ2h0OiBbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEdldCBhbGwgYXZhaWxhYmxlIHBvc3NpYmlsaXRpZXNcclxuICAgICAgICBvcHRpb25zLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBydWxlID0gX3RoaXMucnVsZXNbb3B0aW9uXTtcclxuICAgICAgICAgICAgcnVsZS51cC5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiBhZ2dyZWdhdGVSdWxlcy51cC5wdXNoKHgpOyB9KTtcclxuICAgICAgICAgICAgcnVsZS5kb3duLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGFnZ3JlZ2F0ZVJ1bGVzLmRvd24ucHVzaCh4KTsgfSk7XHJcbiAgICAgICAgICAgIHJ1bGUubGVmdC5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiBhZ2dyZWdhdGVSdWxlcy5sZWZ0LnB1c2goeCk7IH0pO1xyXG4gICAgICAgICAgICBydWxlLnJpZ2h0LmZvckVhY2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGFnZ3JlZ2F0ZVJ1bGVzLnJpZ2h0LnB1c2goeCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXHJcbiAgICAgICAgYWdncmVnYXRlUnVsZXMudXAgPSBhZ2dyZWdhdGVSdWxlcy51cC5maWx0ZXIoZnVuY3Rpb24gKHgsIGksIGFycikgeyByZXR1cm4gYXJyLmluZGV4T2YoeCkgPT09IGk7IH0pO1xyXG4gICAgICAgIGFnZ3JlZ2F0ZVJ1bGVzLmRvd24gPSBhZ2dyZWdhdGVSdWxlcy5kb3duLmZpbHRlcihmdW5jdGlvbiAoeCwgaSwgYXJyKSB7IHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gaTsgfSk7XHJcbiAgICAgICAgYWdncmVnYXRlUnVsZXMubGVmdCA9IGFnZ3JlZ2F0ZVJ1bGVzLmxlZnQuZmlsdGVyKGZ1bmN0aW9uICh4LCBpLCBhcnIpIHsgcmV0dXJuIGFyci5pbmRleE9mKHgpID09PSBpOyB9KTtcclxuICAgICAgICBhZ2dyZWdhdGVSdWxlcy5yaWdodCA9IGFnZ3JlZ2F0ZVJ1bGVzLnJpZ2h0LmZpbHRlcihmdW5jdGlvbiAoeCwgaSwgYXJyKSB7IHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gaTsgfSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW4gbGlzdCBvZiBuZXh0IHRpbGVzIHRvIGdvIHRvXHJcbiAgICAgICAgdmFyIG5leHRUaWxlcyA9IFtdO1xyXG4gICAgICAgIC8vIEFwcGx5IGZvciBlYWNoIGRpcmVjdGlvblxyXG4gICAgICAgIHZhciBzdGVwcyA9IFtcInVwXCIsIFwiZG93blwiLCBcImxlZnRcIiwgXCJyaWdodFwiXTtcclxuICAgICAgICB2YXIgc3RlcERpcmVjdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHVwOiBbMCwgLTFdLFxyXG4gICAgICAgICAgICBkb3duOiBbMCwgMV0sXHJcbiAgICAgICAgICAgIGxlZnQ6IFstMSwgMF0sXHJcbiAgICAgICAgICAgIHJpZ2h0OiBbMSwgMF0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzdGVwcy5mb3JFYWNoKGZ1bmN0aW9uIChzdGVwKSB7XHJcbiAgICAgICAgICAgIHZhciB4eCA9IHggKyBzdGVwRGlyZWN0aW9uc1tzdGVwXVswXTtcclxuICAgICAgICAgICAgdmFyIHl5ID0geSArIHN0ZXBEaXJlY3Rpb25zW3N0ZXBdWzFdO1xyXG4gICAgICAgICAgICBpZiAocmVwZWF0T3V0cHV0KSB7XHJcbiAgICAgICAgICAgICAgICB4eCArPSB3YXZlRnVuY3Rpb25bMF0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgeHggPSB4eCAlIHdhdmVGdW5jdGlvblswXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB5eSArPSB3YXZlRnVuY3Rpb24ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgeXkgPSB5eSAlIHdhdmVGdW5jdGlvbi5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHh4ID49IDAgJiYgeHggPCB3YXZlRnVuY3Rpb25bMF0ubGVuZ3RoICYmIHl5ID49IDAgJiYgeXkgPCB3YXZlRnVuY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWdub3JlTGlzdC5pbmNsdWRlcyh3YXZlRnVuY3Rpb25beXldW3h4XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgYmVmb3JlTGVuZ3RoID0gd2F2ZUZ1bmN0aW9uW3l5XVt4eF0ub3B0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB3YXZlRnVuY3Rpb25beXldW3h4XS5vcHRpb25zID0gd2F2ZUZ1bmN0aW9uW3l5XVt4eF0ub3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWdncmVnYXRlUnVsZXNbc3RlcF0uaW5jbHVkZXMoeCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChiZWZvcmVMZW5ndGggPiB3YXZlRnVuY3Rpb25beXldW3h4XS5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMucHJvcG9nYXRlKHdhdmVGdW5jdGlvbixbeHgseXldLHJlcGVhdE91dHB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFRpbGVzLnB1c2god2F2ZUZ1bmN0aW9uW3l5XVt4eF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5leHRUaWxlcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gV0ZDO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBXRkM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVdGQy5qcy5tYXAiLCJpbXBvcnQgeyBEaXNwbGF5LCBFdmVudE1hbmFnZXIsIFJhbmRvbSwgUGF0aEZpbmRlciwgRk9WLCBXRkMgfSBmcm9tICcuLi9saWIvaW5kZXgnO1xyXG5cclxuLy8gRmlyc3QsIHNlbGVjdCB0aGUgdGFyZ2V0IGVsZW1lbnQgeW91IHdhbnQgdGhlIGRpc3BsYXkgdG8gYmUgd2l0aGluXHJcbmNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzcGxheUV4YW1wbGVcIik7XHJcblxyXG4vLyBQYXJhbWF0ZXJzIG9iamVjdFxyXG5jb25zdCBwYXJhbXMgPSB7XHJcbiAgICAvLyBSZXF1aXJlZCEgVGhlIGRpc3BsYXkgbXVzdCBnbyBzb21ld2hlcmVcclxuICAgIHRhcmdldDogdGFyZ2V0LFxyXG4gICAgLy8gV2lkdGggb2YgdGhlIGRpc3BsYXkgaW4gdGlsZXNcclxuICAgIHdpZHRoOiAyMCxcclxuICAgIC8vIEhlaWdodCBvZiB0aGUgZGlzcGxheSBpbiB0aWxlc1xyXG4gICAgaGVpZ2h0OiAxNSxcclxufTtcclxuXHJcbi8vIFN0YXJ0IHRoZSBkaXNwbGF5IVxyXG5jb25zdCBkaXNwbGF5ID0gbmV3IERpc3BsYXkocGFyYW1zKTtcclxuXHJcbi8vIFNldCB0aGUgdGlsZSBzaXplIHNvIHRoYXQgaXQgZml0cyBpdHMgY29udGFpbmVyXHJcbmRpc3BsYXkudGlsZVNpemUgPSBkaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcblxyXG4vLyBPbmUgY29vbCB0aGluZyB5b3UgY2FuIGRvIGlzIGFkZCBhIGxpc3RlbmVyIGZvciB3aW5kb3cgcmVzaXppbmdcclxuLy8gS2VlcCB5b3VyIGRpc3BsYXkgbG9va2luZyBnb29kIVxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCgpPT57XHJcbiAgICBkaXNwbGF5LnRpbGVTaXplID0gZGlzcGxheS5jYWxjdWxhdGVUaWxlU2l6ZSgpO1xyXG59KTtcclxuXHJcbi8vIExldHMgZHJhdyBzb21lIHN0dWZmXHJcbmZvciAobGV0IHg9MDsgeCA8IHBhcmFtcy53aWR0aDsgeCsrKSB7XHJcbiAgICBmb3IgKGxldCB5PTA7IHkgPCBwYXJhbXMuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAvLyBEcmF3IHNvbWUgd2FsbHNcclxuICAgICAgICBpZiAoeD09PTAgfHwgeT09PTAgfHwgeD09PXBhcmFtcy53aWR0aC0xIHx8IHk9PT1wYXJhbXMuaGVpZ2h0LTEpIHtcclxuICAgICAgICAgICAgZGlzcGxheS5zZXRUaWxlKHgseSx7XHJcbiAgICAgICAgICAgICAgICAvLyBDb250ZW50IGNhbiBiZSBhIHN0cmluZywgb3IgQU5ZIGh0bWwgZWxlbWVudCEgKGluY2x1ZGluZyBpbWFnZXMhKVxyXG4gICAgICAgICAgICAgICAgY29udGVudDogJyMnLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJyaWNrV2FsbFwiXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgb3VyIHBsYXllciFcclxuICAgICAgICB9IGVsc2UgaWYgKHg9PT0zICYmIHk9PT01KSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXkuc2V0VGlsZSh4LHkse1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogJ0AnLFxyXG4gICAgICAgICAgICAgICAgLy8gWW91IGNhbiB1c2UgYXMgbWFueSBjbGFzc2VzIGFzIHlvdSB3b3VsZCBsaWtlIVxyXG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0OiBbXCJwbGF5ZXJcIl1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gU29tZSBmbG9vciBldmVyeXdoZXJlIGVsc2VcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkaXNwbGF5LnNldFRpbGUoeCx5LHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcuJyxcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb29sRmxvb3JcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEhtbSBhY3R1YWxseSBJIHdhbnQgdG8gY2hhbmdlIHNvbWUgb2YgdGhlIHRpbGVzIGEgYml0LiB1cGRhdGVUaWxlIGNoYW5nZXMgdGhlXHJcbi8vIHBhcmFtZXRlcnMgdGhhdCB5b3Ugc3BlY2lmeTsgc2V0VGlsZSByZXBsYWNlcyBldmVyeXRoaW5nLlxyXG5cclxuZm9yIChsZXQgaT01OyBpIDwgMTA7IGkrKykge1xyXG4gICAgZGlzcGxheS51cGRhdGVUaWxlKGksaSx7Y2xhc3NOYW1lOlwic3VwZXJBd2Vzb21lXCJ9KTtcclxufVxyXG5cclxuY29uc3QgcmFuZG9tU3R1ZmYgPSAoKT0+e1xyXG4gICAgLy8gWW91IGNhbiBkZWZpbmUgYSBzZWVkIGlmIHlvdSB3b3VsZCBsaWtlOyBpZiBub3QsIHRoZSBjdXJyZW50IHRpbWUgaXMgdXNlZC5cclxuICAgIGNvbnN0IG9wdGlvbmFsU2VlZCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSk7XHJcbiAgICBcclxuICAgIC8vIFN0YXJ0IHRoZSByYW5kb20gbnVtYmVyIGdlbmVyYXRvclxyXG4gICAgY29uc3QgcmFuZG9tID0gbmV3IFJhbmRvbShvcHRpb25hbFNlZWQpO1xyXG4gICAgXHJcbiAgICAvLyBJZiB5b3Ugd2FudCBhIHJhbmRvbSBudW1iZXIgZnJvbSAwIDw9IHggPCAxOlxyXG4gICAgY29uc3QgeCA9IHJhbmRvbS5nZXRSYW5kb20oKTtcclxuICAgIFxyXG4gICAgLy8gSWYgeW91IHdvdWxkIGxpa2UgYSByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBvZiBsb3dlciA8PSB5IDw9IHVwcGVyIHlvdSBjYW4gdXNlIGdldE51bWJlci5cclxuICAgIGNvbnN0IGxvd2VyID0gMDtcclxuICAgIGNvbnN0IHVwcGVyID0gMTA7XHJcbiAgICBjb25zdCB5ID0gcmFuZG9tLmdldE51bWJlcihsb3dlcix1cHBlcik7XHJcbiAgICBcclxuICAgIC8vIElmIHRoZSBnaXZlbiBib3VuZHMgYXJlIGludGVnZXJzLCBpdCB3aWxsIGdlbmVyYXRlIGludGVnZXJzLlxyXG4gICAgLy8gSWYgbm90LCBpdCB3aWxsIGdlbmVyYXRlIGRlY2ltYWxzLlxyXG4gICAgLy8gSWYgeW91IHdhbnQgdG8gc3BlY2lmeSBleHBsaWNpdGx5LCB1c2UgdGhlIGludGVnZXIgYm9vbGVhbiBwYXJhbWV0ZXIuXHJcbiAgICBjb25zdCBub1RoYW5rc05vdEludGVnZXIgPSByYW5kb20uZ2V0TnVtYmVyKGxvd2VyLHVwcGVyLGZhbHNlKTtcclxuICAgIFxyXG4gICAgLy8gSWYgeW91IHdhbnQgYSByYW5kb20gZWxlbWVudCBmcm9tIGFuIGFycmF5LCB1c2UgZ2V0UmFuZG9tRWxlbWVudC5cclxuICAgIGNvbnN0IGNvb2xBcnJheSA9IFsxLCAyLCAzLCA0LCA1LCA2LCA3XTtcclxuICAgIGNvbnN0IHJhbmRvbUVsZW1lbnQgPSByYW5kb20uZ2V0UmFuZG9tRWxlbWVudChjb29sQXJyYXkpO1xyXG4gICAgXHJcbiAgICAvLyBJZiB5b3Ugd2FudCB0byBwcm92aWRlIHdlaWdodHMgZm9yIGVhY2ggdmFsdWUsIHlvdSBjYW4gdXNlIGdldFdlaWdodGVkRWxlbWVudC5cclxuICAgIGNvbnN0IHdlaWdodGVkQXJyYXkgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3ZWlnaHQ6IDEwLFxyXG4gICAgICAgICAgICBvcHRpb246IFwiQ3V0ZSBkb2dcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3ZWlnaHQ6IDE1LFxyXG4gICAgICAgICAgICBvcHRpb246IFwiQXdlc29tZSBjYXRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3ZWlnaHQ6IDEsXHJcbiAgICAgICAgICAgIG9wdGlvbjogXCJSYXJlIEZyYW5rbGluXCJcclxuICAgICAgICB9XHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICBjb25zdCByYW5kb21XZWlnaHRlZEVsZW1lbnQgPSByYW5kb20uZ2V0V2VpZ2h0ZWRFbGVtZW50KHdlaWdodGVkQXJyYXkpO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHRzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZG9tUmVzdWx0c1wiKTtcclxuXHJcbiAgICAvLyBDbGVhciBpdCBvdXQsIHRoZW4gZmlsbCBpdCB1cCBhZ2FpblxyXG4gICAgd2hpbGUocmVzdWx0c0xpc3QubGFzdENoaWxkKSB7XHJcbiAgICAgICAgcmVzdWx0c0xpc3QucmVtb3ZlQ2hpbGQocmVzdWx0c0xpc3QubGFzdENoaWxkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgYXR0YWNoUmVzdWx0ID0gZnVuY3Rpb24gKG5hbWUsIHJlc3VsdCkge1xyXG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBgJHtuYW1lfSA6ICR7cmVzdWx0fWA7XHJcbiAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpO1xyXG4gICAgICAgIHJlc3VsdHNMaXN0LmFwcGVuZENoaWxkKGxpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXR0YWNoUmVzdWx0KFwieFwiLCB4LnRvU3RyaW5nKCkpO1xyXG4gICAgYXR0YWNoUmVzdWx0KFwieVwiLCB5LnRvU3RyaW5nKCkpO1xyXG4gICAgYXR0YWNoUmVzdWx0KFwibm9UaGFua3NOb3RJbnRlZ2VyXCIsIG5vVGhhbmtzTm90SW50ZWdlci50b1N0cmluZygpKTtcclxuICAgIGF0dGFjaFJlc3VsdChcInJhbmRvbUVsZW1lbnRcIiwgcmFuZG9tRWxlbWVudC50b1N0cmluZygpKTtcclxuICAgIGF0dGFjaFJlc3VsdChcInJhbmRvbVdlaWdodGVkRWxlbWVudFwiLCByYW5kb21XZWlnaHRlZEVsZW1lbnQudG9TdHJpbmcoKSk7XHJcbn1cclxuXHJcbi8vIERvIGl0IG9uY2Ugb24gcGFnZSBsb2FkXHJcbnJhbmRvbVN0dWZmKCk7XHJcblxyXG4vLyBBdHRhY2ggaXQgdG8gYSBidXR0b24gc28gdGhlIHJlYWRlciBjYW4gcHVzaCBpdFxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhbmRvbUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixyYW5kb21TdHVmZik7XHJcblxyXG4vLyBDb2xvcmZ1bCBkaXNwbGF5LCBob29yYXlcclxuY29uc3QgY29sb3JUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbG9yRGlzcGxheVwiKTtcclxuXHJcbi8vIEluaXRpYWxpemUgaXRcclxuY29uc3QgY29sb3JEaXNwbGF5ID0gbmV3IERpc3BsYXkoe3RhcmdldDpjb2xvclRhcmdldCwgd2lkdGg6IDEwLCBoZWlnaHQ6IDEwfSk7XHJcblxyXG4vLyBEcmF3IHNvbWUgc3R1ZmZcclxuZm9yKGxldCBpPTA7aTwxMDtpKyspIHtcclxuICAgIGZvcihsZXQgaj0wO2o8MTA7aisrKSB7XHJcbiAgICAgICAgaWYgKGk9PT0wIHx8IGo9PT0wIHx8IGk9PT05IHx8IGo9PT05KSB7XHJcbiAgICAgICAgICAgIC8vIERpZCB5b3Uga25vdyB5b3UgY2FuIHVzZSBhIHNob3J0aGFuZCBoZXJlPyBOb3cgeW91IGRvIVxyXG4gICAgICAgICAgICBjb2xvckRpc3BsYXkuc2V0VGlsZShpLGosJyMnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGk9PT0zICYmIGo9PT0zKSB7XHJcbiAgICAgICAgICAgIGNvbG9yRGlzcGxheS5zZXRUaWxlKGksaiwnQCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaT09PTQgJiYgaj09PTUpIHtcclxuICAgICAgICAgICAgY29sb3JEaXNwbGF5LnNldFRpbGUoaSxqLHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdnJyxcclxuICAgICAgICAgICAgICAgIC8vIFlvdSBjYW4gdXNlIGlubGluZSBjb2xvcnMgYW5kIGJhY2tncm91bmRzIGlmXHJcbiAgICAgICAgICAgICAgICAvLyB5b3UgUkVBTExZIHdhbnQgdG8sIGJ1dCBJIGRpc2NvdXJhZ2UgaXQuXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZWVuJyxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDEyOCwwLDAsMC4yKScsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbG9yRGlzcGxheS5zZXRUaWxlKGksaiwnLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gTWFrZSB0aGUgZGlzcGxheSBmaXQgdGhlIGNvbnRhaW5lclxyXG5jb2xvckRpc3BsYXkudGlsZVNpemUgPSBjb2xvckRpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIENlbnRlciBpdCBvbiB0aGUgcGxheWVyXHJcbmNvbG9yRGlzcGxheS5jZW50ZXJEaXNwbGF5KDMsMyk7XHJcblxyXG4vLyBIZXJlJ3MgYSBjb29sIG1hcCB0byBsaXZlIGluXHJcbmNvbnN0IG1hcCA9IFtcclxuICAgIFwiIyMjIyMjIyMjIyMjIyMjIyMjIyNcIixcclxuICAgIFwiIy4uLi4uLi4uLi4uLi4uLi4uLiNcIixcclxuICAgIFwiIy4uIy4uLi4uIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIy4uIy4uLi4uIyMjLi4uIyMuLiNcIixcclxuICAgIFwiIy4uIy4uLi4uIy4uLi4uLi4uLiNcIixcclxuICAgIFwiIy4uLi4uLi4uLi4uLi4jIyMjLiNcIixcclxuICAgIFwiIy4uLi4uLi4uIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIyMjIy4uLiMjIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIy4uLi4uLi4uIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIyMjIyMjIyMjIyMjIyMjIyMjIyNcIixcclxuXTtcclxuY29uc3Qgd2lkdGggPSBtYXBbMF0ubGVuZ3RoO1xyXG5jb25zdCBoZWlnaHQgPSBtYXAubGVuZ3RoO1xyXG5cclxuLy8gQW5kIGxldHMgc3RhcnQgdXAgYSBkaXNwbGF5IHRvIHVzZVxyXG5jb25zdCBmb3ZEaXNwbGF5UGFyYW1zID0ge1xyXG4gICAgdGFyZ2V0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvdk1hcFwiKSxcclxuICAgIHdpZHRoOiB3aWR0aCxcclxuICAgIGhlaWdodDogaGVpZ2h0LFxyXG59O1xyXG5jb25zdCBmb3ZEaXNwbGF5ID0gbmV3IERpc3BsYXkoZm92RGlzcGxheVBhcmFtcyk7XHJcbmZvdkRpc3BsYXkudGlsZVNpemUgPSBmb3ZEaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcblxyXG4vLyBGT1YgdGFrZXMgYSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGRlY2lkZXMgd2hldGhlciBvciBub3QgeW91IGNhbiBzZWUgc29tZXRoaW5nLlxyXG4vLyBJdCB0YWtlcyBvbmUgcGFyYW1ldGVyLCB3aGljaCBpcyBhIHR3byBlbGVtZW50IHBvc2l0aW9uIGFycmF5IHBvcyA9IFt4LHldXHJcbi8vIGFuZCByZXR1cm5zIHRydWUgb3IgZmFsc2UuXHJcbmNvbnN0IGNhblNlZSA9IChwb3NpdGlvbikgPT4ge1xyXG4gICAgY29uc3QgeCA9IHBvc2l0aW9uWzBdO1xyXG4gICAgY29uc3QgeSA9IHBvc2l0aW9uWzFdO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSBpdCdzIGV2ZW4gb24gdGhlIG1hcFxyXG4gICAgaWYgKCB4PDAgfHwgeD49d2lkdGggfHwgeTwwIHx8IHk+PWhlaWdodCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRpbGUgPSBtYXBbeV1beF07XHJcblxyXG4gICAgLy8gRmlyc3QsIHJlZ2FyZGxlc3Mgb2Ygc3VjY2VzcyBvciBub3QsIHNlZSB0aGlzIHRpbGVcclxuICAgIGZvdkRpc3BsYXkuc2V0VGlsZSh4LHksdGlsZSk7XHJcblxyXG4gICAgLy8gTmV4dCwgdXNlIHdoYXRldmVyIGNyaXRlcmlhIHdlIHdhbnQgdG8gZGVjaWRlIGlmIGl0IGlzIHNlZXRocm91Z2ggb3Igbm90LlxyXG4gICAgLy8gSW4gdGhpcyBjYXNlLCBpZiBpdCdzIG5vdCBhIHdhbGwgKG9yICMgY2hhcmFjdGVyKSwgd2UgY2FuIHNlZSB0aHJvdWdoIGl0LlxyXG4gICAgcmV0dXJuIHRpbGUgIT09ICcjJztcclxufVxyXG5cclxuLy8gSXQgaGFzIGFuIG9wdGlvbmFsIHNlY29uZCBwYXJhbWV0ZXIgZm9yIGRpc3RhbmNlLiBUaGUgZGVmYXVsdCBpcyA4LlxyXG5jb25zdCBvcHRpb25hbFJhbmdlID0gMjA7XHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBGT1Ygb2JqZWN0IVxyXG5jb25zdCBmb3YgPSBuZXcgRk9WKGNhblNlZSwgb3B0aW9uYWxSYW5nZSk7XHJcblxyXG4vLyBDaG9vc2UgYSBwb3NpdGlvbiBmb3IgdGhlIHBsYXllciB0byBiZVxyXG5jb25zdCBwbGF5ZXJQb3MgPSBbNSw1XTtcclxuXHJcbi8vIFNsaWdodGx5IGhhY2t5IHdheSB0byBhZGQgdGhlIHBsYXllcjsgdXNlIGEgYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciB5b3VyIGdhbWVzIVxyXG5jb25zdCBtYXBSb3cgPSBtYXBbcGxheWVyUG9zWzFdXTtcclxubWFwW3BsYXllclBvc1sxXV0gPSBtYXBSb3cuc2xpY2UoMCxwbGF5ZXJQb3NbMF0pICsgJ0AnICsgbWFwUm93LnNsaWNlKHBsYXllclBvc1swXSsxKTtcclxuXHJcbi8vIE5vdywgTE9PSyFcclxuZm92Lmxvb2socGxheWVyUG9zKTtcclxuXHJcbi8vIEZpcnN0LCBzb21lIHNldHVwLCBzbyB3ZSBjYW4gcmVjb3JkIG91ciBvdXRwdXRcclxuY29uc3Qgc2ltcGxlTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2ltcGxlRXZlbnRMaXN0XCIpO1xyXG5jb25zdCBjb21wbGV4TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGxleEV2ZW50TGlzdFwiKTtcclxuXHJcblxyXG4vLyBMZXRzIG1ha2UgYSBoZWxwZXIgZnVuY3Rpb24gdG8gcmVjb3JkIG91ciBvdXRwdXRcclxuY29uc3Qgc2hvd0FjdGlvbiA9IChhY3Rpb24sIGxpc3QpID0+IHtcclxuICAgIC8vIE1ha2UgYSBsaXN0IGl0ZW0gYW5kIGFkZCB0aGUgYWN0aW9uIHRvIGl0LlxyXG4gICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIilcclxuICAgIGxpc3RJdGVtLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGFjdGlvbikpO1xyXG4gICAgLy8gQXR0YWNoIGl0IHRvIHRoZSBsaXN0LCBzbyB3ZSBjYW4gc2VlIHdoYXQgaGFwcGVucy5cclxuICAgIGxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG59O1xyXG5cclxuLy8gVGhlcmUncyB0d28gdHlwZXMgb2YgZXZlbnQgbWFuYWdlcnMgeW91IGNhbiBtYWtlLlxyXG4vLyBMZXRzIHN0YXJ0IHdpdGggdGhlIHNpbXBsZSBvbmUuIEV2ZXJ5b25lIHRha2VzIHR1cm5zLCBvbmUgYWZ0ZXIgdGhlIG90aGVyLlxyXG5jb25zdCBzaW1wbGVFdmVudHMgPSBuZXcgRXZlbnRNYW5hZ2VyKHt0eXBlOlwic2ltcGxlXCJ9KTtcclxuXHJcbi8vIFVzdWFsbHksIHdlIHdhbnQgdG8gYWRkIHNvbWUgYWN0b3JzIHRvIHRoZSBzeXN0ZW0uXHJcbi8vIFRoZSBzeXN0ZW0gY2FsbHMgdGhlaXIgXCJhY3RcIiBtZXRob2QuXHJcblxyXG5jb25zdCBzaW1wbGVHb2JsaW4gPSB7XHJcbiAgICBhY3Q6ICgpPT5zaG93QWN0aW9uKFwiVGhlIEdvYmxpbiBnb2JsaW5zIVwiLCBzaW1wbGVMaXN0KVxyXG59XHJcblxyXG5jb25zdCBzaW1wbGVDYXQgPSB7XHJcbiAgICBhY3Q6ICgpPT5zaG93QWN0aW9uKFwiVGhlIGNhdCBtZW93cyFcIiwgc2ltcGxlTGlzdClcclxufVxyXG5cclxuLy8gQWRkIHRoZW0gdG8gdGhlIGV2ZW50IG1hbmFnZXJcclxuc2ltcGxlRXZlbnRzLmFkZChzaW1wbGVHb2JsaW4pO1xyXG5zaW1wbGVFdmVudHMuYWRkKHNpbXBsZUNhdCk7XHJcblxyXG4vLyBZb3UgY2FuIGFsc28gYWRkIGNhbGxiYWNrIGZ1bmN0aW9ucyBvbiB0aGVpciBvd24sIGFzIGV2ZW50cyBvciB3aGF0ZXZlciB5b3VyIGhlYXJ0IHBsZWFzZXMuXHJcbi8vIFRoZXkgY2FuIHJlcGVhdCBmb3JldmVyLi4uXHJcbnNpbXBsZUV2ZW50cy5hZGQoe1xyXG4gICAgY2FsbGJhY2s6ICgpPT5zaG93QWN0aW9uKFwiRHJpcCBkcmlwIGdvZXMgdGhlIGZhdWNldC5cIiwgc2ltcGxlTGlzdCksXHJcbiAgICByZXBlYXRzOiB0cnVlXHJcbn0pXHJcblxyXG4vLyBSZXBlYXQgYSBmZXcgdGltZXNcclxuc2ltcGxlRXZlbnRzLmFkZCh7XHJcbiAgICBjYWxsYmFjazogKCk9PnNob3dBY3Rpb24oXCJSdXNoaW5nIHdpbmQhIE9oIG5vIVwiLCBzaW1wbGVMaXN0KSxcclxuICAgIHJlcGVhdHM6IDJcclxufSlcclxuXHJcbi8vIE9yIG5vdCByZXBlYXQgYXQgYWxsIVxyXG5zaW1wbGVFdmVudHMuYWRkKHtcclxuICAgIGNhbGxiYWNrOiAoKT0+c2hvd0FjdGlvbihcIlRoZSBob3VzZSBvZiBjYXJkcyBmYWxscyBvdmVyLiBXaG9vcHMhXCIsIHNpbXBsZUxpc3QpXHJcbn0pO1xyXG5cclxuLy8gVGhlbiB5b3UganVzdCBraWNrIGl0IG9mZiBpbiB5b3VyIHByZWZlcnJlZCBtYW5uZXIuXHJcbi8vIEVhY2ggdGltZSB5b3UgY2FsbCBhZHZhbmNlLCBpdCB3aWxsIHN0ZXAgZm9yd2FyZCBvbmUgc3RlcC5cclxuLy8gSWYgYWN0IHJldHVybnMgYSBwcm9taXNlIChzYXksIGlmIHlvdSdyZSB3YWl0aW5nIGZvciBwbGF5ZXIgaW5wdXQpXHJcbi8vIGl0IHdpbGwgd2FpdCBmb3IgdGhhdCBhY3Rpb24gdG8gY29uY2x1ZGUuXHJcbmZvcihsZXQgaT0wO2k8MjA7aSsrKSB7XHJcbiAgICBzaW1wbGVFdmVudHMuYWR2YW5jZSgpO1xyXG59XHJcblxyXG4vLyBUaGUgc2Vjb25kIHR5cGUgb2YgZXZlbnQgbWFuYWdlciBpcyBjb21wbGV4OlxyXG5jb25zdCBjb21wbGV4RXZlbnRzID0gbmV3IEV2ZW50TWFuYWdlcih7dHlwZTpcImNvbXBsZXhcIn0pO1xyXG5cclxuLy8gVGhlIGNvbXBsZXggZXZlbnQgbWFuYWdlciBhY2NlcHRzIGRpZmZlcmVudCBkZWxheXMgZm9yIGRpZmZlcmVudCBhY3RvcnNcclxuXHJcbmNvbnN0IGZhc3RDYXQgPSB7XHJcbiAgICBhY3Q6KCk9PnNob3dBY3Rpb24oXCJGYXN0IGNhdCBueW9vbXMhXCIsIGNvbXBsZXhMaXN0KVxyXG59XHJcblxyXG5jb25zdCBzbG93T2dyZSA9IHtcclxuICAgIGFjdDooKT0+c2hvd0FjdGlvbihcIlNsb3cgb2dyZSBpcyBzbG9vb293XCIsIGNvbXBsZXhMaXN0KVxyXG59XHJcblxyXG4vLyBUaGUgZGVsYXkgcHJvcGVydHkgZGVmaW5lcyBob3cgc2xvdyBhbiBhY3RvciBpc1xyXG5jb21wbGV4RXZlbnRzLmFkZCh7XHJcbiAgICBhY3RvcjpmYXN0Q2F0LFxyXG4gICAgZGVsYXk6MVxyXG59KTtcclxuXHJcbmNvbXBsZXhFdmVudHMuYWRkKHtcclxuICAgIGFjdG9yOnNsb3dPZ3JlLFxyXG4gICAgZGVsYXk6NVxyXG59KTtcclxuXHJcbi8vIE9yIGhvdyBsb25nIGFuIGV2ZW50IHRha2VzXHJcbmNvbXBsZXhFdmVudHMuYWRkKHtcclxuICAgIGNhbGxiYWNrOigpPT5zaG93QWN0aW9uKFwiVGhlIG1haWwgaGFzIGp1c3QgYXJyaXZlZC4gU3dlZXQhXCIsIGNvbXBsZXhMaXN0KSxcclxuICAgIGRlbGF5OiAxNlxyXG59KTtcclxuXHJcbi8vIEFkdmFuY2UgdGhlIGNsb2NrLi4uXHJcbmZvcihsZXQgaT0wO2k8MjA7aSsrKSB7XHJcbiAgICBjb21wbGV4RXZlbnRzLmFkdmFuY2UoKTtcclxufVxyXG5cclxubWFwW3BsYXllclBvc1sxXV0gPSBtYXBSb3cuc2xpY2UoMCxwbGF5ZXJQb3NbMF0pICsgJy4nICsgbWFwUm93LnNsaWNlKHBsYXllclBvc1swXSsxKTtcclxuXHJcbi8vIEZpcnN0LCBsZXRzIHNldHVwIGFub3RoZXIgZGlzcGxheSEgSSB3YW50IHRvIGRyYXcgdGhlIHBhdGggd2UgZmluZC5cclxuLy8gQW5kIGxldHMgc3RhcnQgdXAgYSBkaXNwbGF5IHRvIHVzZS5cclxuLy8gV2UncmUgZ29pbmcgdG8gdXNlIHRoZSBzYW1lIG1hcCBmcm9tIHRoZSBGT1Ygc2VjdGlvbi5cclxuY29uc3QgcGF0aERpc3BsYXlQYXJhbXMgPSB7XHJcbiAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGF0aERpc3BsYXlcIiksXHJcbiAgICB3aWR0aDogd2lkdGgsXHJcbiAgICBoZWlnaHQ6IGhlaWdodCxcclxufTtcclxuY29uc3QgcGF0aERpc3BsYXkgPSBuZXcgRGlzcGxheShwYXRoRGlzcGxheVBhcmFtcyk7XHJcbnBhdGhEaXNwbGF5LnRpbGVTaXplID0gcGF0aERpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIExldHMgZHJhdyB0aGUgbWFwIHRvIHN0YXJ0XHJcbm1hcC5mb3JFYWNoKChyb3cseSk9PnJvdy5zcGxpdCgnJykuZm9yRWFjaCgodGlsZSx4KT0+e1xyXG4gICAgcGF0aERpc3BsYXkuc2V0VGlsZSh4LHksdGlsZSk7XHJcbn0pKTtcclxuXHJcbi8vIE5vdywgbGV0cyBzZXR1cCB0aGUgcGF0aGZpbmRlciFcclxuLy8gVGhlIFBhdGhGaW5kZXIgdGFrZXMgYSBcImNhblBhc3NcIiBjYWxsYmFjayB0byBkZXRlcm1pbmUgd2hhdCBpcyBwYXNzYWJsZS5cclxuLy8gVGhpcyBsb29rcyBzaW1pbGFyIHRvIHRoZSBjYW5TZWUgY2FsbGJhY2sgZnJvbSBiZWZvcmUsIGJ1dCBpdCBkb2Vzbid0IGhhdmUgdG8uXHJcbmNvbnN0IHBhdGhmaW5kZXIgPSBuZXcgUGF0aEZpbmRlcih7XHJcbiAgICBjYW5QYXNzOihbeCx5XSk9PntcclxuICAgICAgICAvLyBNYWtlIHN1cmUgaXQncyBldmVuIG9uIHRoZSBtYXBcclxuICAgICAgICBpZiAoIHg8MCB8fCB4Pj13aWR0aCB8fCB5PDAgfHwgeT49aGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGlsZSA9IG1hcFt5XVt4XTtcclxuXHJcbiAgICAgICAgLy8gTmV4dCwgdXNlIHdoYXRldmVyIGNyaXRlcmlhIHdlIHdhbnQgdG8gZGVjaWRlIGlmIGl0IGlzIHBhc3NhYmxlLlxyXG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSwgaWYgaXQncyBub3QgYSB3YWxsIChvciAjIGNoYXJhY3RlciksIHdlIGNhbiB3YWxrIHRocm91Z2ggaXQuXHJcbiAgICAgICAgcmV0dXJuIHRpbGUgIT09ICcjJztcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBMZXQgY2hvb3NlIGEgc3RhcnRpbmcgcG9zaXRpb24sIGFuZCBhIHRhcmdldCBwb3NpdGlvbiFcclxuY29uc3Qgc3RhcnRQb3MgPSBbMSw4XTtcclxuY29uc3QgZW5kUG9zID0gWzE1LDhdO1xyXG5cclxuLy8gSXQgY2FuIGFsc28gdGFrZSBhbiBvcHRpb25hbCBcIm9ydGhvZ29uYWxPbmx5XCIgcGFyYW1ldGVyLlxyXG4vLyBUaGlzIHNldHMgd2hldGhlciBvciBub3QgdGhlIHBhdGhmaW5kZXIgd2lsbCB1c2UgZGlhZ29uYWxzLlxyXG5jb25zdCBvcHRpb25hbE9ydGhvZ29uYWxPbmx5ID0gZmFsc2U7XHJcblxyXG4vLyBOb3csIGxldHMgZmluZCB0aGUgcGF0aCFcclxuY29uc3QgcGF0aCA9IHBhdGhmaW5kZXIuZmluZFBhdGgoc3RhcnRQb3MsIGVuZFBvcywgb3B0aW9uYWxPcnRob2dvbmFsT25seSk7XHJcblxyXG4vLyBEcmF3IGl0IG9udG8gdGhlIG1hcCB0byB0YWtlIGEgbG9vayBhdCBpdC5cclxucGF0aC5mb3JFYWNoKChbeCx5XSk9PntcclxuICAgIHBhdGhEaXNwbGF5LnVwZGF0ZVRpbGUoeCx5LHtcclxuICAgICAgICBjb250ZW50OidYJyxcclxuICAgICAgICBjbGFzc05hbWU6IFwicGF0aE1hcmtlclwiXHJcbiAgICB9KVxyXG59KTtcclxuXHJcbi8vIE5vdGUgdGhhdCB0aGUgZHJhd24gcGF0aCBkb2Vzbid0IGluY2x1ZGUgdGhlIHN0YXJ0aW5nIHBvc2l0aW9uLlxyXG4vLyBUaGlzIGlzIHNvIHlvdSBjYW4ganVzdCBncmFiIHBhdGhbMF0gdG8gZ2V0IHRoZSBmaXJzdCBzdGVwIGluIHlvdXIgam91cm5leS5cclxuLy8gTGV0cyBkcmF3IG9uIHRoZSBwbGF5ZXIsIHRvbywgZm9yIGlsbHVzdHJhdGlvbi5cclxucGF0aERpc3BsYXkudXBkYXRlVGlsZShzdGFydFBvc1swXSwgc3RhcnRQb3NbMV0sICdAJyk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCgpPT57XHJcbiAgICBjb2xvckRpc3BsYXkudGlsZVNpemUgPSBjb2xvckRpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuICAgIGZvdkRpc3BsYXkudGlsZVNpemUgPSBmb3ZEaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcbiAgICBwYXRoRGlzcGxheS50aWxlU2l6ZSA9IHBhdGhEaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcbn0pO1xyXG5cclxuLy8gV0ZDIGRpc3BsYXlcclxuY29uc3Qgd2ZjRGlzcGxheVBhcmFtcyA9IHtcclxuICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZmNEaXNwbGF5XCIpLFxyXG4gICAgd2lkdGg6IDIwLFxyXG4gICAgaGVpZ2h0OiAyMCxcclxufTtcclxuY29uc3Qgd2ZjRGlzcGxheSA9IG5ldyBEaXNwbGF5KHdmY0Rpc3BsYXlQYXJhbXMpO1xyXG53ZmNEaXNwbGF5LnRpbGVTaXplID0gd2ZjRGlzcGxheS5jYWxjdWxhdGVUaWxlU2l6ZSgpO1xyXG5cclxuLy8gVGhlIFdGQyBnZW5lcmF0b3IgdGFrZXMgYW4gaW5wdXQgXCJpbWFnZVwiLCB3aGljaCBpdCB1c2VzIHRvIGZpZ3VyZSBvdXQgcnVsZXMgZm9yIHRoZSBvdXRwdXQuXHJcbmNvbnN0IGlucHV0SW1hZ2UgPSBbXHJcbiAgICBcIi4jLi5cIixcclxuICAgIFwiLiMuLlwiLFxyXG4gICAgXCIjIyMjXCIsXHJcbiAgICBcIi4jLi5cIixcclxuXTtcclxuXHJcbmNvbnN0IHdmYyA9IG5ldyBXRkMoe2lucHV0OmlucHV0SW1hZ2UsbjozLHJlcGVhdElucHV0OnRydWV9KTtcclxud2ZjLmdlbmVyYXRlKHt3aWR0aDoyMCxoZWlnaHQ6MjAscmVwZWF0T3V0cHV0OnRydWV9KS50aGVuKHJlc3VsdD0+e1xyXG4gICAgcmVzdWx0LmZvckVhY2goKHJvdyxqKT0+e1xyXG4gICAgICAgIHJvdy5mb3JFYWNoKChjb2wsaSk9PntcclxuICAgICAgICAgICAgd2ZjRGlzcGxheS5zZXRUaWxlKGksaixjb2wpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHdmY0Rpc3BsYXlQYXJhbXNUd28gPSB7XHJcbiAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2ZjRGlzcGxheVR3b1wiKSxcclxuICAgIHdpZHRoOiAyMCxcclxuICAgIGhlaWdodDogMjAsXHJcbn07XHJcbmNvbnN0IHdmY0Rpc3BsYXlUd28gPSBuZXcgRGlzcGxheSh3ZmNEaXNwbGF5UGFyYW1zVHdvKTtcclxud2ZjRGlzcGxheVR3by50aWxlU2l6ZSA9IHdmY0Rpc3BsYXlUd28uY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIFRoZSBXRkMgZ2VuZXJhdG9yIHRha2VzIGFuIGlucHV0IFwiaW1hZ2VcIiwgd2hpY2ggaXQgdXNlcyB0byBmaWd1cmUgb3V0IHJ1bGVzIGZvciB0aGUgb3V0cHV0LlxyXG5jb25zdCBpbnB1dEltYWdlVHdvID0gW1xyXG4gICAgXCIgICAgICAgICAgICAgICAgIFwiLFxyXG4gICAgXCIgICAgICAgICAgICAgWCAgIFwiLFxyXG4gICAgXCIgICAgWCMgICAgICAgIyAgIFwiLFxyXG4gICAgXCIgICAgICMgICAgICAgIyAgIFwiLFxyXG4gICAgXCIgICAgICMgIFggICAgIyAgIFwiLFxyXG4gICAgXCIgICAgICMjIyMjIyMjIyAgIFwiLFxyXG4gICAgXCIgICAgICMgICAgICMgICAgIFwiLFxyXG4gICAgXCIgICAgICMgICAgIFggICAgIFwiLFxyXG4gICAgXCIgICAgIFggICAgICAgICAgIFwiLFxyXG4gICAgXCIgICAgICAgICAgICAgICAgIFwiLFxyXG5dO1xyXG5cclxuY29uc3Qgd2ZjVHdvID0gbmV3IFdGQyh7aW5wdXQ6aW5wdXRJbWFnZVR3byxuOjMscmVwZWF0SW5wdXQ6dHJ1ZX0pO1xyXG53ZmNUd28uZ2VuZXJhdGUoe3dpZHRoOjIwLGhlaWdodDoyMCxyZXBlYXRPdXRwdXQ6dHJ1ZX0pLnRoZW4ocmVzdWx0PT57XHJcbiAgICByZXN1bHQuZm9yRWFjaCgocm93LGopPT57XHJcbiAgICAgICAgcm93LmZvckVhY2goKGNvbCxpKT0+e1xyXG4gICAgICAgICAgICB3ZmNEaXNwbGF5VHdvLnNldFRpbGUoaSxqLGNvbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9