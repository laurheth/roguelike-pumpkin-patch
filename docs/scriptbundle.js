(()=>{"use strict";var t=function(){return(t=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e="pumpkin-tile";const i=function(){function i(t,i,n){this.element=document.createElement("div"),this.element.classList.add(e);var o=t.content,s=void 0===o?"":o,r=t.color,a=void 0===r?"":r,l=t.background,h=void 0===l?"":l,c=t.className,u=void 0===c?"":c,p=t.classList,d=void 0===p?[]:p;!function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}}(t,["content","color","background","className","classList"]),this.content=s,this.color=a,this.background=h,d.length>0?this.classList=d:this.className=u,this.tileWidth=(null==n?void 0:n.tileWidth)?n.tileWidth:16,this.tileHeight=(null==n?void 0:n.tileHeight)?n.tileHeight:this.tileWidth,this.position=i}return Object.defineProperty(i.prototype,"content",{get:function(){return this._content},set:function(t){if(this.confirmContentElement(),this._content!==t){if("string"==typeof t)this.contentElement.innerHTML=t;else{for(;this.contentElement.lastElementChild;)this.contentElement.removeChild(this.contentElement.lastElementChild);this.contentElement.appendChild(t)}this._content=t}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"background",{get:function(){return this._background},set:function(t){t!==this._background&&(this._background=t,this.element.style.backgroundColor=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){t!==this._color&&(this._color=t,this.element.style.color=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(e){this._position=t({},e),this.element.style.left=e.x*this.tileWidth+"px",this.element.style.top=e.y*this.tileHeight+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tileWidth",{get:function(){return this._tileWidth},set:function(t){this._tileWidth=t,this.element.style.width=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tileHeight",{get:function(){return this._tileHeight},set:function(t){this._tileHeight=t,this.element.style.height=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"className",{get:function(){return this.classList.join(" ")},set:function(t){this.classList=t?t.split(" "):[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"classList",{get:function(){return function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],r=0,a=s.length;r<a;r++,o++)n[o]=s[r];return n}([e],this._classList)},set:function(t){var i,n,o=this;this._classList||(this._classList=[]),t.length===this._classList.length&&t.every((function(t){return o._classList.includes(t)}))&&this._classList.every((function(e){return t.includes(e)}))||(this._classList.length>0&&(i=this.element.classList).remove.apply(i,this._classList),this._classList=t.filter((function(t){return t.trim()&&t!==e})),t.length>0&&(n=this.element.classList).add.apply(n,this.classList))},enumerable:!1,configurable:!0}),i.prototype.setOptions=function(t){var e=t.content,i=void 0===e?"":e,n=t.background,o=void 0===n?"":n,s=t.color,r=void 0===s?"":s,a=t.className,l=void 0===a?"":a,h=t.classList;this.content=i,this.background=o,this.color=r,h?this.classList=h:this.className=l},i.prototype.updateOptions=function(t){var e=t.content,i=t.background,n=t.color,o=t.className,s=t.classList;void 0!==e&&(this.content=e),void 0!==i&&(this.background=i),void 0!==n&&(this.color=n),s&&s.length>0?this.classList=s:void 0!==o&&(this.className=o)},i.prototype.confirmContentElement=function(){this.contentElement||(this.contentElement=document.createElement("div"),this.element.appendChild(this.contentElement))},i}();const n=function(){function t(t){var e=t.target,i=t.width,n=void 0===i?1:i,o=t.height,s=void 0===o?1:o,r=t.tileWidth,a=t.tileHeight;!function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}}(t,["target","width","height","tileWidth","tileHeight"]),this.target=e,this.target.className?this.target.classList.add("pumpkin-container"):this.target.className="pumpkin-container",this.element=document.createElement("div"),this.element.className="pumpkin-display",this.element.setAttribute("aria-hidden","true"),this.dimensions={width:n,height:s},this.tileSize={tileWidth:r||16,tileHeight:a||r||16},this.applyDefaultStyles(),this.target.appendChild(this.element)}return Object.defineProperty(t.prototype,"tileSize",{get:function(){return this._tileSize},set:function(t){var e;this._tileSize=t,this.element.style.fontSize=t.tileHeight+"px",null===(e=this.tiles)||void 0===e||e.forEach((function(e){e.tileWidth=t.tileWidth,e.tileHeight=t.tileHeight,e.position=e.position})),this.resetSize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return{width:this._width,height:this._height}},set:function(t){t.width!==this._width&&t.height!==this._height&&(this._width=t.width,this._height=t.height,this.allocateDisplay(),this.resetSize(),this.moveToCenter())},enumerable:!1,configurable:!0}),t.prototype.resetSize=function(){this._width&&this._height&&this.tileSize&&(this.element.style.width=this._width*this.tileSize.tileWidth+"px",this.element.style.height=this._height*this.tileSize.tileHeight+"px")},t.prototype.centerDisplay=function(t,e){this.centerPosition=void 0===t||void 0===e?void 0:{x:t,y:e},this.moveToCenter()},t.prototype.moveToCenter=function(){if(this.centerPosition){var t=(this.centerPosition.x+.5)/this.dimensions.width,e=(this.centerPosition.y+.5)/this.dimensions.height;this.element.style.transform="translate("+100*-t+"%,"+100*-e+"%)"}else this.element.style.transform=""},t.prototype.allocateDisplay=function(){var t=this;this.tiles&&this.tiles.forEach((function(e){t.element.removeChild(e.element)})),this.tiles=[];for(var e=0;e<this._height;e++)for(var n=0;n<this._width;n++){var o=new i({content:""},{x:n,y:e},this.tileSize);this.tiles.push(o),this.element.appendChild(o.element)}},t.prototype.getTile=function(t,e){if(t>=0&&t<this._width&&e>=0&&e<this._height){var i=t+e*this._width;return this.tiles[i]}},t.prototype.formatTileOptions=function(t){return"string"==typeof t||t instanceof HTMLElement?{content:t}:t},t.prototype.setTile=function(t,e,i){var n=this.getTile(t,e);n&&n.setOptions(this.formatTileOptions(i))},t.prototype.updateTile=function(t,e,i){var n=this.getTile(t,e);n&&n.updateOptions(this.formatTileOptions(i))},t.prototype.calculateDimensions=function(t){void 0===t&&(t=this.target.getBoundingClientRect());var e=Math.abs(t.right-t.left),i=Math.abs(t.bottom-t.top);return{width:Math.floor(e/this.tileSize.tileWidth),height:Math.floor(i/this.tileSize.tileHeight)}},t.prototype.calculateTileSize=function(t){void 0===t&&(t=this.target.getBoundingClientRect());var e=Math.abs(t.right-t.left),i=Math.abs(t.bottom-t.top),n={tileWidth:e/this.dimensions.width,tileHeight:i/this.dimensions.height},o=Math.min(n.tileWidth,n.tileHeight);return{tileWidth:o,tileHeight:o}},t.prototype.applyDefaultStyles=function(){var t="pumpkin-default-styles";if(!document.getElementById(t)){var e=document.createElement("style");e.id=t,e.type="text/css",e.appendChild(document.createTextNode("\n.pumpkin-container {\n    position: relative;\n    overflow: hidden;\n    background-color: #000000;\n    color: #ffffff;\n}\n\n.pumpkin-display {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.pumpkin-tile {\n    position: absolute;\n}\n\n.pumpkin-tile > * {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 10;\n}\n"));var i=document.head,n=document.querySelector("style, link");i.insertBefore(e,n)}},t}();const o=function(){function t(t){t||(t={});var e=t.type,i=void 0===e?"simple":e;this.type=i,this.queue=[],this.time=0}return t.prototype.add=function(t){var e={};if(t instanceof Function?e.callback=t:"act"in t?e.actor=t:Object.assign(e,t),void 0===e.repeats&&e.actor&&(e.repeats=!0),"complex"===this.type){e.delay||(e.delay=1);var i=e.delay+this.time;if(0===this.queue.length||this.queue[this.queue.length-1].time<=i)this.queue.push({event:e,time:i});else for(var n=0;n<this.queue.length;n++)if(i<this.queue[n].time){this.queue.splice(n,0,{event:e,time:i});break}}else this.queue.push({event:e,time:0})},t.prototype.advance=function(){return t=this,e=void 0,n=function(){var t;return function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(e){switch(e.label){case 0:if(0===this.queue.length)throw new Error("Event queue is empty.");return t=this.queue.shift(),this.time=t.time,"number"==typeof t.event.repeats&&t.event.repeats--,t.event.repeats&&this.add(t.event),t.event.callback?[4,t.event.callback()]:[3,2];case 1:e.sent(),e.label=2;case 2:return t.event.actor?[4,t.event.actor.act()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n},t.prototype.remove=function(t){var e=this,i=[];this.queue.forEach((function(e,n){e.event.actor===t&&i.push(n)})),i.reverse(),i.forEach((function(t){e.queue.splice(t,1)}))},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),t}(),s=function(){function t(t,e){t||(t=Date.now()),this.seed=Math.floor(t),this.weyl=0,this.x=0,this.base=e||1e5;for(var i=0;i<10;i++)this.getRandom()}return t.prototype.getRandom=function(){return this.x*=this.x,this.x+=this.weyl+=this.seed,this.x=(this.x>>>32|this.x<<32)>>>0,this.x%this.base/this.base},t.prototype.getNumber=function(t,e,i){return void 0===i&&Number.isInteger(t)&&Number.isInteger(e)&&(i=!0),i?Math.floor(this.getRandom()*(e+1-t))+Math.ceil(t):this.getRandom()*(e-t)+t},t.prototype.getRandomElement=function(t){return t[this.getNumber(0,t.length-1,!0)]},t.prototype.getWeightedElement=function(t){var e=0,i=!0;t.forEach((function(t){e+=t.weight,i=i&&Number.isInteger(t.weight)}));for(var n=this.getNumber(i?1:0,e,i),o=0;o<t.length;o++)if((n-=t[o].weight)<=0)return t[o].option;throw new Error("No match found.")},t}();var r=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],r=0,a=s.length;r<a;r++,o++)n[o]=s[r];return n};const a=function(){function t(t){var e=t.canPass,i=t.metric,n=t.maxIterations,o=t.weight;!function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}}(t,["canPass","metric","maxIterations","weight"]),this.canPass=e,i||(i=function(t,e){return Math.abs(e[1]-t[1])+Math.abs(e[0]-t[0])}),o||(o=function(t){return 1}),this.maxIterations=n,this.metric=i,this.weight=o}return t.prototype.findPath=function(t,e,i){var n=this;void 0===i&&(i=!1);for(var o=[],s=this.maxIterations?this.maxIterations:40*this.metric(t,e),a=0,l=[{position:r(t),steps:0,distanceFromGoal:this.metric(t,e),previousLocation:null}],h=[],c=[0,1,1.2];a<s&&!this.contains(l,e);)a++,l.forEach((function(t){for(var o=-1;o<2;o++)for(var s=-1;s<2;s++)if(!i||0===o||0===s){var r=[t.position[0]+o,t.position[1]+s],a=c[Math.abs(o)+Math.abs(s)]*n.weight(r);if(n.canPass(r)){var u=n.getLocation(l,r),p=n.getLocation(h,r);u||p?(u&&u.steps>t.steps+a&&(u.steps=t.steps+a,u.previousLocation=t),p&&p.steps>t.steps+a&&(p.steps=t.steps+a,p.previousLocation=t)):h.push({position:r,steps:t.steps+a,distanceFromGoal:n.metric(r,e),previousLocation:t})}}})),h.sort((function(t,e){return e.steps+e.distanceFromGoal-(t.steps+t.distanceFromGoal)})),l.push(h.pop());var u=this.getLocation(l,e);if(this.contains(l,e))for(a=0;(u.position[0]!==t[0]||u.position[1]!==t[1])&&a<s;)a++,o.push(u.position),u=u.previousLocation;return o.reverse()},t.prototype.isEqual=function(t,e){return t.position[0]===e.position[0]&&t.position[1]===e.position[1]},t.prototype.contains=function(t,e){var i=this;return Array.isArray(e)?t.some((function(t){return t.position[0]===e[0]&&t.position[1]===e[1]})):t.some((function(t){return i.isEqual(t,e)}))},t.prototype.getLocation=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=n[i];if(o.position[0]===e[0]&&o.position[1]===e[1])return o}},t}(),l=function(){function t(t,e){this.canSee=t,this.range=e||8}return t.prototype.look=function(t,e){var i=e||this.range;this.canSee(t);for(var n=[],o=[],s=0,r=0,a=1;a<=i;a++){for(var l=0;l<4;l++)for(var h=-a;h<=a;h++){0===l?(s=h,r=a):1===l?(r=h,s=a):2===l?(s=h,r=-a):(r=h,s=-a);var c=[t[0]+s,t[1]+r];if(!(this.distance(t,c)>i)){var u=this.angleTo(t,c),p=this.angularSize(t,c)/2,d=!1;this.isInShadows(u,n)&&this.isInShadows(u+p,n)&&this.isInShadows(u-p,n)&&(d=!0),!d&&this.canSee(c)||o.push({startAngle:u-p,endAngle:u+p})}}for(;o.length>0;)this.combineShadow(n,o.pop());if(1===n.length&&n[0].endAngle-n[0].startAngle>=360)return}},t.prototype.angleTo=function(t,e){var i=e[1]-t[1],n=e[0]-t[0],o=180*Math.atan2(i,n)/Math.PI;return o>=0?o:o+360},t.prototype.angularSize=function(t,e){var i=this.distance(t,e);return 360*Math.atan(1/(2*i))/Math.PI},t.prototype.distance=function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))},t.prototype.isInShadows=function(t,e){for(var i=t-360,n=0,o=e;n<o.length;n++){var s=o[n];if(t<=s.endAngle&&t>=s.startAngle||i<=s.endAngle&&i>=s.startAngle)return!0}return!1},t.prototype.combineShadow=function(t,e){for(var i=[],n=0;n<t.length;n++){var o=t[n];e.startAngle<o.endAngle&&e.endAngle>o.startAngle&&(e.startAngle=Math.min(o.startAngle,e.startAngle),e.endAngle=Math.max(o.endAngle,e.endAngle),i.push(n))}if(i.length>0){var s=t[i.shift()];for(s.startAngle=e.startAngle,s.endAngle=e.endAngle,n=i.length-1;n>=0;n--)t.splice(i[n],1)}else t.push(e)},t}(),h={target:document.getElementById("displayExample"),width:20,height:15},c=new n(h);c.tileSize=c.calculateTileSize(),window.addEventListener("resize",(()=>{c.tileSize=c.calculateTileSize()}));for(let t=0;t<h.width;t++)for(let e=0;e<h.height;e++)0===t||0===e||t===h.width-1||e===h.height-1?c.setTile(t,e,{content:"#",className:"brickWall"}):3===t&&5===e?c.setTile(t,e,{content:"@",classList:["player"]}):c.setTile(t,e,{content:".",className:"coolFloor"});for(let t=5;t<10;t++)c.updateTile(t,t,{className:"superAwesome"});const u=()=>{const t=Math.floor(Date.now()),e=new s(t),i=e.getRandom(),n=e.getNumber(0,10),o=e.getNumber(0,10,!1),r=e.getRandomElement([1,2,3,4,5,6,7]),a=e.getWeightedElement([{weight:10,option:"Cute dog"},{weight:15,option:"Awesome cat"},{weight:1,option:"Rare Franklin"}]),l=document.getElementById("randomResults");for(;l.lastChild;)l.removeChild(l.lastChild);const h=function(t,e){const i=document.createElement("li"),n=`${t} : ${e}`;i.appendChild(document.createTextNode(n)),l.appendChild(i)};h("x",i.toString()),h("y",n.toString()),h("noThanksNotInteger",o.toString()),h("randomElement",r.toString()),h("randomWeightedElement",a.toString())};u(),document.getElementById("randomButton").addEventListener("click",u);const p=new n({target:document.querySelector(".colorDisplay"),width:10,height:10});for(let t=0;t<10;t++)for(let e=0;e<10;e++)0===t||0===e||9===t||9===e?p.setTile(t,e,"#"):3===t&&3===e?p.setTile(t,e,"@"):4===t&&5===e?p.setTile(t,e,{content:"g",color:"green",background:"rgba(128,0,0,0.2)"}):p.setTile(t,e,".");p.tileSize=p.calculateTileSize(),p.centerDisplay(3,3);const d=["####################","#..................#","#..#.....#....#....#","#..#.....###...##..#","#..#.....#.........#","#.............####.#","#........#....#....#","####...###....#....#","#........#....#....#","####################"],f=d[0].length,g=d.length,m=new n({target:document.getElementById("fovMap"),width:f,height:g});m.tileSize=m.calculateTileSize();const y=new l((t=>{const e=t[0],i=t[1];if(e<0||e>=f||i<0||i>=g)return!1;const n=d[i][e];return m.setTile(e,i,n),"#"!==n}),20),v=[5,5],b=d[v[1]];d[v[1]]=b.slice(0,v[0])+"@"+b.slice(v[0]+1),y.look(v);const w=document.getElementById("simpleEventList"),S=document.getElementById("complexEventList"),E=(t,e)=>{const i=document.createElement("li");i.appendChild(document.createTextNode(t)),e.appendChild(i)},O=new o({type:"simple"}),x={act:()=>E("The Goblin goblins!",w)},T={act:()=>E("The cat meows!",w)};O.add(x),O.add(T),O.add({callback:()=>E("Drip drip goes the faucet.",w),repeats:!0}),O.add({callback:()=>E("Rushing wind! Oh no!",w),repeats:2}),O.add({callback:()=>E("The house of cards falls over. Whoops!",w)});for(let t=0;t<20;t++)O.advance();const k=new o({type:"complex"}),L={act:()=>E("Fast cat nyooms!",S)},_={act:()=>E("Slow ogre is sloooow",S)};k.add({actor:L,delay:1}),k.add({actor:_,delay:5}),k.add({callback:()=>E("The mail has just arrived. Sweet!",S),delay:16});for(let t=0;t<20;t++)k.advance();d[v[1]]=b.slice(0,v[0])+"."+b.slice(v[0]+1);const z=new n({target:document.getElementById("pathDisplay"),width:f,height:g});z.tileSize=z.calculateTileSize(),d.forEach(((t,e)=>t.split("").forEach(((t,i)=>{z.setTile(i,e,t)}))));const P=[1,8];new a({canPass:([t,e])=>!(t<0||t>=f||e<0||e>=g)&&"#"!==d[e][t]}).findPath(P,[15,8],!1).forEach((([t,e])=>{z.updateTile(t,e,{content:"X",className:"pathMarker"})})),z.updateTile(P[0],P[1],"@"),window.addEventListener("resize",(()=>{p.tileSize=p.calculateTileSize(),m.tileSize=m.calculateTileSize(),z.tileSize=z.calculateTileSize()})),new n({target:document.getElementById("wfcDisplay"),width:f,height:g})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9kaXNwbGF5L1RpbGUuanMiLCJ3ZWJwYWNrOi8vcm9ndWVsaWtlLXB1bXBraW4tcGF0Y2gvLi9saWIvZGlzcGxheS9EaXNwbGF5LmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL2Rpc3BsYXkvRGlzcGxheVN0eWxlLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL2V2ZW50L0V2ZW50TWFuYWdlci5qcyIsIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9yYW5kb20vUmFuZG9tLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL3BhdGhmaW5kZXIvUGF0aEZpbmRlci5qcyIsIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9mb3YvRk9WLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vZG9jcy9zY3JpcHQuanMiXSwibmFtZXMiOlsiX19hc3NpZ24iLCJPYmplY3QiLCJhc3NpZ24iLCJ0IiwicyIsImkiLCJuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwidGhpcyIsImJhc2VDbGFzc05hbWUiLCJUaWxlIiwidGlsZU9wdGlvbnMiLCJwb3NpdGlvbiIsInRpbGVTaXplIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIl9hIiwiY29udGVudCIsIl9iIiwiY29sb3IiLCJfYyIsImJhY2tncm91bmQiLCJfZCIsImNsYXNzTmFtZSIsIl9lIiwiZSIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIl9fcmVzdCIsInRpbGVXaWR0aCIsInRpbGVIZWlnaHQiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsIl9jb250ZW50Iiwic2V0IiwibmV3Q29udGVudCIsImNvbmZpcm1Db250ZW50RWxlbWVudCIsImNvbnRlbnRFbGVtZW50IiwiaW5uZXJIVE1MIiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwiYXBwZW5kQ2hpbGQiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiX2JhY2tncm91bmQiLCJuZXdCYWNrZ3JvdW5kIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJfY29sb3IiLCJuZXdjb2xvciIsIl9wb3NpdGlvbiIsImxlZnQiLCJ4IiwidG9wIiwieSIsIl90aWxlV2lkdGgiLCJuZXdXaWR0aCIsIndpZHRoIiwiX3RpbGVIZWlnaHQiLCJuZXdIZWlnaHQiLCJoZWlnaHQiLCJqb2luIiwibmV3Q2xhc3MiLCJzcGxpdCIsImlsIiwiciIsIkFycmF5IiwiayIsImEiLCJqIiwiamwiLCJfX3NwcmVhZEFycmF5cyIsIl9jbGFzc0xpc3QiLCJuZXdDbGFzc0xpc3QiLCJfdGhpcyIsImV2ZXJ5IiwibmFtZSIsImluY2x1ZGVzIiwicmVtb3ZlIiwiZmlsdGVyIiwidHJpbSIsInNldE9wdGlvbnMiLCJuZXdPcHRpb25zIiwidXBkYXRlT3B0aW9ucyIsIkRpc3BsYXkiLCJwYXJhbWV0ZXJzIiwidGFyZ2V0Iiwic2V0QXR0cmlidXRlIiwiZGltZW5zaW9ucyIsImFwcGx5RGVmYXVsdFN0eWxlcyIsIl90aWxlU2l6ZSIsIm5ld1RpbGVTaXplIiwiZm9udFNpemUiLCJ0aWxlcyIsImZvckVhY2giLCJ0aWxlIiwicmVzZXRTaXplIiwiX3dpZHRoIiwiX2hlaWdodCIsIm5ld0RpbWVuc2lvbnMiLCJhbGxvY2F0ZURpc3BsYXkiLCJtb3ZlVG9DZW50ZXIiLCJjZW50ZXJEaXNwbGF5IiwiY2VudGVyUG9zaXRpb24iLCJ1bmRlZmluZWQiLCJ4UGVyY2VudCIsInlQZXJjZW50IiwidHJhbnNmb3JtIiwibmV3VGlsZSIsInB1c2giLCJnZXRUaWxlIiwiaW5kZXgiLCJmb3JtYXRUaWxlT3B0aW9ucyIsImlucHV0IiwiSFRNTEVsZW1lbnQiLCJzZXRUaWxlIiwidXBkYXRlVGlsZSIsImNhbGN1bGF0ZURpbWVuc2lvbnMiLCJjbGllbnRSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50V2lkdGgiLCJNYXRoIiwiYWJzIiwicmlnaHQiLCJjbGllbnRIZWlnaHQiLCJib3R0b20iLCJmbG9vciIsImNhbGN1bGF0ZVRpbGVTaXplIiwic2l6ZSIsIm1heFRpbGVTaXplIiwibWluIiwic3R5bGVzSWQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlcyIsImlkIiwidHlwZSIsImNyZWF0ZVRleHROb2RlIiwiaGVhZCIsImZpcnN0U3R5bGUiLCJxdWVyeVNlbGVjdG9yIiwiaW5zZXJ0QmVmb3JlIiwiRXZlbnRNYW5hZ2VyIiwicXVldWUiLCJ0aW1lIiwiYWRkZWRFdmVudCIsImV2ZW50IiwiRnVuY3Rpb24iLCJjYWxsYmFjayIsImFjdG9yIiwicmVwZWF0cyIsImRlbGF5Iiwic2NoZWR1bGVGb3IiLCJzcGxpY2UiLCJhZHZhbmNlIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJ0aGlzRXZlbnQiLCJib2R5IiwiZiIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsIm5leHQiLCJ2ZXJiIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJkb25lIiwidmFsdWUiLCJwb3AiLCJzdGVwIiwiX19nZW5lcmF0b3IiLCJFcnJvciIsInNoaWZ0IiwiYWN0IiwiUCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJ0aGVuIiwibWF0Y2hlcyIsInJldmVyc2UiLCJtYXRjaCIsIlJhbmRvbSIsInNlZWQiLCJiYXNlIiwiRGF0ZSIsIm5vdyIsIndleWwiLCJnZXRSYW5kb20iLCJnZXROdW1iZXIiLCJtYXgiLCJpbnRlZ2VyIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiY2VpbCIsImdldFJhbmRvbUVsZW1lbnQiLCJhcnJheSIsImdldFdlaWdodGVkRWxlbWVudCIsInRvdGFsV2VpZ2h0Iiwid2VpZ2h0IiwicmFuZG9tTnVtYmVyIiwib3B0aW9uIiwiUGF0aEZpbmRlciIsImNhblBhc3MiLCJtZXRyaWMiLCJtYXhJdGVyYXRpb25zIiwicG9zaXRpb24xIiwicG9zaXRpb24yIiwiZmluZFBhdGgiLCJzdGFydFBvc2l0aW9uIiwiZW5kUG9zaXRpb24iLCJvcnRob2dvbmFsT25seSIsInJvdXRlIiwiaXRlcmF0aW9ucyIsImNsb3NlZExpc3QiLCJzdGVwcyIsImRpc3RhbmNlRnJvbUdvYWwiLCJwcmV2aW91c0xvY2F0aW9uIiwib3Blbkxpc3QiLCJzdGVwU2l6ZUFyciIsImNvbnRhaW5zIiwibG9jYXRpb24iLCJuZXdQb3NpdGlvbiIsInN0ZXBTaXplIiwiaW5DbG9zZWRMaXN0QWxyZWFkeSIsImdldExvY2F0aW9uIiwiaW5PcGVuTGlzdEFscmVhZHkiLCJzb3J0IiwiYiIsImlzRXF1YWwiLCJsb2NhdGlvbkxpc3QiLCJ0ZXN0TG9jYXRpb24iLCJpc0FycmF5Iiwic29tZSIsInRlc3RQb3NpdGlvbiIsIl9pIiwibG9jYXRpb25MaXN0XzEiLCJsb2NhdGlvbl8xIiwiRk9WIiwiY2FuU2VlIiwicmFuZ2UiLCJsb29rIiwibG9va1JhbmdlT3ZlcnJpZGUiLCJzaGFkb3dzIiwibmV3U2hhZG93cyIsImRpc3RhbmNlIiwic2lkZSIsImVkZ2UiLCJsb29rUG9zIiwiYW5nbGVUbyIsImFuZ3VsYXJTaXplIiwiaW5TaGFkb3dzIiwiaXNJblNoYWRvd3MiLCJzdGFydEFuZ2xlIiwiZW5kQW5nbGUiLCJjb21iaW5lU2hhZG93IiwiYW5nbGUiLCJhdGFuMiIsIlBJIiwiYXRhbiIsInNxcnQiLCJwb3ciLCJuZWdBbmdsZSIsInNoYWRvd3NfMSIsInNoYWRvdyIsIm5ld1NoYWRvdyIsIm92ZXJMYXBBcnIiLCJtYWluU2hhZG93IiwicGFyYW1zIiwiZGlzcGxheSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyYW5kb21TdHVmZiIsIm9wdGlvbmFsU2VlZCIsInJhbmRvbSIsIm5vVGhhbmtzTm90SW50ZWdlciIsInJhbmRvbUVsZW1lbnQiLCJyYW5kb21XZWlnaHRlZEVsZW1lbnQiLCJyZXN1bHRzTGlzdCIsImxhc3RDaGlsZCIsImF0dGFjaFJlc3VsdCIsImxpIiwidGV4dCIsInRvU3RyaW5nIiwiY29sb3JEaXNwbGF5IiwibWFwIiwiZm92RGlzcGxheSIsImZvdiIsInBsYXllclBvcyIsIm1hcFJvdyIsInNsaWNlIiwic2ltcGxlTGlzdCIsImNvbXBsZXhMaXN0Iiwic2hvd0FjdGlvbiIsImFjdGlvbiIsImxpc3QiLCJsaXN0SXRlbSIsInNpbXBsZUV2ZW50cyIsInNpbXBsZUdvYmxpbiIsInNpbXBsZUNhdCIsImNvbXBsZXhFdmVudHMiLCJmYXN0Q2F0Iiwic2xvd09ncmUiLCJwYXRoRGlzcGxheSIsInJvdyIsInN0YXJ0UG9zIl0sIm1hcHBpbmdzIjoibUJBQUEsSUFBSUEsRUFBc0MsV0FTdEMsT0FSQUEsRUFBV0MsT0FBT0MsUUFBVSxTQUFTQyxHQUNqQyxJQUFLLElBQUlDLEVBQUdDLEVBQUksRUFBR0MsRUFBSUMsVUFBVUMsT0FBUUgsRUFBSUMsRUFBR0QsSUFFNUMsSUFBSyxJQUFJSSxLQURUTCxFQUFJRyxVQUFVRixHQUNPSixPQUFPUyxVQUFVQyxlQUFlQyxLQUFLUixFQUFHSyxLQUN6RE4sRUFBRU0sR0FBS0wsRUFBRUssSUFFakIsT0FBT04sSUFFS1UsTUFBTUMsS0FBTVAsWUFvQjVCUSxFQUFnQixlQTZNcEIsUUEzTTBCLFdBQ3RCLFNBQVNDLEVBQUtDLEVBQWFDLEVBQVVDLEdBRWpDTCxLQUFLTSxRQUFVQyxTQUFTQyxjQUFjLE9BQ3RDUixLQUFLTSxRQUFRRyxVQUFVQyxJQUFJVCxHQUUzQixJQUFJVSxFQUFLUixFQUFZUyxRQUFTQSxPQUFpQixJQUFQRCxFQUFnQixHQUFLQSxFQUFJRSxFQUFLVixFQUFZVyxNQUFPQSxPQUFlLElB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dGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxyXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xyXG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxudmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcbnZhciBiYXNlQ2xhc3NOYW1lID0gXCJwdW1wa2luLXRpbGVcIjtcclxuLyoqIENsYXNzIHRvIGtlZXAgdHJhY2sgb2YgZWFjaCBpbmRpdmlkdWFsIHRpbGUgaW4gdGhlIGRpc3BsYXkgKi9cclxudmFyIFRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUaWxlKHRpbGVPcHRpb25zLCBwb3NpdGlvbiwgdGlsZVNpemUpIHtcclxuICAgICAgICAvLyBDcmVhdGUgbmVjZXNzYXJ5IGVsZW1lbnRzIGFuZCBhcHBseSBjbGFzc2VzXHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoYmFzZUNsYXNzTmFtZSk7XHJcbiAgICAgICAgLy8gU2V0IHRpbGUgY29udGVudCBhbmQgY29sb3VyIHNjaGVtZVxyXG4gICAgICAgIHZhciBfYSA9IHRpbGVPcHRpb25zLmNvbnRlbnQsIGNvbnRlbnQgPSBfYSA9PT0gdm9pZCAwID8gJycgOiBfYSwgX2IgPSB0aWxlT3B0aW9ucy5jb2xvciwgY29sb3IgPSBfYiA9PT0gdm9pZCAwID8gJycgOiBfYiwgX2MgPSB0aWxlT3B0aW9ucy5iYWNrZ3JvdW5kLCBiYWNrZ3JvdW5kID0gX2MgPT09IHZvaWQgMCA/ICcnIDogX2MsIF9kID0gdGlsZU9wdGlvbnMuY2xhc3NOYW1lLCBjbGFzc05hbWUgPSBfZCA9PT0gdm9pZCAwID8gJycgOiBfZCwgX2UgPSB0aWxlT3B0aW9ucy5jbGFzc0xpc3QsIGNsYXNzTGlzdCA9IF9lID09PSB2b2lkIDAgPyBbXSA6IF9lLCByZXN0ID0gX19yZXN0KHRpbGVPcHRpb25zLCBbXCJjb250ZW50XCIsIFwiY29sb3JcIiwgXCJiYWNrZ3JvdW5kXCIsIFwiY2xhc3NOYW1lXCIsIFwiY2xhc3NMaXN0XCJdKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kO1xyXG4gICAgICAgIGlmIChjbGFzc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdCA9IGNsYXNzTGlzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZXQgdGhlIHRpbGUgc2l6ZVxyXG4gICAgICAgIHRoaXMudGlsZVdpZHRoID0gKHRpbGVTaXplID09PSBudWxsIHx8IHRpbGVTaXplID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0aWxlU2l6ZS50aWxlV2lkdGgpID8gdGlsZVNpemUudGlsZVdpZHRoIDogMTY7XHJcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gKHRpbGVTaXplID09PSBudWxsIHx8IHRpbGVTaXplID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0aWxlU2l6ZS50aWxlSGVpZ2h0KSA/IHRpbGVTaXplLnRpbGVIZWlnaHQgOiB0aGlzLnRpbGVXaWR0aDtcclxuICAgICAgICAvLyBTZXQgdGhlIHRpbGUgcG9zaXRpb25cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIHRpbGUgY29udGVudHMgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRlbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdDb250ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb250ZW50RWxlbWVudCBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3RcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtQ29udGVudEVsZW1lbnQoKTtcclxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdGhlIG5ldyBhbmQgb2xkIGNvbnRlbnQgZG9uJ3QgbWF0Y2hcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnQgIT09IG5ld0NvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIGNvbnRlbnQgaXMgYSBzdHJpbmcsIGp1c3QgYWRkIGl0XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5pbm5lckhUTUwgPSBuZXdDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQgaXMgYW4gZWxlbWVudCwgZW1wdHkgdGhlIHRpbGUgYW5kIGFwcGVuZCB0aGUgbmV3IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLmNvbnRlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmNvbnRlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKG5ld0NvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwiYmFja2dyb3VuZFwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIGJhY2tncm91bmQgY29sb3VyICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYWNrZ3JvdW5kO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3QmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgICBpZiAobmV3QmFja2dyb3VuZCAhPT0gdGhpcy5fYmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFja2dyb3VuZCA9IG5ld0JhY2tncm91bmQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbmV3QmFja2dyb3VuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaWxlLnByb3RvdHlwZSwgXCJjb2xvclwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIGNvbG9yIGNvbG91ciAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdjb2xvcikge1xyXG4gICAgICAgICAgICBpZiAobmV3Y29sb3IgIT09IHRoaXMuX2NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2xvciA9IG5ld2NvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmNvbG9yID0gbmV3Y29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHBvc2l0aW9uICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gX19hc3NpZ24oe30sIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSBwb3NpdGlvbi54ICogdGhpcy50aWxlV2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBwb3NpdGlvbi55ICogdGhpcy50aWxlSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaWxlLnByb3RvdHlwZSwgXCJ0aWxlV2lkdGhcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRpbGUgd2lkdGggKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbGVXaWR0aDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbGVXaWR0aCA9IG5ld1dpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSBuZXdXaWR0aCArIFwicHhcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwidGlsZUhlaWdodFwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIHRpbGUgaGVpZ2h0ICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aWxlSGVpZ2h0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbGVIZWlnaHQgPSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbGUucHJvdG90eXBlLCBcImNsYXNzTmFtZVwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIGNsYXNzbmFtZSAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGFzc0xpc3Quam9pbihcIiBcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdDbGFzcykge1xyXG4gICAgICAgICAgICBpZiAobmV3Q2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gbmV3Q2xhc3Muc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaWxlLnByb3RvdHlwZSwgXCJjbGFzc0xpc3RcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRoZSBsaXN0IG9mIGNsYXNzZXMgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXlzKFtiYXNlQ2xhc3NOYW1lXSwgdGhpcy5fY2xhc3NMaXN0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld0NsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2xhc3NMaXN0ID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gT25seSBhZGQvcmVtb3ZlIGNsYXNzZXMgaWYgdGhlIHR3byBsaXN0cyBhcmUgYWN0dWFsbHkgZGlmZmVyZW50XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdWdseSwgYnV0IGNoYW5naW5nIHRoZSBET00gaXMgbW9yZSBleHBlbnNpdmUgdGhhbiB0aGlzIGlzLlxyXG4gICAgICAgICAgICBpZiAobmV3Q2xhc3NMaXN0Lmxlbmd0aCAhPT0gdGhpcy5fY2xhc3NMaXN0Lmxlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgIW5ld0NsYXNzTGlzdC5ldmVyeShmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gX3RoaXMuX2NsYXNzTGlzdC5pbmNsdWRlcyhuYW1lKTsgfSkgfHxcclxuICAgICAgICAgICAgICAgICF0aGlzLl9jbGFzc0xpc3QuZXZlcnkoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG5ld0NsYXNzTGlzdC5pbmNsdWRlcyhuYW1lKTsgfSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jbGFzc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QpLnJlbW92ZS5hcHBseShfYSwgdGhpcy5fY2xhc3NMaXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NsYXNzTGlzdCA9IG5ld0NsYXNzTGlzdC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudHJpbSgpICYmIHggIT09IGJhc2VDbGFzc05hbWU7IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0NsYXNzTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHVzaW5nIHRoZSBnZXR0ZXIsIHRvIGVuc3VyZSBiYXNlQ2xhc3NOYW1lIGlzIHN0aWxsIG9uIHRoZSBsaXN0LlxyXG4gICAgICAgICAgICAgICAgICAgIChfYiA9IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QpLmFkZC5hcHBseShfYiwgdGhpcy5jbGFzc0xpc3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqIFNldCBvcHRpb25zIGZvciB0aGUgdGlsZSAqL1xyXG4gICAgVGlsZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChuZXdPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hID0gbmV3T3B0aW9ucy5jb250ZW50LCBjb250ZW50ID0gX2EgPT09IHZvaWQgMCA/IFwiXCIgOiBfYSwgX2IgPSBuZXdPcHRpb25zLmJhY2tncm91bmQsIGJhY2tncm91bmQgPSBfYiA9PT0gdm9pZCAwID8gXCJcIiA6IF9iLCBfYyA9IG5ld09wdGlvbnMuY29sb3IsIGNvbG9yID0gX2MgPT09IHZvaWQgMCA/IFwiXCIgOiBfYywgX2QgPSBuZXdPcHRpb25zLmNsYXNzTmFtZSwgY2xhc3NOYW1lID0gX2QgPT09IHZvaWQgMCA/IFwiXCIgOiBfZCwgY2xhc3NMaXN0ID0gbmV3T3B0aW9ucy5jbGFzc0xpc3Q7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICBpZiAoY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gY2xhc3NMaXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIG9wdGlvbnMgZm9yIHRoZSB0aWxlXHJcbiAgICAgKi9cclxuICAgIFRpbGUucHJvdG90eXBlLnVwZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiAobmV3T3B0aW9ucykge1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gbmV3T3B0aW9ucy5jb250ZW50LCBiYWNrZ3JvdW5kID0gbmV3T3B0aW9ucy5iYWNrZ3JvdW5kLCBjb2xvciA9IG5ld09wdGlvbnMuY29sb3IsIGNsYXNzTmFtZSA9IG5ld09wdGlvbnMuY2xhc3NOYW1lLCBjbGFzc0xpc3QgPSBuZXdPcHRpb25zLmNsYXNzTGlzdDtcclxuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBiYWNrZ3JvdW5kICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgY29sb3IgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhc3NMaXN0ICYmIGNsYXNzTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gY2xhc3NMaXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgY2xhc3NOYW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogQ2hlY2sgaWYgYSBjb250ZW50RWxlbWVudCBleGlzdHMsIGFuZCBpZiBpdCBkb2Vzbid0LCBhZGQgaXQgKi9cclxuICAgIFRpbGUucHJvdG90eXBlLmNvbmZpcm1Db250ZW50RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY29udGVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBUaWxlO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBUaWxlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59O1xyXG5pbXBvcnQgVGlsZSBmcm9tICcuL1RpbGUuanMnO1xyXG5pbXBvcnQgY3NzIGZyb20gJy4vRGlzcGxheVN0eWxlLmpzJztcclxuLyoqIERpc3BsYXkgY2xhc3MsIHRvIGNyZWF0ZSBhbmQgY29udHJvbCBhIGRpc3BsYXkgKi9cclxudmFyIERpc3BsYXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKiogQ3JlYXRlIGEgbmV3IERpc3BsYXlcclxuICAgICAqICBAcGFyYW0ge0Rpc3BsYXlQYXJhbXN9IHBhcmFtZXRlcnMgLSBPYmplY3Qgb2YgcGFyYW1ldGVycyB0byBpbml0aWFsaXplIHRoZSBkaXNwbGF5LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBEaXNwbGF5KHBhcmFtZXRlcnMpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gcGFyYW1ldGVycy50YXJnZXQsIF9hID0gcGFyYW1ldGVycy53aWR0aCwgd2lkdGggPSBfYSA9PT0gdm9pZCAwID8gMSA6IF9hLCBfYiA9IHBhcmFtZXRlcnMuaGVpZ2h0LCBoZWlnaHQgPSBfYiA9PT0gdm9pZCAwID8gMSA6IF9iLCB0aWxlV2lkdGggPSBwYXJhbWV0ZXJzLnRpbGVXaWR0aCwgdGlsZUhlaWdodCA9IHBhcmFtZXRlcnMudGlsZUhlaWdodCwgcmVzdCA9IF9fcmVzdChwYXJhbWV0ZXJzLCBbXCJ0YXJnZXRcIiwgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcInRpbGVXaWR0aFwiLCBcInRpbGVIZWlnaHRcIl0pO1xyXG4gICAgICAgIC8vIFNldCB0aGUgdGFyZ2V0XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0LmNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwicHVtcGtpbi1jb250YWluZXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5jbGFzc05hbWUgPSBcInB1bXBraW4tY29udGFpbmVyXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZWxlbWVudCBmb3IgdGhlIGRpc3BsYXlcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJwdW1wa2luLWRpc3BsYXlcIjtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIC8vIFNldCB0aGUgZGlzcGxheSBkaW1lbnNpb25zXHJcbiAgICAgICAgdGhpcy5kaW1lbnNpb25zID0geyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XHJcbiAgICAgICAgdGhpcy50aWxlU2l6ZSA9IHtcclxuICAgICAgICAgICAgdGlsZVdpZHRoOiAodGlsZVdpZHRoKSA/IHRpbGVXaWR0aCA6IDE2LFxyXG4gICAgICAgICAgICB0aWxlSGVpZ2h0OiAodGlsZUhlaWdodCkgPyB0aWxlSGVpZ2h0IDogKHRpbGVXaWR0aCkgPyB0aWxlV2lkdGggOiAxNlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQWRkIHN0eWxlIHRvIHRoZSBwYWdlIGZvciB0aGUgZGlzcGxheVxyXG4gICAgICAgIHRoaXMuYXBwbHlEZWZhdWx0U3R5bGVzKCk7XHJcbiAgICAgICAgLy8gQXBwZW5kIHRvIHRoZSBjb250YWluZXIgZWxlbWVudFxyXG4gICAgICAgIHRoaXMudGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGlzcGxheS5wcm90b3R5cGUsIFwidGlsZVNpemVcIiwge1xyXG4gICAgICAgIC8qKiBUaWxlIHNpemUgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbGVTaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VGlsZVNpemUpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICB0aGlzLl90aWxlU2l6ZSA9IG5ld1RpbGVTaXplO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBuZXdUaWxlU2l6ZS50aWxlSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAoX2EgPSB0aGlzLnRpbGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChmdW5jdGlvbiAodGlsZSkge1xyXG4gICAgICAgICAgICAgICAgdGlsZS50aWxlV2lkdGggPSBuZXdUaWxlU2l6ZS50aWxlV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aWxlLnRpbGVIZWlnaHQgPSBuZXdUaWxlU2l6ZS50aWxlSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGlsZS5wb3NpdGlvbiA9IHRpbGUucG9zaXRpb247XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0U2l6ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIDtcclxuICAgIDtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEaXNwbGF5LnByb3RvdHlwZSwgXCJkaW1lbnNpb25zXCIsIHtcclxuICAgICAgICAvKiogR2V0IG9yIHNldCB0aGUgZGlzcGxheSBkaW1lbnNpb25zICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHdpZHRoOiB0aGlzLl93aWR0aCwgaGVpZ2h0OiB0aGlzLl9oZWlnaHQgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld0RpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG5ld0RpbWVuc2lvbnMud2lkdGggIT09IHRoaXMuX3dpZHRoICYmIG5ld0RpbWVuc2lvbnMuaGVpZ2h0ICE9PSB0aGlzLl9oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gbmV3RGltZW5zaW9ucy53aWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IG5ld0RpbWVuc2lvbnMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGRpc3BsYXkgdG8gYWNjb21vZGF0ZSB0aGUgbmV3IHNpemVcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVEaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9DZW50ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIDtcclxuICAgIDtcclxuICAgIC8qKiBSZXNldCBkaXNwbGF5IGVsZW1lbnQgc2l6ZSAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUucmVzZXRTaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl93aWR0aCAmJiB0aGlzLl9oZWlnaHQgJiYgdGhpcy50aWxlU2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLl93aWR0aCAqIHRoaXMudGlsZVNpemUudGlsZVdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5faGVpZ2h0ICogdGhpcy50aWxlU2l6ZS50aWxlSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUG9zaXRpb24gdG8gY2VudGVyIHRoZSBkaXNwbGF5IHZpZXcgb24gKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmNlbnRlckRpc3BsYXkgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgeSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclBvc2l0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXJQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgICAgICB5OiB5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW92ZVRvQ2VudGVyKCk7XHJcbiAgICB9O1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUubW92ZVRvQ2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNlbnRlclBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciB4UGVyY2VudCA9ICh0aGlzLmNlbnRlclBvc2l0aW9uLnggKyAwLjUpIC8gdGhpcy5kaW1lbnNpb25zLndpZHRoO1xyXG4gICAgICAgICAgICB2YXIgeVBlcmNlbnQgPSAodGhpcy5jZW50ZXJQb3NpdGlvbi55ICsgMC41KSAvIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIC14UGVyY2VudCAqIDEwMCArIFwiJSxcIiArIC15UGVyY2VudCAqIDEwMCArIFwiJSlcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogQnVpbGQgdGhlIGFycmF5IG9mIHRpbGVzIGFuZCBhdHRhY2ggdGhlbSB0byB0aGUgZGlzcGxheSAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUuYWxsb2NhdGVEaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gU3RhcnQgYSBmcmVzaCB0aWxlcyBhcnJheVxyXG4gICAgICAgIGlmICh0aGlzLnRpbGVzKSB7XHJcbiAgICAgICAgICAgIC8vIEVtcHR5IGRpc3BsYXkgaWYgaXQgaGFzIGNvbnRlbnRzIGFscmVhZHlcclxuICAgICAgICAgICAgdGhpcy50aWxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKHRpbGUuZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbGVzID0gW107XHJcbiAgICAgICAgLy8gR2VuZXJhdGUgdGlsZXNcclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuX2hlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5fd2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIG5ldyB0aWxlXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VGlsZSA9IG5ldyBUaWxlKHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJyxcclxuICAgICAgICAgICAgICAgIH0sIHsgeDogeCwgeTogeSB9LCB0aGlzLnRpbGVTaXplKTtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgbGlzdCBvZiB0aWxlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aWxlcy5wdXNoKG5ld1RpbGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRvIHRoZSBhY3R1YWwgZGlzcGxheVxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKG5ld1RpbGUuZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIEdldCB0aGUgZGlzcGxheSB0aWxlIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gUG9zaXRpb24gZnJvbSB0aGUgbGVmdCBzaWRlIG9mIHRoZSBkaXNwbGF5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFBvc2l0aW9uIGZyb20gdGhlIHRvcCBvZiB0aGUgZGlzcGxheVxyXG4gICAgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIGlmICh4ID49IDAgJiYgeCA8IHRoaXMuX3dpZHRoICYmIHkgPj0gMCAmJiB5IDwgdGhpcy5faGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHggKyB5ICogdGhpcy5fd2lkdGg7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVzW2luZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBUYWtlIGlucHV0IGFuZCBmb3JtYXQgaW50byBUaWxlT3B0aW9ucyAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUuZm9ybWF0VGlsZU9wdGlvbnMgPSBmdW5jdGlvbiAoaW5wdXQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRlbnQ6IGlucHV0IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlucHV0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY29udGVudDogaW5wdXQgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFNldCBkZXRhaWxzIGZvciB0aGUgc3BlY2lmaWVkIHRpbGUgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLnNldFRpbGUgPSBmdW5jdGlvbiAoeCwgeSwgbmV3T3B0aW9ucykge1xyXG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5nZXRUaWxlKHgsIHkpO1xyXG4gICAgICAgIGlmICh0aWxlKSB7XHJcbiAgICAgICAgICAgIHRpbGUuc2V0T3B0aW9ucyh0aGlzLmZvcm1hdFRpbGVPcHRpb25zKG5ld09wdGlvbnMpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIFVwZGF0ZSBkZXRhaWxzIGZvciB0aGUgc3BlY2lmaWVkIHRpbGUsIHByZXNlcnZpbmcgZXZlcnkgdW5zZXQgcHJvcGVydHkuICovXHJcbiAgICBEaXNwbGF5LnByb3RvdHlwZS51cGRhdGVUaWxlID0gZnVuY3Rpb24gKHgsIHksIG5ld09wdGlvbnMpIHtcclxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuZ2V0VGlsZSh4LCB5KTtcclxuICAgICAgICBpZiAodGlsZSkge1xyXG4gICAgICAgICAgICB0aWxlLnVwZGF0ZU9wdGlvbnModGhpcy5mb3JtYXRUaWxlT3B0aW9ucyhuZXdPcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHaXZlbiB0aGUgc2l6ZSBvZiB0aGUgdGFyZ2V0IGNvbnRhaW5lciwgYW5kIHRoZSB0aWxlIHNpemUsIGRldGVybWluZSB0aGUgbnVtYmVyIG9mIHRpbGVzIG5lZWRlZC4gKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmNhbGN1bGF0ZURpbWVuc2lvbnMgPSBmdW5jdGlvbiAoY2xpZW50UmVjdCkge1xyXG4gICAgICAgIGlmIChjbGllbnRSZWN0ID09PSB2b2lkIDApIHsgY2xpZW50UmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9XHJcbiAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gTWF0aC5hYnMoY2xpZW50UmVjdC5yaWdodCAtIGNsaWVudFJlY3QubGVmdCk7XHJcbiAgICAgICAgdmFyIGNsaWVudEhlaWdodCA9IE1hdGguYWJzKGNsaWVudFJlY3QuYm90dG9tIC0gY2xpZW50UmVjdC50b3ApO1xyXG4gICAgICAgIC8vIFJvdW5kIGRvd247IHdlIGRvIG5vdCB3YW50IHBhcnRpYWwgdGlsZXNcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5mbG9vcihjbGllbnRXaWR0aCAvIHRoaXMudGlsZVNpemUudGlsZVdpZHRoKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLmZsb29yKGNsaWVudEhlaWdodCAvIHRoaXMudGlsZVNpemUudGlsZUhlaWdodClcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHaXZlbiB0aGUgc2l6ZSBvZiB0aGUgdGFyZ2V0IGNvbnRhaW5lciwgYW5kIHRoZSBudW1iZXIgb2YgdGlsZXMsIGRldGVybWluZSB0aGUgdGlsZSBzaXplIG5lZWRlZFxyXG4gICAgICogIFRoaXMgYXNzdW1lcyBzcXVhcmUgdGlsZXMgYXJlIGRlc2lyZWQuXHJcbiAgICAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUuY2FsY3VsYXRlVGlsZVNpemUgPSBmdW5jdGlvbiAoY2xpZW50UmVjdCkge1xyXG4gICAgICAgIGlmIChjbGllbnRSZWN0ID09PSB2b2lkIDApIHsgY2xpZW50UmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9XHJcbiAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gTWF0aC5hYnMoY2xpZW50UmVjdC5yaWdodCAtIGNsaWVudFJlY3QubGVmdCk7XHJcbiAgICAgICAgdmFyIGNsaWVudEhlaWdodCA9IE1hdGguYWJzKGNsaWVudFJlY3QuYm90dG9tIC0gY2xpZW50UmVjdC50b3ApO1xyXG4gICAgICAgIC8vIFRoaXMgY291bGQgcG90ZW50aWFsbHkgZ2l2ZSBhYnN1cmQgcmVzdWx0cywgc28gZ2V0IHRoZSBcIm5haXZlIGZpcnN0LWd1ZXNzXCIgaGVyZVxyXG4gICAgICAgIHZhciBzaXplID0ge1xyXG4gICAgICAgICAgICB0aWxlV2lkdGg6IGNsaWVudFdpZHRoIC8gdGhpcy5kaW1lbnNpb25zLndpZHRoLFxyXG4gICAgICAgICAgICB0aWxlSGVpZ2h0OiBjbGllbnRIZWlnaHQgLyB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBDaG9vc2UgdGhlIGxvd2VzdCBvZiB0aGUgdHdvLiBUaGlzIGlzIHRoZSBtYXhpbXVtIHNxdWFyZSB0aWxlIHNpemUgdGhhdCB3aWxsIGZpdCB0aGUgZ2l2ZW4gZGltZW5zaW9uc1xyXG4gICAgICAgIHZhciBtYXhUaWxlU2l6ZSA9IE1hdGgubWluKHNpemUudGlsZVdpZHRoLCBzaXplLnRpbGVIZWlnaHQpO1xyXG4gICAgICAgIC8vIERvbid0IGJvdGhlciByb3VuZGluZzsgZm9udHMgY2FuIGJlIHByZWNpc2UgbnVtYmVyc1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRpbGVXaWR0aDogbWF4VGlsZVNpemUsXHJcbiAgICAgICAgICAgIHRpbGVIZWlnaHQ6IG1heFRpbGVTaXplXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogQWRkIHRoZSBkZWZhdWx0IHN0eWxlcyB0byB0aGUgaGVhZCBvZiB0aGUgcGFnZS4gKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmFwcGx5RGVmYXVsdFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3R5bGVzSWQgPSBcInB1bXBraW4tZGVmYXVsdC1zdHlsZXNcIjtcclxuICAgICAgICAvLyBDaGVjayB0byBtYWtlIHN1cmUgdGhlIHN0eWxlcyBhcmVuJ3QgYWxyZWFkeSBwcmVzZW50XHJcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdHlsZXNJZCkpIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBzdHlsZSBlbGVtZW50XHJcbiAgICAgICAgICAgIHZhciBzdHlsZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgIHN0eWxlcy5pZCA9IHN0eWxlc0lkO1xyXG4gICAgICAgICAgICBzdHlsZXMudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuICAgICAgICAgICAgc3R5bGVzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGhlYWQgb2YgdGhlIHBhZ2VcclxuICAgICAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkO1xyXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBmaXJzdCBzdHlsZSBvciBsaW5rIGVsZW1lbnQsIGFuZCBpbnNlcnQgaW4gZnJvbnQgb2YgaXRcclxuICAgICAgICAgICAgdmFyIGZpcnN0U3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3R5bGUsIGxpbmtcIik7XHJcbiAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlcywgZmlyc3RTdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEaXNwbGF5O1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBEaXNwbGF5O1xyXG47XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpc3BsYXkuanMubWFwIiwiLy8gRGVmYXVsdCBzdHlsaW5nIGZvciB0aGUgZGlzcGxheS4gVGhpcyBnZXRzIGluc2VydGVkIGludG8gdGhlIGRvY3VtZW50IGhlYWQsIGJlZm9yZSBvdGhlciBzdHlsZXNoZWV0cyAoc28gdGhhdCB5b3UgY2FuIG92ZXJyaWRlIHRoZW0gaWYgZGVzaXJlZCEpXHJcbnZhciBjc3MgPSBcIlxcbi5wdW1wa2luLWNvbnRhaW5lciB7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDtcXG4gICAgY29sb3I6ICNmZmZmZmY7XFxufVxcblxcbi5wdW1wa2luLWRpc3BsYXkge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IDUwJTtcXG4gICAgdG9wOiA1MCU7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xcbn1cXG5cXG4ucHVtcGtpbi10aWxlIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbn1cXG5cXG4ucHVtcGtpbi10aWxlID4gKiB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgbGVmdDogNTAlO1xcbiAgICB0b3A6IDUwJTtcXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XFxuICAgIHotaW5kZXg6IDEwO1xcbn1cXG5cIjtcclxuZXhwb3J0IGRlZmF1bHQgY3NzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaXNwbGF5U3R5bGUuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbi8qKiBFdmVudCBtYW5hZ2VyLCB0byBrZWVwIHRyYWNrIG9mIHR1cm5zICovXHJcbnZhciBFdmVudE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudE1hbmFnZXIocGFyYW1ldGVycykge1xyXG4gICAgICAgIGlmICghcGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDtcclxuICAgICAgICB2YXIgX2EgPSBwYXJhbWV0ZXJzLnR5cGUsIHR5cGUgPSBfYSA9PT0gdm9pZCAwID8gXCJzaW1wbGVcIiA6IF9hO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xyXG4gICAgICAgIHRoaXMudGltZSA9IDA7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKiogQWRkIGFuIGV2ZW50IHRvIHRoZSBxdWV1ZSAqL1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoYWRkZWRFdmVudCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHt9O1xyXG4gICAgICAgIC8vIERldGVybWluZSB0eXBlIG9mIHRoZSBpbnB1dCwgYW5kIGhhbmRsZSBhY2NvcmRpbmdseVxyXG4gICAgICAgIGlmIChhZGRlZEV2ZW50IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgZXZlbnQuY2FsbGJhY2sgPSBhZGRlZEV2ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChcImFjdFwiIGluIGFkZGVkRXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQuYWN0b3IgPSBhZGRlZEV2ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihldmVudCwgYWRkZWRFdmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc3VtZSByZXBlYXRpbmcgaWYgYW4gYWN0b3Igd2FzIHByb3ZpZGVkXHJcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudC5yZXBlYXRzID09PSBcInVuZGVmaW5lZFwiICYmIGV2ZW50LmFjdG9yKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnJlcGVhdHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDb21wbGV4IGV2ZW50IHF1ZXVlIHVzZXMgZGVsYXkgdGltZSBhIGJpdCBiZXR0ZXJcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBcImNvbXBsZXhcIikge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5kZWxheSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNjaGVkdWxlRm9yID0gZXZlbnQuZGVsYXkgKyB0aGlzLnRpbWU7XHJcbiAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZXZlbnQgYXQgdGhlIGFwcHJvcHJpYXRlIHRpbWVcclxuICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID09PSAwIHx8IHRoaXMucXVldWVbdGhpcy5xdWV1ZS5sZW5ndGggLSAxXS50aW1lIDw9IHNjaGVkdWxlRm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBzY2hlZHVsZUZvclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucXVldWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZWR1bGVGb3IgPCB0aGlzLnF1ZXVlW2ldLnRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zcGxpY2UoaSwgMCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogc2NoZWR1bGVGb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gU2ltcGxlLCBubyB3ZWlyZCB0aW1lIHNoaXRcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgICAgIHRpbWU6IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBSdW4gdGhlIG5leHQgZXZlbnQgKi9cclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUuYWR2YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzRXZlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbmZpcm0gaWYgdGhlcmUgaXMgYW55dGhpbmcgaW4gdGhlIHF1ZXVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXZlbnQgcXVldWUgaXMgZW1wdHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNFdmVudCA9IHRoaXMucXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGltZSA9IHRoaXNFdmVudC50aW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiByZXBlYXRzIGlzIGEgbnVtYmVyLCByZWR1Y2UgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc0V2ZW50LmV2ZW50LnJlcGVhdHMgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNFdmVudC5ldmVudC5yZXBlYXRzLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgbmVlZHMgdG8gcmVwZWF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzRXZlbnQuZXZlbnQucmVwZWF0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYWRkIHRvIHRoZSBxdWV1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpc0V2ZW50LmV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNFdmVudC5ldmVudC5jYWxsYmFjaykgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXNFdmVudC5ldmVudC5jYWxsYmFjaygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzRXZlbnQuZXZlbnQuYWN0b3IpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzRXZlbnQuZXZlbnQuYWN0b3IuYWN0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZW1vdmUgYWN0b3IgZnJvbSB0aGUgZXZlbnQgcXVldWUgKi9cclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGFjdG9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucXVldWUuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5ldmVudC5hY3RvciA9PT0gYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZXZlcnNlIG1hdGNoZXMgKHdvcmsgZnJvbSB0aGUgZW5kIGZpcnN0KVxyXG4gICAgICAgIG1hdGNoZXMucmV2ZXJzZSgpO1xyXG4gICAgICAgIC8vIFJlbW92ZSBlYWNoIG1hdGNoXHJcbiAgICAgICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChtYXRjaCkge1xyXG4gICAgICAgICAgICBfdGhpcy5xdWV1ZS5zcGxpY2UobWF0Y2gsIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudE1hbmFnZXIucHJvdG90eXBlLCBcImxlbmd0aFwiLCB7XHJcbiAgICAgICAgLyoqIERldGVybWluZSB0aGUgbnVtYmVyIG9mIHF1ZXVlZCBldmVudHMgaW4gdGhlIHF1ZXVlLiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEV2ZW50TWFuYWdlcjtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgRXZlbnRNYW5hZ2VyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudE1hbmFnZXIuanMubWFwIiwiLyoqIFJhbmRvbSBnZW5lcmF0b3IgKi9cclxudmFyIFJhbmRvbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJhbmRvbShzZWVkLCBiYXNlKSB7XHJcbiAgICAgICAgaWYgKCFzZWVkKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBzZWVkIGZyb20gbWlsbGlzZWNvbmRzIHNpbmNlIEphbiAxc3QsIDE5NzBcclxuICAgICAgICAgICAgc2VlZCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VlZCA9IE1hdGguZmxvb3Ioc2VlZCk7XHJcbiAgICAgICAgdGhpcy53ZXlsID0gMDtcclxuICAgICAgICB0aGlzLnggPSAwO1xyXG4gICAgICAgIHRoaXMuYmFzZSA9IChiYXNlKSA/IGJhc2UgOiAxMDAwMDA7XHJcbiAgICAgICAgLy8gUnVuIGl0IGEgY291cGxlIG9mIHRpbWVzLCBpbiBjYXNlIHRoZSBzZWVkIGlzbid0IHRoYXQgZ29vZC5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRSYW5kb20oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKiogR2VuZXJhdGUgYSByYW5kb20gbnVtYmVyIGZyb20gMCA8PSBudW1iZXIgPCAxICovXHJcbiAgICAvLyBBbiBhdHRlbXB0IHRvIHJlcHJvZHVjZSBzb21ldGhpbmcgcmVzZW1ibGluZyB0aGUgTWlkZGxlIFNxdWFyZSBXZXlsIFNlcXVlbmNlIFBSTkdcclxuICAgIC8vIFNlZSBXaWR5bnNraSAoMjAxNykgaHR0cHM6Ly9hcnhpdi5vcmcvYWJzLzE3MDQuMDAzNTh2NVxyXG4gICAgLy8gVGhlIGFib3ZlIGFsZ29yaXRobSB1c2VzIHVuc2lnbmVkIGludHMuIEpTIHVzZXMgc2lnbmVkIGZsb2F0cy4gRnVydGhlciB0ZXN0aW5nIHJlcXVpcmVkIHRvIHNlZSB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIGFjdHVhbGx5IGEgcHJvYmxlbS5cclxuICAgIFJhbmRvbS5wcm90b3R5cGUuZ2V0UmFuZG9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMueCAqPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy54ICs9ICh0aGlzLndleWwgKz0gdGhpcy5zZWVkKTtcclxuICAgICAgICAvLyBOb3RlLCA+Pj4gbWFrZXMgdGhlIHNoaWZ0IGJlIHVuc2lnbmVkLiBUaGUgPj4+IDAgYXQgdGhlIGVuZCBmbGlwcyB0aGUgXCJzaWduXCIgYml0IHRvIGJlIHBvc2l0aXZlLCBlbnN1cmluZyBhIG5vbi1uZWdhdGl2ZSByZXN1bHQuXHJcbiAgICAgICAgdGhpcy54ID0gKCh0aGlzLnggPj4+IDMyKSB8ICh0aGlzLnggPDwgMzIpKSA+Pj4gMDtcclxuICAgICAgICByZXR1cm4gKHRoaXMueCAlIHRoaXMuYmFzZSkgLyB0aGlzLmJhc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdldCBhIHJhbmRvbSBudW1iZXIgaW4gYSByYW5nZSAqL1xyXG4gICAgUmFuZG9tLnByb3RvdHlwZS5nZXROdW1iZXIgPSBmdW5jdGlvbiAobWluLCBtYXgsIGludGVnZXIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGludGVnZXIgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIobWluKSAmJiBOdW1iZXIuaXNJbnRlZ2VyKG1heCkpIHtcclxuICAgICAgICAgICAgICAgIGludGVnZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbnRlZ2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZ2V0UmFuZG9tKCkgKiAobWF4ICsgMSAtIG1pbikpICsgTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuZ2V0UmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBHZXQgYSByYW5kb20gZWxlbWVudCBmcm9tIGFuIGFycmF5ICovXHJcbiAgICBSYW5kb20ucHJvdG90eXBlLmdldFJhbmRvbUVsZW1lbnQgPSBmdW5jdGlvbiAoYXJyYXkpIHtcclxuICAgICAgICB2YXIgcmFuZG9tSW5kZXggPSB0aGlzLmdldE51bWJlcigwLCBhcnJheS5sZW5ndGggLSAxLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gYXJyYXlbcmFuZG9tSW5kZXhdO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXQgYSByYW5kb20gZWxlbWVudCwgd2l0aCB3ZWlnaHRzICovXHJcbiAgICBSYW5kb20ucHJvdG90eXBlLmdldFdlaWdodGVkRWxlbWVudCA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgICAgIHZhciB0b3RhbFdlaWdodCA9IDA7XHJcbiAgICAgICAgdmFyIGludGVnZXIgPSB0cnVlO1xyXG4gICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdG90YWxXZWlnaHQgKz0gZWxlbWVudC53ZWlnaHQ7XHJcbiAgICAgICAgICAgIGludGVnZXIgPSBpbnRlZ2VyICYmIE51bWJlci5pc0ludGVnZXIoZWxlbWVudC53ZWlnaHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByYW5kb21OdW1iZXIgPSB0aGlzLmdldE51bWJlcigoaW50ZWdlcikgPyAxIDogMCwgdG90YWxXZWlnaHQsIGludGVnZXIpO1xyXG4gICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGFycmF5IHVudGlsIHdlIGhhdmUgYSB3aW5uZXJcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJhbmRvbU51bWJlciAtPSBhcnJheVtpXS53ZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmIChyYW5kb21OdW1iZXIgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRm91bmQgaXQhXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlbaV0ub3B0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vdCBmb3VuZDsgc2VlbXMgbGlrZSBhIHByb2JsZW1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBtYXRjaCBmb3VuZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJhbmRvbTtcclxufSgpKTtcclxuZXhwb3J0IHsgUmFuZG9tIH07XHJcbmV4cG9ydCBkZWZhdWx0IFJhbmRvbTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmFuZG9tLmpzLm1hcCIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59O1xyXG52YXIgX19zcHJlYWRBcnJheXMgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuLyoqIFBhdGhmaW5kZXIgdG8gZGV0ZXJtaW5lIGhvdyB0byB0cmF2ZWwgZnJvbSBvbmUgcG9pbnQgdG8gYW5vdGhlciAqL1xyXG52YXIgUGF0aEZpbmRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhdGhGaW5kZXIocGFyYW1ldGVycykge1xyXG4gICAgICAgIHZhciBjYW5QYXNzID0gcGFyYW1ldGVycy5jYW5QYXNzLCBtZXRyaWMgPSBwYXJhbWV0ZXJzLm1ldHJpYywgbWF4SXRlcmF0aW9ucyA9IHBhcmFtZXRlcnMubWF4SXRlcmF0aW9ucywgd2VpZ2h0ID0gcGFyYW1ldGVycy53ZWlnaHQsIHJlc3QgPSBfX3Jlc3QocGFyYW1ldGVycywgW1wiY2FuUGFzc1wiLCBcIm1ldHJpY1wiLCBcIm1heEl0ZXJhdGlvbnNcIiwgXCJ3ZWlnaHRcIl0pO1xyXG4gICAgICAgIHRoaXMuY2FuUGFzcyA9IGNhblBhc3M7XHJcbiAgICAgICAgaWYgKCFtZXRyaWMpIHtcclxuICAgICAgICAgICAgLy8gRGVmYXVsdCBtZXRyaWMgaXMgTWFuaGF0dGFuIG1ldHJpYywgaWYgbm9uZSBwcm92aWRlZFxyXG4gICAgICAgICAgICBtZXRyaWMgPSBmdW5jdGlvbiAocG9zaXRpb24xLCBwb3NpdGlvbjIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhwb3NpdGlvbjJbMV0gLSBwb3NpdGlvbjFbMV0pICsgTWF0aC5hYnMocG9zaXRpb24yWzBdIC0gcG9zaXRpb24xWzBdKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF3ZWlnaHQpIHtcclxuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byBldmVyeXRoaW5nIGJlaW5nIGxlbmd0aCBvZiAxXHJcbiAgICAgICAgICAgIHdlaWdodCA9IGZ1bmN0aW9uIChwb3NpdGlvbikgeyByZXR1cm4gMTsgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXhJdGVyYXRpb25zID0gbWF4SXRlcmF0aW9ucztcclxuICAgICAgICB0aGlzLm1ldHJpYyA9IG1ldHJpYztcclxuICAgICAgICB0aGlzLndlaWdodCA9IHdlaWdodDtcclxuICAgIH1cclxuICAgIC8qKiBGaW5kIHJvdXRlIGZyb20gc3RhcnRQb3NpdGlvbiB0byBlbmRQb3NpdGlvbiwgdmlhIEEqICovXHJcbiAgICBQYXRoRmluZGVyLnByb3RvdHlwZS5maW5kUGF0aCA9IGZ1bmN0aW9uIChzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiwgb3J0aG9nb25hbE9ubHkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChvcnRob2dvbmFsT25seSA9PT0gdm9pZCAwKSB7IG9ydGhvZ29uYWxPbmx5ID0gZmFsc2U7IH1cclxuICAgICAgICB2YXIgcm91dGUgPSBbXTtcclxuICAgICAgICAvLyBMaW1pdCB0aGUgbG9vcCBzbyBpdCBkb2Vzbid0IGJyZWFrIHRoaW5nc1xyXG4gICAgICAgIHZhciBtYXhJdGVyYXRpb25zID0gKHRoaXMubWF4SXRlcmF0aW9ucykgPyB0aGlzLm1heEl0ZXJhdGlvbnMgOiA0MCAqIHRoaXMubWV0cmljKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKTtcclxuICAgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgbGlzdCwgYW5kIGFkZCB0aGUgc3RhcnQgdG8gaXRcclxuICAgICAgICB2YXIgY2xvc2VkTGlzdCA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IF9fc3ByZWFkQXJyYXlzKHN0YXJ0UG9zaXRpb24pLFxyXG4gICAgICAgICAgICAgICAgc3RlcHM6IDAsXHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZUZyb21Hb2FsOiB0aGlzLm1ldHJpYyhzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiksXHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c0xvY2F0aW9uOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhciBvcGVuTGlzdCA9IFtdO1xyXG4gICAgICAgIC8vIEhhbmRsZSBkaWFnb25hbHNcclxuICAgICAgICB2YXIgc3RlcFNpemVBcnIgPSBbMCwgMSwgMS4yXTtcclxuICAgICAgICAvLyBGaW5kIGEgcGF0aFxyXG4gICAgICAgIHdoaWxlIChpdGVyYXRpb25zIDwgbWF4SXRlcmF0aW9ucyAmJlxyXG4gICAgICAgICAgICAhdGhpcy5jb250YWlucyhjbG9zZWRMaXN0LCBlbmRQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgaXRlcmF0aW9ucysrO1xyXG4gICAgICAgICAgICAvLyBFeHBhbmQgdGhlIG9wZW4gbGlzdFxyXG4gICAgICAgICAgICBjbG9zZWRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gLTE7IGkgPCAyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gLTE7IGogPCAyOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ydGhvZ29uYWxPbmx5ICYmIGkgIT09IDAgJiYgaiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Bvc2l0aW9uID0gW2xvY2F0aW9uLnBvc2l0aW9uWzBdICsgaSwgbG9jYXRpb24ucG9zaXRpb25bMV0gKyBqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjb3N0IC8gc2l6ZSBvZiBzdGVwIGludG8gdGhlIHNxdWFyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcFNpemUgPSBzdGVwU2l6ZUFycltNYXRoLmFicyhpKSArIE1hdGguYWJzKGopXSAqIF90aGlzLndlaWdodChuZXdQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuY2FuUGFzcyhuZXdQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbkNsb3NlZExpc3RBbHJlYWR5ID0gX3RoaXMuZ2V0TG9jYXRpb24oY2xvc2VkTGlzdCwgbmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5PcGVuTGlzdEFscmVhZHkgPSBfdGhpcy5nZXRMb2NhdGlvbihvcGVuTGlzdCwgbmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXcgcG9zaXRpb24gaXMgaW4gbmVpdGhlciBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW5DbG9zZWRMaXN0QWxyZWFkeSAmJiAhaW5PcGVuTGlzdEFscmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5MaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXdQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwczogbG9jYXRpb24uc3RlcHMgKyBzdGVwU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZUZyb21Hb2FsOiBfdGhpcy5tZXRyaWMobmV3UG9zaXRpb24sIGVuZFBvc2l0aW9uKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0xvY2F0aW9uOiBsb2NhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcG9zaXRpb24gaXMgYWxyZWFkeSBpbiB0aGUgbGlzdCwgYWRqdXN0IHRvIGJlIHdoaWNoZXZlciB2ZXJzaW9uIGlzIHNob3J0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbkNsb3NlZExpc3RBbHJlYWR5ICYmIGluQ2xvc2VkTGlzdEFscmVhZHkuc3RlcHMgPiBsb2NhdGlvbi5zdGVwcyArIHN0ZXBTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5DbG9zZWRMaXN0QWxyZWFkeS5zdGVwcyA9IGxvY2F0aW9uLnN0ZXBzICsgc3RlcFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5DbG9zZWRMaXN0QWxyZWFkeS5wcmV2aW91c0xvY2F0aW9uID0gbG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5PcGVuTGlzdEFscmVhZHkgJiYgaW5PcGVuTGlzdEFscmVhZHkuc3RlcHMgPiBsb2NhdGlvbi5zdGVwcyArIHN0ZXBTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5PcGVuTGlzdEFscmVhZHkuc3RlcHMgPSBsb2NhdGlvbi5zdGVwcyArIHN0ZXBTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluT3Blbkxpc3RBbHJlYWR5LnByZXZpb3VzTG9jYXRpb24gPSBsb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFNvcnQgdGhlIG9wZW4gbGlzdCAoaGlnaGVzdCAtLT4gbG93ZXN0KVxyXG4gICAgICAgICAgICBvcGVuTGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiAoYi5zdGVwcyArIGIuZGlzdGFuY2VGcm9tR29hbCkgLSAoYS5zdGVwcyArIGEuZGlzdGFuY2VGcm9tR29hbCk7IH0pO1xyXG4gICAgICAgICAgICAvLyBQb3Agb2ZmIHRoZSBsb3dlc3Qgb3Blbkxpc3QgaXRlbSBhbmQgYWRkIGl0IHRvIHRoZSBjbG9zZWQgbGlzdFxyXG4gICAgICAgICAgICBjbG9zZWRMaXN0LnB1c2gob3Blbkxpc3QucG9wKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGb3VuZCBhIHJvdXRlISBQdXQgdGhlIHBpZWNlcyB0b2dldGhlciBieSB3b3JraW5nIGJhY2t3YXJkc1xyXG4gICAgICAgIHZhciBsb2NhdGlvbiA9IHRoaXMuZ2V0TG9jYXRpb24oY2xvc2VkTGlzdCwgZW5kUG9zaXRpb24pO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKGNsb3NlZExpc3QsIGVuZFBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKChsb2NhdGlvbi5wb3NpdGlvblswXSAhPT0gc3RhcnRQb3NpdGlvblswXSB8fCBsb2NhdGlvbi5wb3NpdGlvblsxXSAhPT0gc3RhcnRQb3NpdGlvblsxXSkgJiYgaXRlcmF0aW9ucyA8IG1heEl0ZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnMrKztcclxuICAgICAgICAgICAgICAgIHJvdXRlLnB1c2gobG9jYXRpb24ucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBsb2NhdGlvbi5wcmV2aW91c0xvY2F0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByb3V0ZS5yZXZlcnNlKCk7XHJcbiAgICB9O1xyXG4gICAgUGF0aEZpbmRlci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChwb3NpdGlvbjEsIHBvc2l0aW9uMikge1xyXG4gICAgICAgIHJldHVybiAocG9zaXRpb24xLnBvc2l0aW9uWzBdID09PSBwb3NpdGlvbjIucG9zaXRpb25bMF0gJiYgcG9zaXRpb24xLnBvc2l0aW9uWzFdID09PSBwb3NpdGlvbjIucG9zaXRpb25bMV0pO1xyXG4gICAgfTtcclxuICAgIFBhdGhGaW5kZXIucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGxvY2F0aW9uTGlzdCwgdGVzdExvY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZXN0TG9jYXRpb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbkxpc3Quc29tZShmdW5jdGlvbiAobG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAobG9jYXRpb24ucG9zaXRpb25bMF0gPT09IHRlc3RMb2NhdGlvblswXSAmJiBsb2NhdGlvbi5wb3NpdGlvblsxXSA9PT0gdGVzdExvY2F0aW9uWzFdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb25MaXN0LnNvbWUoZnVuY3Rpb24gKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNFcXVhbChsb2NhdGlvbiwgdGVzdExvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBhdGhGaW5kZXIucHJvdG90eXBlLmdldExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uTGlzdCwgdGVzdFBvc2l0aW9uKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBsb2NhdGlvbkxpc3RfMSA9IGxvY2F0aW9uTGlzdDsgX2kgPCBsb2NhdGlvbkxpc3RfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uXzEgPSBsb2NhdGlvbkxpc3RfMVtfaV07XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl8xLnBvc2l0aW9uWzBdID09PSB0ZXN0UG9zaXRpb25bMF0gJiYgbG9jYXRpb25fMS5wb3NpdGlvblsxXSA9PT0gdGVzdFBvc2l0aW9uWzFdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYXRpb25fMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXRoRmluZGVyO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBQYXRoRmluZGVyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QYXRoRmluZGVyLmpzLm1hcCIsIi8qKiBGaWVsZCBvZiB2aWV3ICovXHJcbnZhciBGT1YgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKiogQWNjZXB0cyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBhIGxvY2F0aW9uIGlzIHNlZXRocm91Z2ggKi9cclxuICAgIGZ1bmN0aW9uIEZPVihjYW5TZWUsIHJhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5jYW5TZWUgPSBjYW5TZWU7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlID8gcmFuZ2UgOiA4O1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqIERvIHRoZSBGT1YgY2FsY3VsYXRpb24gKi9cclxuICAgIEZPVi5wcm90b3R5cGUubG9vayA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgbG9va1JhbmdlT3ZlcnJpZGUpIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSAobG9va1JhbmdlT3ZlcnJpZGUpID8gbG9va1JhbmdlT3ZlcnJpZGUgOiB0aGlzLnJhbmdlO1xyXG4gICAgICAgIC8vIFNlZSB0aGUgc3RhcnRpbmcgbG9jYXRpb24gKGhvb3JheSEgR3JlYXQgc3RhcnQpXHJcbiAgICAgICAgdGhpcy5jYW5TZWUocG9zaXRpb24pO1xyXG4gICAgICAgIC8vIGNvbnN0IGxvb2tUaWxlczpBcnJheTxUaWxlPiA9IFtdO1xyXG4gICAgICAgIHZhciBzaGFkb3dzID0gW107XHJcbiAgICAgICAgdmFyIG5ld1NoYWRvd3MgPSBbXTtcclxuICAgICAgICAvLyBGcm9tIG5lYXJieSB0byBmYXIgYXdheVxyXG4gICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICB2YXIgaiA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgZGlzdGFuY2UgPSAxOyBkaXN0YW5jZSA8PSByYW5nZTsgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAvLyBHZXQgc3F1YXJlIHNoZWxsIGFyb3VuZCBwb3NpdGlvblxyXG4gICAgICAgICAgICBmb3IgKHZhciBzaWRlID0gMDsgc2lkZSA8IDQ7IHNpZGUrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZWRnZSA9IC1kaXN0YW5jZTsgZWRnZSA8PSBkaXN0YW5jZTsgZWRnZSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGVkZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2lkZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gZWRnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzaWRlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlZGdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gLWRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGVkZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAtZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb29rUG9zID0gW3Bvc2l0aW9uWzBdICsgaSwgcG9zaXRpb25bMV0gKyBqXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdCA9IHRoaXMuZGlzdGFuY2UocG9zaXRpb24sIGxvb2tQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE91dCBvZiByYW5nZT8gU2tpcC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA+IHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiBzaGFkb3dzPyBTa2lwLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZVRvID0gdGhpcy5hbmdsZVRvKHBvc2l0aW9uLCBsb29rUG9zKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5ndWxhclNpemUgPSB0aGlzLmFuZ3VsYXJTaXplKHBvc2l0aW9uLCBsb29rUG9zKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluU2hhZG93cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW5TaGFkb3dzKGFuZ2xlVG8sIHNoYWRvd3MpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNJblNoYWRvd3MoYW5nbGVUbyArIGFuZ3VsYXJTaXplLCBzaGFkb3dzKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzSW5TaGFkb3dzKGFuZ2xlVG8gLSBhbmd1bGFyU2l6ZSwgc2hhZG93cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5TaGFkb3dzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm93LCB0ZXN0IGlmIHdlIGNhbiBzZWUgdGhyb3VnaCB0aGUgdGlsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpblNoYWRvd3MgfHwgIXRoaXMuY2FuU2VlKGxvb2tQb3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNxdWFyZSBpcyBvcGFxdWUhIEFkZCBpdHMgc2hhZG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NoYWRvd3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlOiBhbmdsZVRvIC0gYW5ndWxhclNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBbmdsZTogYW5nbGVUbyArIGFuZ3VsYXJTaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBZGQgbmV3U2hhZG93cyB0byBzaGFkb3dzXHJcbiAgICAgICAgICAgIHdoaWxlIChuZXdTaGFkb3dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIHNoYWRvd3MucHVzaChuZXdTaGFkb3dzLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tYmluZVNoYWRvdyhzaGFkb3dzLCBuZXdTaGFkb3dzLnBvcCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgY2FsbCBpdCBxdWl0c1xyXG4gICAgICAgICAgICBpZiAoc2hhZG93cy5sZW5ndGggPT09IDEgJiYgc2hhZG93c1swXS5lbmRBbmdsZSAtIHNoYWRvd3NbMF0uc3RhcnRBbmdsZSA+PSAzNjApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogR2V0IGFuZ2xlIGEgdGlsZSByZXNpZGVzIGluXHJcbiAgICAgKiBUaGlzIHJhbmdlcyBmcm9tIC0xODAgdG8gMTgwLCBzbyBiZSBjYXJlZnVsXHJcbiAgICAqL1xyXG4gICAgRk9WLnByb3RvdHlwZS5hbmdsZVRvID0gZnVuY3Rpb24gKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIHkgPSBlbmRQb3NpdGlvblsxXSAtIHN0YXJ0UG9zaXRpb25bMV07XHJcbiAgICAgICAgdmFyIHggPSBlbmRQb3NpdGlvblswXSAtIHN0YXJ0UG9zaXRpb25bMF07XHJcbiAgICAgICAgdmFyIGFuZ2xlID0gMTgwICogTWF0aC5hdGFuMih5LCB4KSAvIE1hdGguUEk7XHJcbiAgICAgICAgcmV0dXJuIChhbmdsZSA+PSAwKSA/IGFuZ2xlIDogYW5nbGUgKyAzNjA7XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIEdldCBhbmd1bGFyIHNpemUgb2YgYSBzcXVhcmUgKi9cclxuICAgIEZPVi5wcm90b3R5cGUuYW5ndWxhclNpemUgPSBmdW5jdGlvbiAoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKTtcclxuICAgICAgICByZXR1cm4gMzYwICogTWF0aC5hdGFuKDEgLyAoMiAqIGRpc3RhbmNlKSkgLyBNYXRoLlBJO1xyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHZXQgZGlzdGFuY2UgKi9cclxuICAgIEZPVi5wcm90b3R5cGUuZGlzdGFuY2UgPSBmdW5jdGlvbiAoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KChlbmRQb3NpdGlvblsxXSAtIHN0YXJ0UG9zaXRpb25bMV0pLCAyKSArIE1hdGgucG93KChlbmRQb3NpdGlvblswXSAtIHN0YXJ0UG9zaXRpb25bMF0pLCAyKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrIGlmIGluIHNoYWRvd3MgKi9cclxuICAgIEZPVi5wcm90b3R5cGUuaXNJblNoYWRvd3MgPSBmdW5jdGlvbiAoYW5nbGUsIHNoYWRvd3MpIHtcclxuICAgICAgICB2YXIgbmVnQW5nbGUgPSBhbmdsZSAtIDM2MDtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHNoYWRvd3NfMSA9IHNoYWRvd3M7IF9pIDwgc2hhZG93c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgc2hhZG93ID0gc2hhZG93c18xW19pXTtcclxuICAgICAgICAgICAgaWYgKChhbmdsZSA8PSBzaGFkb3cuZW5kQW5nbGUgJiYgYW5nbGUgPj0gc2hhZG93LnN0YXJ0QW5nbGUpIHx8IChuZWdBbmdsZSA8PSBzaGFkb3cuZW5kQW5nbGUgJiYgbmVnQW5nbGUgPj0gc2hhZG93LnN0YXJ0QW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqIEFkZCBhIHNoYWRvdyB0byB0aGUgc2hhZG93IGFycmF5ICovXHJcbiAgICBGT1YucHJvdG90eXBlLmNvbWJpbmVTaGFkb3cgPSBmdW5jdGlvbiAoc2hhZG93cywgbmV3U2hhZG93KSB7XHJcbiAgICAgICAgdmFyIG92ZXJMYXBBcnIgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoYWRvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHNoYWRvdyA9IHNoYWRvd3NbaV07XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXkgb3ZlcmxhcFxyXG4gICAgICAgICAgICBpZiAobmV3U2hhZG93LnN0YXJ0QW5nbGUgPCBzaGFkb3cuZW5kQW5nbGUgJiYgbmV3U2hhZG93LmVuZEFuZ2xlID4gc2hhZG93LnN0YXJ0QW5nbGUpIHtcclxuICAgICAgICAgICAgICAgIG5ld1NoYWRvdy5zdGFydEFuZ2xlID0gTWF0aC5taW4oc2hhZG93LnN0YXJ0QW5nbGUsIG5ld1NoYWRvdy5zdGFydEFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIG5ld1NoYWRvdy5lbmRBbmdsZSA9IE1hdGgubWF4KHNoYWRvdy5lbmRBbmdsZSwgbmV3U2hhZG93LmVuZEFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIG92ZXJMYXBBcnIucHVzaChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3ZlckxhcEFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBtYWluU2hhZG93ID0gc2hhZG93c1tvdmVyTGFwQXJyLnNoaWZ0KCldO1xyXG4gICAgICAgICAgICBtYWluU2hhZG93LnN0YXJ0QW5nbGUgPSBuZXdTaGFkb3cuc3RhcnRBbmdsZTtcclxuICAgICAgICAgICAgbWFpblNoYWRvdy5lbmRBbmdsZSA9IG5ld1NoYWRvdy5lbmRBbmdsZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IG92ZXJMYXBBcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHNoYWRvd3Muc3BsaWNlKG92ZXJMYXBBcnJbaV0sIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzaGFkb3dzLnB1c2gobmV3U2hhZG93KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZPVjtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgRk9WO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GT1YuanMubWFwIiwiaW1wb3J0IHsgRGlzcGxheSwgRXZlbnRNYW5hZ2VyLCBSYW5kb20sIFBhdGhGaW5kZXIsIEZPViB9IGZyb20gJy4uL2xpYi9pbmRleCc7XHJcblxyXG4vLyBGaXJzdCwgc2VsZWN0IHRoZSB0YXJnZXQgZWxlbWVudCB5b3Ugd2FudCB0aGUgZGlzcGxheSB0byBiZSB3aXRoaW5cclxuY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXNwbGF5RXhhbXBsZVwiKTtcclxuXHJcbi8vIFBhcmFtYXRlcnMgb2JqZWN0XHJcbmNvbnN0IHBhcmFtcyA9IHtcclxuICAgIC8vIFJlcXVpcmVkISBUaGUgZGlzcGxheSBtdXN0IGdvIHNvbWV3aGVyZVxyXG4gICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICAvLyBXaWR0aCBvZiB0aGUgZGlzcGxheSBpbiB0aWxlc1xyXG4gICAgd2lkdGg6IDIwLFxyXG4gICAgLy8gSGVpZ2h0IG9mIHRoZSBkaXNwbGF5IGluIHRpbGVzXHJcbiAgICBoZWlnaHQ6IDE1LFxyXG59O1xyXG5cclxuLy8gU3RhcnQgdGhlIGRpc3BsYXkhXHJcbmNvbnN0IGRpc3BsYXkgPSBuZXcgRGlzcGxheShwYXJhbXMpO1xyXG5cclxuLy8gU2V0IHRoZSB0aWxlIHNpemUgc28gdGhhdCBpdCBmaXRzIGl0cyBjb250YWluZXJcclxuZGlzcGxheS50aWxlU2l6ZSA9IGRpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIE9uZSBjb29sIHRoaW5nIHlvdSBjYW4gZG8gaXMgYWRkIGEgbGlzdGVuZXIgZm9yIHdpbmRvdyByZXNpemluZ1xyXG4vLyBLZWVwIHlvdXIgZGlzcGxheSBsb29raW5nIGdvb2QhXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsKCk9PntcclxuICAgIGRpc3BsYXkudGlsZVNpemUgPSBkaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcbn0pO1xyXG5cclxuLy8gTGV0cyBkcmF3IHNvbWUgc3R1ZmZcclxuZm9yIChsZXQgeD0wOyB4IDwgcGFyYW1zLndpZHRoOyB4KyspIHtcclxuICAgIGZvciAobGV0IHk9MDsgeSA8IHBhcmFtcy5oZWlnaHQ7IHkrKykge1xyXG4gICAgICAgIC8vIERyYXcgc29tZSB3YWxsc1xyXG4gICAgICAgIGlmICh4PT09MCB8fCB5PT09MCB8fCB4PT09cGFyYW1zLndpZHRoLTEgfHwgeT09PXBhcmFtcy5oZWlnaHQtMSkge1xyXG4gICAgICAgICAgICBkaXNwbGF5LnNldFRpbGUoeCx5LHtcclxuICAgICAgICAgICAgICAgIC8vIENvbnRlbnQgY2FuIGJlIGEgc3RyaW5nLCBvciBBTlkgaHRtbCBlbGVtZW50ISAoaW5jbHVkaW5nIGltYWdlcyEpXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnIycsXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnJpY2tXYWxsXCJcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBvdXIgcGxheWVyIVxyXG4gICAgICAgIH0gZWxzZSBpZiAoeD09PTMgJiYgeT09PTUpIHtcclxuICAgICAgICAgICAgZGlzcGxheS5zZXRUaWxlKHgseSx7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnQCcsXHJcbiAgICAgICAgICAgICAgICAvLyBZb3UgY2FuIHVzZSBhcyBtYW55IGNsYXNzZXMgYXMgeW91IHdvdWxkIGxpa2UhXHJcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3Q6IFtcInBsYXllclwiXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAvLyBTb21lIGZsb29yIGV2ZXJ5d2hlcmUgZWxzZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXkuc2V0VGlsZSh4LHkse1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogJy4nLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvb2xGbG9vclwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gSG1tIGFjdHVhbGx5IEkgd2FudCB0byBjaGFuZ2Ugc29tZSBvZiB0aGUgdGlsZXMgYSBiaXQuIHVwZGF0ZVRpbGUgY2hhbmdlcyB0aGVcclxuLy8gcGFyYW1ldGVycyB0aGF0IHlvdSBzcGVjaWZ5OyBzZXRUaWxlIHJlcGxhY2VzIGV2ZXJ5dGhpbmcuXHJcblxyXG5mb3IgKGxldCBpPTU7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICBkaXNwbGF5LnVwZGF0ZVRpbGUoaSxpLHtjbGFzc05hbWU6XCJzdXBlckF3ZXNvbWVcIn0pO1xyXG59XHJcblxyXG5jb25zdCByYW5kb21TdHVmZiA9ICgpPT57XHJcbiAgICAvLyBZb3UgY2FuIGRlZmluZSBhIHNlZWQgaWYgeW91IHdvdWxkIGxpa2U7IGlmIG5vdCwgdGhlIGN1cnJlbnQgdGltZSBpcyB1c2VkLlxyXG4gICAgY29uc3Qgb3B0aW9uYWxTZWVkID0gTWF0aC5mbG9vcihEYXRlLm5vdygpKTtcclxuICAgIFxyXG4gICAgLy8gU3RhcnQgdGhlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yXHJcbiAgICBjb25zdCByYW5kb20gPSBuZXcgUmFuZG9tKG9wdGlvbmFsU2VlZCk7XHJcbiAgICBcclxuICAgIC8vIElmIHlvdSB3YW50IGEgcmFuZG9tIG51bWJlciBmcm9tIDAgPD0geCA8IDE6XHJcbiAgICBjb25zdCB4ID0gcmFuZG9tLmdldFJhbmRvbSgpO1xyXG4gICAgXHJcbiAgICAvLyBJZiB5b3Ugd291bGQgbGlrZSBhIHJhbmRvbSBudW1iZXIgaW4gdGhlIHJhbmdlIG9mIGxvd2VyIDw9IHkgPD0gdXBwZXIgeW91IGNhbiB1c2UgZ2V0TnVtYmVyLlxyXG4gICAgY29uc3QgbG93ZXIgPSAwO1xyXG4gICAgY29uc3QgdXBwZXIgPSAxMDtcclxuICAgIGNvbnN0IHkgPSByYW5kb20uZ2V0TnVtYmVyKGxvd2VyLHVwcGVyKTtcclxuICAgIFxyXG4gICAgLy8gSWYgdGhlIGdpdmVuIGJvdW5kcyBhcmUgaW50ZWdlcnMsIGl0IHdpbGwgZ2VuZXJhdGUgaW50ZWdlcnMuXHJcbiAgICAvLyBJZiBub3QsIGl0IHdpbGwgZ2VuZXJhdGUgZGVjaW1hbHMuXHJcbiAgICAvLyBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5IGV4cGxpY2l0bHksIHVzZSB0aGUgaW50ZWdlciBib29sZWFuIHBhcmFtZXRlci5cclxuICAgIGNvbnN0IG5vVGhhbmtzTm90SW50ZWdlciA9IHJhbmRvbS5nZXROdW1iZXIobG93ZXIsdXBwZXIsZmFsc2UpO1xyXG4gICAgXHJcbiAgICAvLyBJZiB5b3Ugd2FudCBhIHJhbmRvbSBlbGVtZW50IGZyb20gYW4gYXJyYXksIHVzZSBnZXRSYW5kb21FbGVtZW50LlxyXG4gICAgY29uc3QgY29vbEFycmF5ID0gWzEsIDIsIDMsIDQsIDUsIDYsIDddO1xyXG4gICAgY29uc3QgcmFuZG9tRWxlbWVudCA9IHJhbmRvbS5nZXRSYW5kb21FbGVtZW50KGNvb2xBcnJheSk7XHJcbiAgICBcclxuICAgIC8vIElmIHlvdSB3YW50IHRvIHByb3ZpZGUgd2VpZ2h0cyBmb3IgZWFjaCB2YWx1ZSwgeW91IGNhbiB1c2UgZ2V0V2VpZ2h0ZWRFbGVtZW50LlxyXG4gICAgY29uc3Qgd2VpZ2h0ZWRBcnJheSA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdlaWdodDogMTAsXHJcbiAgICAgICAgICAgIG9wdGlvbjogXCJDdXRlIGRvZ1wiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdlaWdodDogMTUsXHJcbiAgICAgICAgICAgIG9wdGlvbjogXCJBd2Vzb21lIGNhdFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdlaWdodDogMSxcclxuICAgICAgICAgICAgb3B0aW9uOiBcIlJhcmUgRnJhbmtsaW5cIlxyXG4gICAgICAgIH1cclxuICAgIF07XHJcbiAgICBcclxuICAgIGNvbnN0IHJhbmRvbVdlaWdodGVkRWxlbWVudCA9IHJhbmRvbS5nZXRXZWlnaHRlZEVsZW1lbnQod2VpZ2h0ZWRBcnJheSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3VsdHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyYW5kb21SZXN1bHRzXCIpO1xyXG5cclxuICAgIC8vIENsZWFyIGl0IG91dCwgdGhlbiBmaWxsIGl0IHVwIGFnYWluXHJcbiAgICB3aGlsZShyZXN1bHRzTGlzdC5sYXN0Q2hpbGQpIHtcclxuICAgICAgICByZXN1bHRzTGlzdC5yZW1vdmVDaGlsZChyZXN1bHRzTGlzdC5sYXN0Q2hpbGQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBhdHRhY2hSZXN1bHQgPSBmdW5jdGlvbiAobmFtZSwgcmVzdWx0KSB7XHJcbiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IGAke25hbWV9IDogJHtyZXN1bHR9YDtcclxuICAgICAgICBsaS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7XHJcbiAgICAgICAgcmVzdWx0c0xpc3QuYXBwZW5kQ2hpbGQobGkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhdHRhY2hSZXN1bHQoXCJ4XCIsIHgudG9TdHJpbmcoKSk7XHJcbiAgICBhdHRhY2hSZXN1bHQoXCJ5XCIsIHkudG9TdHJpbmcoKSk7XHJcbiAgICBhdHRhY2hSZXN1bHQoXCJub1RoYW5rc05vdEludGVnZXJcIiwgbm9UaGFua3NOb3RJbnRlZ2VyLnRvU3RyaW5nKCkpO1xyXG4gICAgYXR0YWNoUmVzdWx0KFwicmFuZG9tRWxlbWVudFwiLCByYW5kb21FbGVtZW50LnRvU3RyaW5nKCkpO1xyXG4gICAgYXR0YWNoUmVzdWx0KFwicmFuZG9tV2VpZ2h0ZWRFbGVtZW50XCIsIHJhbmRvbVdlaWdodGVkRWxlbWVudC50b1N0cmluZygpKTtcclxufVxyXG5cclxuLy8gRG8gaXQgb25jZSBvbiBwYWdlIGxvYWRcclxucmFuZG9tU3R1ZmYoKTtcclxuXHJcbi8vIEF0dGFjaCBpdCB0byBhIGJ1dHRvbiBzbyB0aGUgcmVhZGVyIGNhbiBwdXNoIGl0XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZG9tQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHJhbmRvbVN0dWZmKTtcclxuXHJcbi8vIENvbG9yZnVsIGRpc3BsYXksIGhvb3JheVxyXG5jb25zdCBjb2xvclRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29sb3JEaXNwbGF5XCIpO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBpdFxyXG5jb25zdCBjb2xvckRpc3BsYXkgPSBuZXcgRGlzcGxheSh7dGFyZ2V0OmNvbG9yVGFyZ2V0LCB3aWR0aDogMTAsIGhlaWdodDogMTB9KTtcclxuXHJcbi8vIERyYXcgc29tZSBzdHVmZlxyXG5mb3IobGV0IGk9MDtpPDEwO2krKykge1xyXG4gICAgZm9yKGxldCBqPTA7ajwxMDtqKyspIHtcclxuICAgICAgICBpZiAoaT09PTAgfHwgaj09PTAgfHwgaT09PTkgfHwgaj09PTkpIHtcclxuICAgICAgICAgICAgLy8gRGlkIHlvdSBrbm93IHlvdSBjYW4gdXNlIGEgc2hvcnRoYW5kIGhlcmU/IE5vdyB5b3UgZG8hXHJcbiAgICAgICAgICAgIGNvbG9yRGlzcGxheS5zZXRUaWxlKGksaiwnIycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaT09PTMgJiYgaj09PTMpIHtcclxuICAgICAgICAgICAgY29sb3JEaXNwbGF5LnNldFRpbGUoaSxqLCdAJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpPT09NCAmJiBqPT09NSkge1xyXG4gICAgICAgICAgICBjb2xvckRpc3BsYXkuc2V0VGlsZShpLGose1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogJ2cnLFxyXG4gICAgICAgICAgICAgICAgLy8gWW91IGNhbiB1c2UgaW5saW5lIGNvbG9ycyBhbmQgYmFja2dyb3VuZHMgaWZcclxuICAgICAgICAgICAgICAgIC8vIHlvdSBSRUFMTFkgd2FudCB0bywgYnV0IEkgZGlzY291cmFnZSBpdC5cclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnZ3JlZW4nLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMTI4LDAsMCwwLjIpJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29sb3JEaXNwbGF5LnNldFRpbGUoaSxqLCcuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBNYWtlIHRoZSBkaXNwbGF5IGZpdCB0aGUgY29udGFpbmVyXHJcbmNvbG9yRGlzcGxheS50aWxlU2l6ZSA9IGNvbG9yRGlzcGxheS5jYWxjdWxhdGVUaWxlU2l6ZSgpO1xyXG5cclxuLy8gQ2VudGVyIGl0IG9uIHRoZSBwbGF5ZXJcclxuY29sb3JEaXNwbGF5LmNlbnRlckRpc3BsYXkoMywzKTtcclxuXHJcbi8vIEhlcmUncyBhIGNvb2wgbWFwIHRvIGxpdmUgaW5cclxuY29uc3QgbWFwID0gW1xyXG4gICAgXCIjIyMjIyMjIyMjIyMjIyMjIyMjI1wiLFxyXG4gICAgXCIjLi4uLi4uLi4uLi4uLi4uLi4uI1wiLFxyXG4gICAgXCIjLi4jLi4uLi4jLi4uLiMuLi4uI1wiLFxyXG4gICAgXCIjLi4jLi4uLi4jIyMuLi4jIy4uI1wiLFxyXG4gICAgXCIjLi4jLi4uLi4jLi4uLi4uLi4uI1wiLFxyXG4gICAgXCIjLi4uLi4uLi4uLi4uLiMjIyMuI1wiLFxyXG4gICAgXCIjLi4uLi4uLi4jLi4uLiMuLi4uI1wiLFxyXG4gICAgXCIjIyMjLi4uIyMjLi4uLiMuLi4uI1wiLFxyXG4gICAgXCIjLi4uLi4uLi4jLi4uLiMuLi4uI1wiLFxyXG4gICAgXCIjIyMjIyMjIyMjIyMjIyMjIyMjI1wiLFxyXG5dO1xyXG5jb25zdCB3aWR0aCA9IG1hcFswXS5sZW5ndGg7XHJcbmNvbnN0IGhlaWdodCA9IG1hcC5sZW5ndGg7XHJcblxyXG4vLyBBbmQgbGV0cyBzdGFydCB1cCBhIGRpc3BsYXkgdG8gdXNlXHJcbmNvbnN0IGZvdkRpc3BsYXlQYXJhbXMgPSB7XHJcbiAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm92TWFwXCIpLFxyXG4gICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgaGVpZ2h0OiBoZWlnaHQsXHJcbn07XHJcbmNvbnN0IGZvdkRpc3BsYXkgPSBuZXcgRGlzcGxheShmb3ZEaXNwbGF5UGFyYW1zKTtcclxuZm92RGlzcGxheS50aWxlU2l6ZSA9IGZvdkRpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIEZPViB0YWtlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgZGVjaWRlcyB3aGV0aGVyIG9yIG5vdCB5b3UgY2FuIHNlZSBzb21ldGhpbmcuXHJcbi8vIEl0IHRha2VzIG9uZSBwYXJhbWV0ZXIsIHdoaWNoIGlzIGEgdHdvIGVsZW1lbnQgcG9zaXRpb24gYXJyYXkgcG9zID0gW3gseV1cclxuLy8gYW5kIHJldHVybnMgdHJ1ZSBvciBmYWxzZS5cclxuY29uc3QgY2FuU2VlID0gKHBvc2l0aW9uKSA9PiB7XHJcbiAgICBjb25zdCB4ID0gcG9zaXRpb25bMF07XHJcbiAgICBjb25zdCB5ID0gcG9zaXRpb25bMV07XHJcblxyXG4gICAgLy8gTWFrZSBzdXJlIGl0J3MgZXZlbiBvbiB0aGUgbWFwXHJcbiAgICBpZiAoIHg8MCB8fCB4Pj13aWR0aCB8fCB5PDAgfHwgeT49aGVpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGlsZSA9IG1hcFt5XVt4XTtcclxuXHJcbiAgICAvLyBGaXJzdCwgcmVnYXJkbGVzcyBvZiBzdWNjZXNzIG9yIG5vdCwgc2VlIHRoaXMgdGlsZVxyXG4gICAgZm92RGlzcGxheS5zZXRUaWxlKHgseSx0aWxlKTtcclxuXHJcbiAgICAvLyBOZXh0LCB1c2Ugd2hhdGV2ZXIgY3JpdGVyaWEgd2Ugd2FudCB0byBkZWNpZGUgaWYgaXQgaXMgc2VldGhyb3VnaCBvciBub3QuXHJcbiAgICAvLyBJbiB0aGlzIGNhc2UsIGlmIGl0J3Mgbm90IGEgd2FsbCAob3IgIyBjaGFyYWN0ZXIpLCB3ZSBjYW4gc2VlIHRocm91Z2ggaXQuXHJcbiAgICByZXR1cm4gdGlsZSAhPT0gJyMnO1xyXG59XHJcblxyXG4vLyBJdCBoYXMgYW4gb3B0aW9uYWwgc2Vjb25kIHBhcmFtZXRlciBmb3IgZGlzdGFuY2UuIFRoZSBkZWZhdWx0IGlzIDguXHJcbmNvbnN0IG9wdGlvbmFsUmFuZ2UgPSAyMDtcclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIEZPViBvYmplY3QhXHJcbmNvbnN0IGZvdiA9IG5ldyBGT1YoY2FuU2VlLCBvcHRpb25hbFJhbmdlKTtcclxuXHJcbi8vIENob29zZSBhIHBvc2l0aW9uIGZvciB0aGUgcGxheWVyIHRvIGJlXHJcbmNvbnN0IHBsYXllclBvcyA9IFs1LDVdO1xyXG5cclxuLy8gU2xpZ2h0bHkgaGFja3kgd2F5IHRvIGFkZCB0aGUgcGxheWVyOyB1c2UgYSBiZXR0ZXIgZGF0YSBzdHJ1Y3R1cmUgZm9yIHlvdXIgZ2FtZXMhXHJcbmNvbnN0IG1hcFJvdyA9IG1hcFtwbGF5ZXJQb3NbMV1dO1xyXG5tYXBbcGxheWVyUG9zWzFdXSA9IG1hcFJvdy5zbGljZSgwLHBsYXllclBvc1swXSkgKyAnQCcgKyBtYXBSb3cuc2xpY2UocGxheWVyUG9zWzBdKzEpO1xyXG5cclxuLy8gTm93LCBMT09LIVxyXG5mb3YubG9vayhwbGF5ZXJQb3MpO1xyXG5cclxuLy8gRmlyc3QsIHNvbWUgc2V0dXAsIHNvIHdlIGNhbiByZWNvcmQgb3VyIG91dHB1dFxyXG5jb25zdCBzaW1wbGVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaW1wbGVFdmVudExpc3RcIik7XHJcbmNvbnN0IGNvbXBsZXhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wbGV4RXZlbnRMaXN0XCIpO1xyXG5cclxuXHJcbi8vIExldHMgbWFrZSBhIGhlbHBlciBmdW5jdGlvbiB0byByZWNvcmQgb3VyIG91dHB1dFxyXG5jb25zdCBzaG93QWN0aW9uID0gKGFjdGlvbiwgbGlzdCkgPT4ge1xyXG4gICAgLy8gTWFrZSBhIGxpc3QgaXRlbSBhbmQgYWRkIHRoZSBhY3Rpb24gdG8gaXQuXHJcbiAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKVxyXG4gICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYWN0aW9uKSk7XHJcbiAgICAvLyBBdHRhY2ggaXQgdG8gdGhlIGxpc3QsIHNvIHdlIGNhbiBzZWUgd2hhdCBoYXBwZW5zLlxyXG4gICAgbGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbn07XHJcblxyXG4vLyBUaGVyZSdzIHR3byB0eXBlcyBvZiBldmVudCBtYW5hZ2VycyB5b3UgY2FuIG1ha2UuXHJcbi8vIExldHMgc3RhcnQgd2l0aCB0aGUgc2ltcGxlIG9uZS4gRXZlcnlvbmUgdGFrZXMgdHVybnMsIG9uZSBhZnRlciB0aGUgb3RoZXIuXHJcbmNvbnN0IHNpbXBsZUV2ZW50cyA9IG5ldyBFdmVudE1hbmFnZXIoe3R5cGU6XCJzaW1wbGVcIn0pO1xyXG5cclxuLy8gVXN1YWxseSwgd2Ugd2FudCB0byBhZGQgc29tZSBhY3RvcnMgdG8gdGhlIHN5c3RlbS5cclxuLy8gVGhlIHN5c3RlbSBjYWxscyB0aGVpciBcImFjdFwiIG1ldGhvZC5cclxuXHJcbmNvbnN0IHNpbXBsZUdvYmxpbiA9IHtcclxuICAgIGFjdDogKCk9PnNob3dBY3Rpb24oXCJUaGUgR29ibGluIGdvYmxpbnMhXCIsIHNpbXBsZUxpc3QpXHJcbn1cclxuXHJcbmNvbnN0IHNpbXBsZUNhdCA9IHtcclxuICAgIGFjdDogKCk9PnNob3dBY3Rpb24oXCJUaGUgY2F0IG1lb3dzIVwiLCBzaW1wbGVMaXN0KVxyXG59XHJcblxyXG4vLyBBZGQgdGhlbSB0byB0aGUgZXZlbnQgbWFuYWdlclxyXG5zaW1wbGVFdmVudHMuYWRkKHNpbXBsZUdvYmxpbik7XHJcbnNpbXBsZUV2ZW50cy5hZGQoc2ltcGxlQ2F0KTtcclxuXHJcbi8vIFlvdSBjYW4gYWxzbyBhZGQgY2FsbGJhY2sgZnVuY3Rpb25zIG9uIHRoZWlyIG93biwgYXMgZXZlbnRzIG9yIHdoYXRldmVyIHlvdXIgaGVhcnQgcGxlYXNlcy5cclxuLy8gVGhleSBjYW4gcmVwZWF0IGZvcmV2ZXIuLi5cclxuc2ltcGxlRXZlbnRzLmFkZCh7XHJcbiAgICBjYWxsYmFjazogKCk9PnNob3dBY3Rpb24oXCJEcmlwIGRyaXAgZ29lcyB0aGUgZmF1Y2V0LlwiLCBzaW1wbGVMaXN0KSxcclxuICAgIHJlcGVhdHM6IHRydWVcclxufSlcclxuXHJcbi8vIFJlcGVhdCBhIGZldyB0aW1lc1xyXG5zaW1wbGVFdmVudHMuYWRkKHtcclxuICAgIGNhbGxiYWNrOiAoKT0+c2hvd0FjdGlvbihcIlJ1c2hpbmcgd2luZCEgT2ggbm8hXCIsIHNpbXBsZUxpc3QpLFxyXG4gICAgcmVwZWF0czogMlxyXG59KVxyXG5cclxuLy8gT3Igbm90IHJlcGVhdCBhdCBhbGwhXHJcbnNpbXBsZUV2ZW50cy5hZGQoe1xyXG4gICAgY2FsbGJhY2s6ICgpPT5zaG93QWN0aW9uKFwiVGhlIGhvdXNlIG9mIGNhcmRzIGZhbGxzIG92ZXIuIFdob29wcyFcIiwgc2ltcGxlTGlzdClcclxufSk7XHJcblxyXG4vLyBUaGVuIHlvdSBqdXN0IGtpY2sgaXQgb2ZmIGluIHlvdXIgcHJlZmVycmVkIG1hbm5lci5cclxuLy8gRWFjaCB0aW1lIHlvdSBjYWxsIGFkdmFuY2UsIGl0IHdpbGwgc3RlcCBmb3J3YXJkIG9uZSBzdGVwLlxyXG4vLyBJZiBhY3QgcmV0dXJucyBhIHByb21pc2UgKHNheSwgaWYgeW91J3JlIHdhaXRpbmcgZm9yIHBsYXllciBpbnB1dClcclxuLy8gaXQgd2lsbCB3YWl0IGZvciB0aGF0IGFjdGlvbiB0byBjb25jbHVkZS5cclxuZm9yKGxldCBpPTA7aTwyMDtpKyspIHtcclxuICAgIHNpbXBsZUV2ZW50cy5hZHZhbmNlKCk7XHJcbn1cclxuXHJcbi8vIFRoZSBzZWNvbmQgdHlwZSBvZiBldmVudCBtYW5hZ2VyIGlzIGNvbXBsZXg6XHJcbmNvbnN0IGNvbXBsZXhFdmVudHMgPSBuZXcgRXZlbnRNYW5hZ2VyKHt0eXBlOlwiY29tcGxleFwifSk7XHJcblxyXG4vLyBUaGUgY29tcGxleCBldmVudCBtYW5hZ2VyIGFjY2VwdHMgZGlmZmVyZW50IGRlbGF5cyBmb3IgZGlmZmVyZW50IGFjdG9yc1xyXG5cclxuY29uc3QgZmFzdENhdCA9IHtcclxuICAgIGFjdDooKT0+c2hvd0FjdGlvbihcIkZhc3QgY2F0IG55b29tcyFcIiwgY29tcGxleExpc3QpXHJcbn1cclxuXHJcbmNvbnN0IHNsb3dPZ3JlID0ge1xyXG4gICAgYWN0OigpPT5zaG93QWN0aW9uKFwiU2xvdyBvZ3JlIGlzIHNsb29vb3dcIiwgY29tcGxleExpc3QpXHJcbn1cclxuXHJcbi8vIFRoZSBkZWxheSBwcm9wZXJ0eSBkZWZpbmVzIGhvdyBzbG93IGFuIGFjdG9yIGlzXHJcbmNvbXBsZXhFdmVudHMuYWRkKHtcclxuICAgIGFjdG9yOmZhc3RDYXQsXHJcbiAgICBkZWxheToxXHJcbn0pO1xyXG5cclxuY29tcGxleEV2ZW50cy5hZGQoe1xyXG4gICAgYWN0b3I6c2xvd09ncmUsXHJcbiAgICBkZWxheTo1XHJcbn0pO1xyXG5cclxuLy8gT3IgaG93IGxvbmcgYW4gZXZlbnQgdGFrZXNcclxuY29tcGxleEV2ZW50cy5hZGQoe1xyXG4gICAgY2FsbGJhY2s6KCk9PnNob3dBY3Rpb24oXCJUaGUgbWFpbCBoYXMganVzdCBhcnJpdmVkLiBTd2VldCFcIiwgY29tcGxleExpc3QpLFxyXG4gICAgZGVsYXk6IDE2XHJcbn0pO1xyXG5cclxuLy8gQWR2YW5jZSB0aGUgY2xvY2suLi5cclxuZm9yKGxldCBpPTA7aTwyMDtpKyspIHtcclxuICAgIGNvbXBsZXhFdmVudHMuYWR2YW5jZSgpO1xyXG59XHJcblxyXG5tYXBbcGxheWVyUG9zWzFdXSA9IG1hcFJvdy5zbGljZSgwLHBsYXllclBvc1swXSkgKyAnLicgKyBtYXBSb3cuc2xpY2UocGxheWVyUG9zWzBdKzEpO1xyXG5cclxuLy8gRmlyc3QsIGxldHMgc2V0dXAgYW5vdGhlciBkaXNwbGF5ISBJIHdhbnQgdG8gZHJhdyB0aGUgcGF0aCB3ZSBmaW5kLlxyXG4vLyBBbmQgbGV0cyBzdGFydCB1cCBhIGRpc3BsYXkgdG8gdXNlLlxyXG4vLyBXZSdyZSBnb2luZyB0byB1c2UgdGhlIHNhbWUgbWFwIGZyb20gdGhlIEZPViBzZWN0aW9uLlxyXG5jb25zdCBwYXRoRGlzcGxheVBhcmFtcyA9IHtcclxuICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXRoRGlzcGxheVwiKSxcclxuICAgIHdpZHRoOiB3aWR0aCxcclxuICAgIGhlaWdodDogaGVpZ2h0LFxyXG59O1xyXG5jb25zdCBwYXRoRGlzcGxheSA9IG5ldyBEaXNwbGF5KHBhdGhEaXNwbGF5UGFyYW1zKTtcclxucGF0aERpc3BsYXkudGlsZVNpemUgPSBwYXRoRGlzcGxheS5jYWxjdWxhdGVUaWxlU2l6ZSgpO1xyXG5cclxuLy8gTGV0cyBkcmF3IHRoZSBtYXAgdG8gc3RhcnRcclxubWFwLmZvckVhY2goKHJvdyx5KT0+cm93LnNwbGl0KCcnKS5mb3JFYWNoKCh0aWxlLHgpPT57XHJcbiAgICBwYXRoRGlzcGxheS5zZXRUaWxlKHgseSx0aWxlKTtcclxufSkpO1xyXG5cclxuLy8gTm93LCBsZXRzIHNldHVwIHRoZSBwYXRoZmluZGVyIVxyXG4vLyBUaGUgUGF0aEZpbmRlciB0YWtlcyBhIFwiY2FuUGFzc1wiIGNhbGxiYWNrIHRvIGRldGVybWluZSB3aGF0IGlzIHBhc3NhYmxlLlxyXG4vLyBUaGlzIGxvb2tzIHNpbWlsYXIgdG8gdGhlIGNhblNlZSBjYWxsYmFjayBmcm9tIGJlZm9yZSwgYnV0IGl0IGRvZXNuJ3QgaGF2ZSB0by5cclxuY29uc3QgcGF0aGZpbmRlciA9IG5ldyBQYXRoRmluZGVyKHtcclxuICAgIGNhblBhc3M6KFt4LHldKT0+e1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBpdCdzIGV2ZW4gb24gdGhlIG1hcFxyXG4gICAgICAgIGlmICggeDwwIHx8IHg+PXdpZHRoIHx8IHk8MCB8fCB5Pj1oZWlnaHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aWxlID0gbWFwW3ldW3hdO1xyXG5cclxuICAgICAgICAvLyBOZXh0LCB1c2Ugd2hhdGV2ZXIgY3JpdGVyaWEgd2Ugd2FudCB0byBkZWNpZGUgaWYgaXQgaXMgcGFzc2FibGUuXHJcbiAgICAgICAgLy8gSW4gdGhpcyBjYXNlLCBpZiBpdCdzIG5vdCBhIHdhbGwgKG9yICMgY2hhcmFjdGVyKSwgd2UgY2FuIHdhbGsgdGhyb3VnaCBpdC5cclxuICAgICAgICByZXR1cm4gdGlsZSAhPT0gJyMnO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIExldCBjaG9vc2UgYSBzdGFydGluZyBwb3NpdGlvbiwgYW5kIGEgdGFyZ2V0IHBvc2l0aW9uIVxyXG5jb25zdCBzdGFydFBvcyA9IFsxLDhdO1xyXG5jb25zdCBlbmRQb3MgPSBbMTUsOF07XHJcblxyXG4vLyBJdCBjYW4gYWxzbyB0YWtlIGFuIG9wdGlvbmFsIFwib3J0aG9nb25hbE9ubHlcIiBwYXJhbWV0ZXIuXHJcbi8vIFRoaXMgc2V0cyB3aGV0aGVyIG9yIG5vdCB0aGUgcGF0aGZpbmRlciB3aWxsIHVzZSBkaWFnb25hbHMuXHJcbmNvbnN0IG9wdGlvbmFsT3J0aG9nb25hbE9ubHkgPSBmYWxzZTtcclxuXHJcbi8vIE5vdywgbGV0cyBmaW5kIHRoZSBwYXRoIVxyXG5jb25zdCBwYXRoID0gcGF0aGZpbmRlci5maW5kUGF0aChzdGFydFBvcywgZW5kUG9zLCBvcHRpb25hbE9ydGhvZ29uYWxPbmx5KTtcclxuXHJcbi8vIERyYXcgaXQgb250byB0aGUgbWFwIHRvIHRha2UgYSBsb29rIGF0IGl0LlxyXG5wYXRoLmZvckVhY2goKFt4LHldKT0+e1xyXG4gICAgcGF0aERpc3BsYXkudXBkYXRlVGlsZSh4LHkse1xyXG4gICAgICAgIGNvbnRlbnQ6J1gnLFxyXG4gICAgICAgIGNsYXNzTmFtZTogXCJwYXRoTWFya2VyXCJcclxuICAgIH0pXHJcbn0pO1xyXG5cclxuLy8gTm90ZSB0aGF0IHRoZSBkcmF3biBwYXRoIGRvZXNuJ3QgaW5jbHVkZSB0aGUgc3RhcnRpbmcgcG9zaXRpb24uXHJcbi8vIFRoaXMgaXMgc28geW91IGNhbiBqdXN0IGdyYWIgcGF0aFswXSB0byBnZXQgdGhlIGZpcnN0IHN0ZXAgaW4geW91ciBqb3VybmV5LlxyXG4vLyBMZXRzIGRyYXcgb24gdGhlIHBsYXllciwgdG9vLCBmb3IgaWxsdXN0cmF0aW9uLlxyXG5wYXRoRGlzcGxheS51cGRhdGVUaWxlKHN0YXJ0UG9zWzBdLCBzdGFydFBvc1sxXSwgJ0AnKTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsKCk9PntcclxuICAgIGNvbG9yRGlzcGxheS50aWxlU2l6ZSA9IGNvbG9yRGlzcGxheS5jYWxjdWxhdGVUaWxlU2l6ZSgpO1xyXG4gICAgZm92RGlzcGxheS50aWxlU2l6ZSA9IGZvdkRpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuICAgIHBhdGhEaXNwbGF5LnRpbGVTaXplID0gcGF0aERpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxufSk7XHJcblxyXG4vLyBXRkMgZGlzcGxheVxyXG5cclxuY29uc3Qgd2ZjRGlzcGxheVBhcmFtcyA9IHtcclxuICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZmNEaXNwbGF5XCIpLFxyXG4gICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgaGVpZ2h0OiBoZWlnaHQsXHJcbn07XHJcbmNvbnN0IHdmY0Rpc3BsYXkgPSBuZXcgRGlzcGxheSh3ZmNEaXNwbGF5UGFyYW1zKTtcclxuXHJcbi8vIFRoZSBXRkMgZ2VuZXJhdG9yIHRha2VzIGFuIGlucHV0IFwiaW1hZ2VcIiwgd2hpY2ggaXQgdXNlcyB0byBmaWd1cmUgb3V0IHJ1bGVzIGZvciB0aGUgb3V0cHV0LlxyXG5jb25zdCBpbnB1dEltYWdlID0gW1xyXG4gICAgXCIuIy4uXCIsXHJcbiAgICBcIi4jLi5cIixcclxuICAgIFwiIyMjI1wiLFxyXG4gICAgXCIuIy4uXCIsXHJcbl07XHJcblxyXG4vLyBjb25zdCBcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==