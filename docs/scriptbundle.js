(()=>{"use strict";var t=function(){return(t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e="pumpkin-tile";const n=function(){function n(t,n,i){this.element=document.createElement("div"),this.element.classList.add(e);var o=t.content,r=void 0===o?"":o,s=t.color,a=void 0===s?"":s,l=t.background,h=void 0===l?"":l,c=t.className,u=void 0===c?"":c,p=t.classList,f=void 0===p?[]:p;!function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}}(t,["content","color","background","className","classList"]),this.content=r,this.color=a,this.background=h,f.length>0?this.classList=f:this.className=u,this.tileWidth=(null==i?void 0:i.tileWidth)?i.tileWidth:16,this.tileHeight=(null==i?void 0:i.tileHeight)?i.tileHeight:this.tileWidth,this.position=n}return Object.defineProperty(n.prototype,"content",{get:function(){return this._content},set:function(t){if(this.confirmContentElement(),this._content!==t){if("string"==typeof t)this.contentElement.innerHTML=t;else{for(;this.contentElement.lastElementChild;)this.contentElement.removeChild(this.contentElement.lastElementChild);this.contentElement.appendChild(t)}this._content=t}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"background",{get:function(){return this._background},set:function(t){t!==this._background&&(this._background=t,this.element.style.backgroundColor=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){t!==this._color&&(this._color=t,this.element.style.color=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(e){this._position=t({},e),this.element.style.left=e.x*this.tileWidth+"px",this.element.style.top=e.y*this.tileHeight+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tileWidth",{get:function(){return this._tileWidth},set:function(t){this._tileWidth=t,this.element.style.width=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tileHeight",{get:function(){return this._tileHeight},set:function(t){this._tileHeight=t,this.element.style.height=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this.classList.join(" ")},set:function(t){this.classList=t?t.split(" "):[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classList",{get:function(){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}([e],this._classList)},set:function(t){var n,i,o=this;this._classList||(this._classList=[]),t.length===this._classList.length&&t.every((function(t){return o._classList.includes(t)}))&&this._classList.every((function(e){return t.includes(e)}))||(this._classList.length>0&&(n=this.element.classList).remove.apply(n,this._classList),this._classList=t.filter((function(t){return t.trim()&&t!==e})),t.length>0&&(i=this.element.classList).add.apply(i,this.classList))},enumerable:!1,configurable:!0}),n.prototype.setOptions=function(t){var e=t.content,n=void 0===e?"":e,i=t.background,o=void 0===i?"":i,r=t.color,s=void 0===r?"":r,a=t.className,l=void 0===a?"":a,h=t.classList;this.content=n,this.background=o,this.color=s,h?this.classList=h:this.className=l},n.prototype.updateOptions=function(t){var e=t.content,n=t.background,i=t.color,o=t.className,r=t.classList;void 0!==e&&(this.content=e),void 0!==n&&(this.background=n),void 0!==i&&(this.color=i),r&&r.length>0?this.classList=r:void 0!==o&&(this.className=o)},n.prototype.confirmContentElement=function(){this.contentElement||(this.contentElement=document.createElement("div"),this.element.appendChild(this.contentElement))},n}();const i=function(){function t(t){var e=t.target,n=t.width,i=void 0===n?1:n,o=t.height,r=void 0===o?1:o,s=t.tileWidth,a=t.tileHeight;!function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}}(t,["target","width","height","tileWidth","tileHeight"]),this.target=e,this.target.className?this.target.classList.add("pumpkin-container"):this.target.className="pumpkin-container",this.element=document.createElement("div"),this.element.className="pumpkin-display",this.element.setAttribute("aria-hidden","true"),this.dimensions={width:i,height:r},this.tileSize={tileWidth:s||16,tileHeight:a||s||16},this.applyDefaultStyles(),this.target.appendChild(this.element)}return Object.defineProperty(t.prototype,"tileSize",{get:function(){return this._tileSize},set:function(t){var e;this._tileSize=t,this.element.style.fontSize=t.tileHeight+"px",null===(e=this.tiles)||void 0===e||e.forEach((function(e){e.tileWidth=t.tileWidth,e.tileHeight=t.tileHeight,e.position=e.position})),this.resetSize()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return{width:this._width,height:this._height}},set:function(t){t.width!==this._width&&t.height!==this._height&&(this._width=t.width,this._height=t.height,this.allocateDisplay(),this.resetSize(),this.moveToCenter())},enumerable:!1,configurable:!0}),t.prototype.resetSize=function(){this._width&&this._height&&this.tileSize&&(this.element.style.width=this._width*this.tileSize.tileWidth+"px",this.element.style.height=this._height*this.tileSize.tileHeight+"px")},t.prototype.centerDisplay=function(t,e){this.centerPosition=void 0===t||void 0===e?void 0:{x:t,y:e},this.moveToCenter()},t.prototype.moveToCenter=function(){if(this.centerPosition){var t=(this.centerPosition.x+.5)/this.dimensions.width,e=(this.centerPosition.y+.5)/this.dimensions.height;this.element.style.transform="translate("+100*-t+"%,"+100*-e+"%)"}else this.element.style.transform=""},t.prototype.allocateDisplay=function(){var t=this;this.tiles&&this.tiles.forEach((function(e){t.element.removeChild(e.element)})),this.tiles=[];for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++){var o=new n({content:""},{x:i,y:e},this.tileSize);this.tiles.push(o),this.element.appendChild(o.element)}},t.prototype.getTile=function(t,e){if(t>=0&&t<this._width&&e>=0&&e<this._height){var n=t+e*this._width;return this.tiles[n]}},t.prototype.formatTileOptions=function(t){return"string"==typeof t||t instanceof HTMLElement?{content:t}:t},t.prototype.setTile=function(t,e,n){var i=this.getTile(t,e);i&&i.setOptions(this.formatTileOptions(n))},t.prototype.updateTile=function(t,e,n){var i=this.getTile(t,e);i&&i.updateOptions(this.formatTileOptions(n))},t.prototype.calculateDimensions=function(t){void 0===t&&(t=this.target.getBoundingClientRect());var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);return{width:Math.floor(e/this.tileSize.tileWidth),height:Math.floor(n/this.tileSize.tileHeight)}},t.prototype.calculateTileSize=function(t){void 0===t&&(t=this.target.getBoundingClientRect());var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top),i={tileWidth:e/this.dimensions.width,tileHeight:n/this.dimensions.height},o=Math.min(i.tileWidth,i.tileHeight);return{tileWidth:o,tileHeight:o}},t.prototype.applyDefaultStyles=function(){var t="pumpkin-default-styles";if(!document.getElementById(t)){var e=document.createElement("style");e.id=t,e.type="text/css",e.appendChild(document.createTextNode("\n.pumpkin-container {\n    position: relative;\n    overflow: hidden;\n    background-color: #000000;\n    color: #ffffff;\n}\n\n.pumpkin-display {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.pumpkin-tile {\n    position: absolute;\n}\n\n.pumpkin-tile > * {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 10;\n}\n"));var n=document.head,i=document.querySelector("style, link");n.insertBefore(e,i)}},t}();const o=function(){function t(t){t||(t={});var e=t.type,n=void 0===e?"simple":e;this.type=n,this.queue=[],this.time=0}return t.prototype.add=function(t){var e={};if(t instanceof Function?e.callback=t:"act"in t?e.actor=t:Object.assign(e,t),void 0===e.repeats&&e.actor&&(e.repeats=!0),"complex"===this.type){e.delay||(e.delay=1);var n=e.delay+this.time;if(0===this.queue.length||this.queue[this.queue.length-1].time<=n)this.queue.push({event:e,time:n});else for(var i=0;i<this.queue.length;i++)if(n<this.queue[i].time){this.queue.splice(i,0,{event:e,time:n});break}}else this.queue.push({event:e,time:0})},t.prototype.advance=function(){return t=this,e=void 0,i=function(){var t;return function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(e){switch(e.label){case 0:if(0===this.queue.length)throw new Error("Event queue is empty.");return t=this.queue.shift(),this.time=t.time,"number"==typeof t.event.repeats&&t.event.repeats--,t.event.repeats&&this.add(t.event),t.event.callback?[4,t.event.callback()]:[3,2];case 1:e.sent(),e.label=2;case 2:return t.event.actor?[4,t.event.actor.act()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i},t.prototype.remove=function(t){var e=this,n=[];this.queue.forEach((function(e,i){e.event.actor===t&&n.push(i)})),n.reverse(),n.forEach((function(t){e.queue.splice(t,1)}))},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),t}(),r=function(){function t(t,e){t||(t=Date.now()),this.seed=Math.floor(t),this.weyl=0,this.x=0,this.base=e||1e5;for(var n=0;n<10;n++)this.getRandom()}return t.prototype.getRandom=function(){return this.x*=this.x,this.x+=this.weyl+=this.seed,this.x=(this.x>>>32|this.x<<32)>>>0,this.x%this.base/this.base},t.prototype.getNumber=function(t,e,n){return void 0===n&&Number.isInteger(t)&&Number.isInteger(e)&&(n=!0),n?Math.floor(this.getRandom()*(e+1-t))+Math.ceil(t):this.getRandom()*(e-t)+t},t.prototype.getRandomElement=function(t){return t[this.getNumber(0,t.length-1,!0)]},t.prototype.getWeightedElement=function(t){var e=0,n=!0;t.forEach((function(t){e+=t.weight,n=n&&Number.isInteger(t.weight)}));for(var i=this.getNumber(n?1:0,e,n),o=0;o<t.length;o++)if((i-=t[o].weight)<=0)return t[o].option;throw new Error("No match found.")},t}();var s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};const a=function(){function t(t){var e=t.canPass,n=t.metric,i=t.maxIterations,o=t.weight;!function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}}(t,["canPass","metric","maxIterations","weight"]),this.canPass=e,n||(n=function(t,e){return Math.abs(e[1]-t[1])+Math.abs(e[0]-t[0])}),o||(o=function(t){return 1}),this.maxIterations=i,this.metric=n,this.weight=o}return t.prototype.findPath=function(t,e,n){var i=this;void 0===n&&(n=!1);for(var o=[],r=this.maxIterations?this.maxIterations:40*this.metric(t,e),a=0,l=[{position:s(t),steps:0,distanceFromGoal:this.metric(t,e),previousLocation:null}],h=[],c=[0,1,1.2];a<r&&!this.contains(l,e);)a++,l.forEach((function(t){for(var o=-1;o<2;o++)for(var r=-1;r<2;r++)if(!n||0===o||0===r){var s=[t.position[0]+o,t.position[1]+r],a=c[Math.abs(o)+Math.abs(r)]*i.weight(s);if(i.canPass(s)){var u=i.getLocation(l,s),p=i.getLocation(h,s);u||p?(u&&u.steps>t.steps+a&&(u.steps=t.steps+a,u.previousLocation=t),p&&p.steps>t.steps+a&&(p.steps=t.steps+a,p.previousLocation=t)):h.push({position:s,steps:t.steps+a,distanceFromGoal:i.metric(s,e),previousLocation:t})}}})),h.sort((function(t,e){return e.steps+e.distanceFromGoal-(t.steps+t.distanceFromGoal)})),l.push(h.pop());var u=this.getLocation(l,e);if(this.contains(l,e))for(a=0;(u.position[0]!==t[0]||u.position[1]!==t[1])&&a<r;)a++,o.push(u.position),u=u.previousLocation;return o.reverse()},t.prototype.isEqual=function(t,e){return t.position[0]===e.position[0]&&t.position[1]===e.position[1]},t.prototype.contains=function(t,e){var n=this;return Array.isArray(e)?t.some((function(t){return t.position[0]===e[0]&&t.position[1]===e[1]})):t.some((function(t){return n.isEqual(t,e)}))},t.prototype.getLocation=function(t,e){for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.position[0]===e[0]&&o.position[1]===e[1])return o}},t}(),l=function(){function t(t,e){this.canSee=t,this.range=e||8}return t.prototype.look=function(t,e){var n=e||this.range;this.canSee(t);for(var i=[],o=[],r=0,s=0,a=1;a<=n;a++){for(var l=0;l<4;l++)for(var h=-a;h<=a;h++){0===l?(r=h,s=a):1===l?(s=h,r=a):2===l?(r=h,s=-a):(s=h,r=-a);var c=[t[0]+r,t[1]+s];if(!(this.distance(t,c)>n)){var u=this.angleTo(t,c),p=this.angularSize(t,c)/2,f=!1;this.isInShadows(u,i)&&this.isInShadows(u+p,i)&&this.isInShadows(u-p,i)&&(f=!0),!f&&this.canSee(c)||o.push({startAngle:u-p,endAngle:u+p})}}for(;o.length>0;)this.combineShadow(i,o.pop());if(1===i.length&&i[0].endAngle-i[0].startAngle>=360)return}},t.prototype.angleTo=function(t,e){var n=e[1]-t[1],i=e[0]-t[0],o=180*Math.atan2(n,i)/Math.PI;return o>=0?o:o+360},t.prototype.angularSize=function(t,e){var n=this.distance(t,e);return 360*Math.atan(1/(2*n))/Math.PI},t.prototype.distance=function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))},t.prototype.isInShadows=function(t,e){for(var n=t-360,i=0,o=e;i<o.length;i++){var r=o[i];if(t<=r.endAngle&&t>=r.startAngle||n<=r.endAngle&&n>=r.startAngle)return!0}return!1},t.prototype.combineShadow=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=t[i];e.startAngle<o.endAngle&&e.endAngle>o.startAngle&&(e.startAngle=Math.min(o.startAngle,e.startAngle),e.endAngle=Math.max(o.endAngle,e.endAngle),n.push(i))}if(n.length>0){var r=t[n.shift()];for(r.startAngle=e.startAngle,r.endAngle=e.endAngle,i=n.length-1;i>=0;i--)t.splice(n[i],1)}else t.push(e)},t}();const h=function(){function t(t){this.contents=t.map((function(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}(t)}))}return t.prototype.equals=function(t){return this.compatible(t,0,0)},t.prototype.compatible=function(t,e,n){return this.contents.every((function(i,o){return i.every((function(i,r){var s=r+e,a=o+n;return!(s>=0&&a>=0&&a<t.contents.length&&s<t.contents[a].length)||i===t.contents[a][s]}))}))},t.prototype.constrain=function(t,e,n){return!(n>=0&&n<this.contents.length&&e>=0&&e<this.contents[n].length)||this.contents[n][e]===t},t}();var c=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n};const u=function(){function t(t){var e,n=t.input,i=t.n,o=void 0===i?1:i,s=t.m,a=void 0===s?o:s,l=t.repeatInput,h=void 0!==l&&l,u=t.random,p=(c(t,["input","n","m","repeatInput","random"]),n.map((function(t){return"string"==typeof t?t.split(""):t})));e=this.processInput(p,h,o,a),this.rules=e[0],this.frequencies=e[1],this.n=o,this.m=a,this.random=u||new r}return t.prototype.processInput=function(t,e,n,i){for(var o=t.length,r=o-(e?0:i-1),s=Math.min.apply(Math,t.map((function(t){return t.length}))),a=s-(e?0:n-1),l=[],c=0;c<a;c++)for(var u=0;u<r;u++){for(var p=[],f=0;f<i;f++){for(var d=[],g=(u+f)%o,m=0;m<n;m++){var v=(m+c)%s;d.push(t[g][v])}p.push(d)}var y=new h(p);l.push(y)}var b=[],w=[];return l.forEach((function(t){var e=b.findIndex((function(e){return e.equals(t)}));e>=0?w[e].weight++:(b.push(t),w.push({option:t,weight:1}))})),[b.map((function(t){var e={up:[],down:[],left:[],right:[]};return b.forEach((function(n,i){t.compatible(n,-1,0)&&e.right.push(i),t.compatible(n,1,0)&&e.left.push(i),t.compatible(n,0,-1)&&e.down.push(i),t.compatible(n,0,1)&&e.up.push(i)})),e})),w]},t.prototype.generate=function(t){for(var e=t.width,n=t.height,i=t.repeatOutput,o=(c(t,["width","height","repeatOutput"]),[]),r=[],s=[],a=0;a<n;a++){for(var l=[],h=0;h<e;h++){for(var u=[],p=0;p<this.frequencies.length;p++)for(var f=0;f<this.frequencies[p].weight;f++)u.push(p);var d={options:u,position:[h,a]};l.push(d),r.push(d)}o.push(l)}for(var g=e*n+1;r.length>0&&g>=0;){if(r.sort((function(t,e){return t.options.length-e.options.length})),(d=r.shift()).options.length<=0)return null;var m=[this.random.getRandomElement(d.options)];d.options=m,s.push(d),this.propogate(o,d.position,i),g--}return console.log(o),this.postProcess(o)},t.prototype.postProcess=function(t){for(var e=this,n=t.length+(this.m-1),i=t.length+(this.n-1),o=[],r=0;r<n;r++){for(var s=[],a=0;a<i;a++)s.push(null);o.push(s)}return t.forEach((function(t,n){t.forEach((function(t,i){if(t.options.length>0)for(var r=e.frequencies[t.options[0]].option,s=0;s<e.n;s++)for(var a=0;a<e.m;a++)o[n+a][i+s]=r.contents[a][s]}))})),o},t.prototype.propogate=function(t,e,n){var i=this,o=e[0],r=e[1],s=t[r][o],a={up:[],down:[],left:[],right:[]};s.options.forEach((function(t){var e=i.rules[t];e.up.forEach((function(t){return a.up.push(t)})),e.down.forEach((function(t){return a.down.push(t)})),e.left.forEach((function(t){return a.left.push(t)})),e.right.forEach((function(t){return a.right.push(t)}))})),a.up=a.up.filter((function(t,e,n){return n.indexOf(t)===e})),a.down=a.down.filter((function(t,e,n){return n.indexOf(t)===e})),a.left=a.left.filter((function(t,e,n){return n.indexOf(t)===e})),a.right=a.right.filter((function(t,e,n){return n.indexOf(t)===e}));var l={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]};["up","down","left","right"].forEach((function(e){var s=o+l[e][0],h=r+l[e][1];if(n&&(s+=t[0].length,s%=t[0].length,h+=t.length,h%=t.length),s>=0&&s<t[0].length&&h>=0&&h<t.length){var c=t[h][s].options.length;t[h][s].options=t[h][s].options.filter((function(t){return a[e].includes(t)})),c>t[h][s].options.length&&i.propogate(t,[s,h],n)}}))},t}(),p={target:document.getElementById("displayExample"),width:20,height:15},f=new i(p);f.tileSize=f.calculateTileSize(),window.addEventListener("resize",(()=>{f.tileSize=f.calculateTileSize()}));for(let t=0;t<p.width;t++)for(let e=0;e<p.height;e++)0===t||0===e||t===p.width-1||e===p.height-1?f.setTile(t,e,{content:"#",className:"brickWall"}):3===t&&5===e?f.setTile(t,e,{content:"@",classList:["player"]}):f.setTile(t,e,{content:".",className:"coolFloor"});for(let t=5;t<10;t++)f.updateTile(t,t,{className:"superAwesome"});const d=()=>{const t=Math.floor(Date.now()),e=new r(t),n=e.getRandom(),i=e.getNumber(0,10),o=e.getNumber(0,10,!1),s=e.getRandomElement([1,2,3,4,5,6,7]),a=e.getWeightedElement([{weight:10,option:"Cute dog"},{weight:15,option:"Awesome cat"},{weight:1,option:"Rare Franklin"}]),l=document.getElementById("randomResults");for(;l.lastChild;)l.removeChild(l.lastChild);const h=function(t,e){const n=document.createElement("li"),i=`${t} : ${e}`;n.appendChild(document.createTextNode(i)),l.appendChild(n)};h("x",n.toString()),h("y",i.toString()),h("noThanksNotInteger",o.toString()),h("randomElement",s.toString()),h("randomWeightedElement",a.toString())};d(),document.getElementById("randomButton").addEventListener("click",d);const g=new i({target:document.querySelector(".colorDisplay"),width:10,height:10});for(let t=0;t<10;t++)for(let e=0;e<10;e++)0===t||0===e||9===t||9===e?g.setTile(t,e,"#"):3===t&&3===e?g.setTile(t,e,"@"):4===t&&5===e?g.setTile(t,e,{content:"g",color:"green",background:"rgba(128,0,0,0.2)"}):g.setTile(t,e,".");g.tileSize=g.calculateTileSize(),g.centerDisplay(3,3);const m=["####################","#..................#","#..#.....#....#....#","#..#.....###...##..#","#..#.....#.........#","#.............####.#","#........#....#....#","####...###....#....#","#........#....#....#","####################"],v=m[0].length,y=m.length,b=new i({target:document.getElementById("fovMap"),width:v,height:y});b.tileSize=b.calculateTileSize();const w=new l((t=>{const e=t[0],n=t[1];if(e<0||e>=v||n<0||n>=y)return!1;const i=m[n][e];return b.setTile(e,n,i),"#"!==i}),20),E=[5,5],O=m[E[1]];m[E[1]]=O.slice(0,E[0])+"@"+O.slice(E[0]+1),w.look(E);const S=document.getElementById("simpleEventList"),x=document.getElementById("complexEventList"),T=(t,e)=>{const n=document.createElement("li");n.appendChild(document.createTextNode(t)),e.appendChild(n)},k=new o({type:"simple"}),L={act:()=>T("The Goblin goblins!",S)},_={act:()=>T("The cat meows!",S)};k.add(L),k.add(_),k.add({callback:()=>T("Drip drip goes the faucet.",S),repeats:!0}),k.add({callback:()=>T("Rushing wind! Oh no!",S),repeats:2}),k.add({callback:()=>T("The house of cards falls over. Whoops!",S)});for(let t=0;t<20;t++)k.advance();const z=new o({type:"complex"}),P={act:()=>T("Fast cat nyooms!",x)},I={act:()=>T("Slow ogre is sloooow",x)};z.add({actor:P,delay:1}),z.add({actor:I,delay:5}),z.add({callback:()=>T("The mail has just arrived. Sweet!",x),delay:16});for(let t=0;t<20;t++)z.advance();m[E[1]]=O.slice(0,E[0])+"."+O.slice(E[0]+1);const j=new i({target:document.getElementById("pathDisplay"),width:v,height:y});j.tileSize=j.calculateTileSize(),m.forEach(((t,e)=>t.split("").forEach(((t,n)=>{j.setTile(n,e,t)}))));const A=[1,8];new a({canPass:([t,e])=>!(t<0||t>=v||e<0||e>=y)&&"#"!==m[e][t]}).findPath(A,[15,8],!1).forEach((([t,e])=>{j.updateTile(t,e,{content:"X",className:"pathMarker"})})),j.updateTile(A[0],A[1],"@"),window.addEventListener("resize",(()=>{g.tileSize=g.calculateTileSize(),b.tileSize=b.calculateTileSize(),j.tileSize=j.calculateTileSize()}));const M=new i({target:document.getElementById("wfcDisplay"),width:20,height:20});M.tileSize=M.calculateTileSize(),new u({input:[".#..",".#..","####",".#.."],n:3,repeatInput:!0}).generate({width:20,height:20,repeatOutput:!0}).forEach(((t,e)=>{t.forEach(((t,n)=>{console.log(t),M.setTile(n,e,t)}))}));const N=new i({target:document.getElementById("wfcDisplayTwo"),width:20,height:20});N.tileSize=N.calculateTileSize(),new u({input:["    #.#        ","    #.#        ","    #.#        ","#####.##       ",".......########","####...........","   ##.#########","    #.#        ","   ##.##  #####","####...####...#","...............","####...####...#","   ##.##  #####"],n:3,repeatInput:!0}).generate({width:20,height:20,repeatOutput:!0}).forEach(((t,e)=>{t.forEach(((t,n)=>{console.log(t),N.setTile(n,e,t)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9kaXNwbGF5L1RpbGUuanMiLCJ3ZWJwYWNrOi8vcm9ndWVsaWtlLXB1bXBraW4tcGF0Y2gvLi9saWIvZGlzcGxheS9EaXNwbGF5LmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL2Rpc3BsYXkvRGlzcGxheVN0eWxlLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL2V2ZW50L0V2ZW50TWFuYWdlci5qcyIsIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9yYW5kb20vUmFuZG9tLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL3BhdGhmaW5kZXIvUGF0aEZpbmRlci5qcyIsIndlYnBhY2s6Ly9yb2d1ZWxpa2UtcHVtcGtpbi1wYXRjaC8uL2xpYi9mb3YvRk9WLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL3dmYy9XZmNUaWxlLmpzIiwid2VicGFjazovL3JvZ3VlbGlrZS1wdW1wa2luLXBhdGNoLy4vbGliL3dmYy9XRkMuanMiLCJ3ZWJwYWNrOi8vcm9ndWVsaWtlLXB1bXBraW4tcGF0Y2gvLi9kb2NzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiYmFzZUNsYXNzTmFtZSIsIlRpbGUiLCJ0aWxlT3B0aW9ucyIsInBvc2l0aW9uIiwidGlsZVNpemUiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiX2EiLCJjb250ZW50IiwiX2IiLCJjb2xvciIsIl9jIiwiYmFja2dyb3VuZCIsIl9kIiwiY2xhc3NOYW1lIiwiX2UiLCJlIiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5U3ltYm9scyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiX19yZXN0IiwidGlsZVdpZHRoIiwidGlsZUhlaWdodCIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiX2NvbnRlbnQiLCJzZXQiLCJuZXdDb250ZW50IiwiY29uZmlybUNvbnRlbnRFbGVtZW50IiwiY29udGVudEVsZW1lbnQiLCJpbm5lckhUTUwiLCJsYXN0RWxlbWVudENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJfYmFja2dyb3VuZCIsIm5ld0JhY2tncm91bmQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIl9jb2xvciIsIm5ld2NvbG9yIiwiX3Bvc2l0aW9uIiwibGVmdCIsIngiLCJ0b3AiLCJ5IiwiX3RpbGVXaWR0aCIsIm5ld1dpZHRoIiwid2lkdGgiLCJfdGlsZUhlaWdodCIsIm5ld0hlaWdodCIsImhlaWdodCIsImpvaW4iLCJuZXdDbGFzcyIsInNwbGl0IiwiaWwiLCJyIiwiQXJyYXkiLCJrIiwiYSIsImoiLCJqbCIsIl9fc3ByZWFkQXJyYXlzIiwiX2NsYXNzTGlzdCIsIm5ld0NsYXNzTGlzdCIsIl90aGlzIiwiZXZlcnkiLCJuYW1lIiwiaW5jbHVkZXMiLCJyZW1vdmUiLCJmaWx0ZXIiLCJ0cmltIiwic2V0T3B0aW9ucyIsIm5ld09wdGlvbnMiLCJ1cGRhdGVPcHRpb25zIiwiRGlzcGxheSIsInBhcmFtZXRlcnMiLCJ0YXJnZXQiLCJzZXRBdHRyaWJ1dGUiLCJkaW1lbnNpb25zIiwiYXBwbHlEZWZhdWx0U3R5bGVzIiwiX3RpbGVTaXplIiwibmV3VGlsZVNpemUiLCJmb250U2l6ZSIsInRpbGVzIiwiZm9yRWFjaCIsInRpbGUiLCJyZXNldFNpemUiLCJfd2lkdGgiLCJfaGVpZ2h0IiwibmV3RGltZW5zaW9ucyIsImFsbG9jYXRlRGlzcGxheSIsIm1vdmVUb0NlbnRlciIsImNlbnRlckRpc3BsYXkiLCJjZW50ZXJQb3NpdGlvbiIsInVuZGVmaW5lZCIsInhQZXJjZW50IiwieVBlcmNlbnQiLCJ0cmFuc2Zvcm0iLCJuZXdUaWxlIiwicHVzaCIsImdldFRpbGUiLCJpbmRleCIsImZvcm1hdFRpbGVPcHRpb25zIiwiaW5wdXQiLCJIVE1MRWxlbWVudCIsInNldFRpbGUiLCJ1cGRhdGVUaWxlIiwiY2FsY3VsYXRlRGltZW5zaW9ucyIsImNsaWVudFJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRXaWR0aCIsIk1hdGgiLCJhYnMiLCJyaWdodCIsImNsaWVudEhlaWdodCIsImJvdHRvbSIsImZsb29yIiwiY2FsY3VsYXRlVGlsZVNpemUiLCJzaXplIiwibWF4VGlsZVNpemUiLCJtaW4iLCJzdHlsZXNJZCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGVzIiwiaWQiLCJ0eXBlIiwiY3JlYXRlVGV4dE5vZGUiLCJoZWFkIiwiZmlyc3RTdHlsZSIsInF1ZXJ5U2VsZWN0b3IiLCJpbnNlcnRCZWZvcmUiLCJFdmVudE1hbmFnZXIiLCJxdWV1ZSIsInRpbWUiLCJhZGRlZEV2ZW50IiwiZXZlbnQiLCJGdW5jdGlvbiIsImNhbGxiYWNrIiwiYWN0b3IiLCJyZXBlYXRzIiwiZGVsYXkiLCJzY2hlZHVsZUZvciIsInNwbGljZSIsImFkdmFuY2UiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsImdlbmVyYXRvciIsInRoaXNFdmVudCIsImJvZHkiLCJmIiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwibmV4dCIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsImRvbmUiLCJ2YWx1ZSIsInBvcCIsInN0ZXAiLCJfX2dlbmVyYXRvciIsIkVycm9yIiwic2hpZnQiLCJhY3QiLCJQIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInJlc3VsdCIsInRoZW4iLCJtYXRjaGVzIiwicmV2ZXJzZSIsIm1hdGNoIiwiUmFuZG9tIiwic2VlZCIsImJhc2UiLCJEYXRlIiwibm93Iiwid2V5bCIsImdldFJhbmRvbSIsImdldE51bWJlciIsIm1heCIsImludGVnZXIiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJjZWlsIiwiZ2V0UmFuZG9tRWxlbWVudCIsImFycmF5IiwiZ2V0V2VpZ2h0ZWRFbGVtZW50IiwidG90YWxXZWlnaHQiLCJ3ZWlnaHQiLCJyYW5kb21OdW1iZXIiLCJvcHRpb24iLCJQYXRoRmluZGVyIiwiY2FuUGFzcyIsIm1ldHJpYyIsIm1heEl0ZXJhdGlvbnMiLCJwb3NpdGlvbjEiLCJwb3NpdGlvbjIiLCJmaW5kUGF0aCIsInN0YXJ0UG9zaXRpb24iLCJlbmRQb3NpdGlvbiIsIm9ydGhvZ29uYWxPbmx5Iiwicm91dGUiLCJpdGVyYXRpb25zIiwiY2xvc2VkTGlzdCIsInN0ZXBzIiwiZGlzdGFuY2VGcm9tR29hbCIsInByZXZpb3VzTG9jYXRpb24iLCJvcGVuTGlzdCIsInN0ZXBTaXplQXJyIiwiY29udGFpbnMiLCJsb2NhdGlvbiIsIm5ld1Bvc2l0aW9uIiwic3RlcFNpemUiLCJpbkNsb3NlZExpc3RBbHJlYWR5IiwiZ2V0TG9jYXRpb24iLCJpbk9wZW5MaXN0QWxyZWFkeSIsInNvcnQiLCJiIiwiaXNFcXVhbCIsImxvY2F0aW9uTGlzdCIsInRlc3RMb2NhdGlvbiIsImlzQXJyYXkiLCJzb21lIiwidGVzdFBvc2l0aW9uIiwiX2kiLCJsb2NhdGlvbkxpc3RfMSIsImxvY2F0aW9uXzEiLCJGT1YiLCJjYW5TZWUiLCJyYW5nZSIsImxvb2siLCJsb29rUmFuZ2VPdmVycmlkZSIsInNoYWRvd3MiLCJuZXdTaGFkb3dzIiwiZGlzdGFuY2UiLCJzaWRlIiwiZWRnZSIsImxvb2tQb3MiLCJhbmdsZVRvIiwiYW5ndWxhclNpemUiLCJpblNoYWRvd3MiLCJpc0luU2hhZG93cyIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsImNvbWJpbmVTaGFkb3ciLCJhbmdsZSIsImF0YW4yIiwiUEkiLCJhdGFuIiwic3FydCIsInBvdyIsIm5lZ0FuZ2xlIiwic2hhZG93c18xIiwic2hhZG93IiwibmV3U2hhZG93Iiwib3ZlckxhcEFyciIsIm1haW5TaGFkb3ciLCJXZmNUaWxlIiwiY29udGVudHMiLCJtYXAiLCJyb3ciLCJlcXVhbHMiLCJjb21wYXRpYmxlIiwidmFsIiwieFBvcyIsInlQb3MiLCJjb25zdHJhaW4iLCJjb25zdHJhaW50IiwiV0ZDIiwicGFyYW1zIiwibSIsInJlcGVhdElucHV0IiwicmFuZG9tIiwiaW5wdXRJbWFnZSIsInByb2Nlc3NJbnB1dCIsInJ1bGVzIiwiZnJlcXVlbmNpZXMiLCJoZWlnaHRUaWxlcyIsIndpZHRoVGlsZXMiLCJyYXdUaWxlcyIsInRpbGVJbnB1dCIsImZpbmRJbmRleCIsIm90aGVyVGlsZSIsInJ1bGUiLCJ1cCIsImRvd24iLCJnZW5lcmF0ZSIsInJlcGVhdE91dHB1dCIsIndhdmVGdW5jdGlvbiIsImVudHJvcHlMaXN0IiwiZG9uZUxpc3QiLCJjb2x1bW4iLCJudW0iLCJjb3VudCIsIm9wdGlvbnMiLCJjYXAiLCJjaG9pY2UiLCJwcm9wb2dhdGUiLCJjb25zb2xlIiwibG9nIiwicG9zdFByb2Nlc3MiLCJvdXRwdXQiLCJhZ2dyZWdhdGVSdWxlcyIsImFyciIsInN0ZXBEaXJlY3Rpb25zIiwieHgiLCJ5eSIsImJlZm9yZUxlbmd0aCIsImRpc3BsYXkiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmFuZG9tU3R1ZmYiLCJvcHRpb25hbFNlZWQiLCJub1RoYW5rc05vdEludGVnZXIiLCJyYW5kb21FbGVtZW50IiwicmFuZG9tV2VpZ2h0ZWRFbGVtZW50IiwicmVzdWx0c0xpc3QiLCJsYXN0Q2hpbGQiLCJhdHRhY2hSZXN1bHQiLCJsaSIsInRleHQiLCJ0b1N0cmluZyIsImNvbG9yRGlzcGxheSIsImZvdkRpc3BsYXkiLCJmb3YiLCJwbGF5ZXJQb3MiLCJtYXBSb3ciLCJzbGljZSIsInNpbXBsZUxpc3QiLCJjb21wbGV4TGlzdCIsInNob3dBY3Rpb24iLCJhY3Rpb24iLCJsaXN0IiwibGlzdEl0ZW0iLCJzaW1wbGVFdmVudHMiLCJzaW1wbGVHb2JsaW4iLCJzaW1wbGVDYXQiLCJjb21wbGV4RXZlbnRzIiwiZmFzdENhdCIsInNsb3dPZ3JlIiwicGF0aERpc3BsYXkiLCJzdGFydFBvcyIsIndmY0Rpc3BsYXkiLCJjb2wiLCJ3ZmNEaXNwbGF5VHdvIl0sIm1hcHBpbmdzIjoibUJBQUEsSUFBSUEsRUFBc0MsV0FTdEMsT0FSQUEsRUFBV0MsT0FBT0MsUUFBVSxTQUFTQyxHQUNqQyxJQUFLLElBQUlDLEVBQUdDLEVBQUksRUFBR0MsRUFBSUMsVUFBVUMsT0FBUUgsRUFBSUMsRUFBR0QsSUFFNUMsSUFBSyxJQUFJSSxLQURUTCxFQUFJRyxVQUFVRixHQUNPSixPQUFPUyxVQUFVQyxlQUFlQyxLQUFLUixFQUFHSyxLQUN6RE4sRUFBRU0sR0FBS0wsRUFBRUssSUFFakIsT0FBT04sSUFFS1UsTUFBTUMsS0FBTVAsWUFvQjVCUSxFQUFnQixlQTZNcEIsUUEzTTBCLFdBQ3RCLFNBQVNDLEVBQUtDLEVBQWFDLEVBQVVDLEdBRWpDTCxLQUFLTSxRQUFVQyxTQUFTQyxjQUFjLE9BQ3RDUixLQUFLTSxRQUFRRyxVQUFVQyxJQUFJVCxHQUUzQixJQUFJVSxFQUFLUixFQUFZUyxRQUFTQSxPQUFpQixJQUFQRCxFQUFnQixHQUFLQSxFQUFJRSxFQUFLVixFQUFZVyxNQUFPQSxPQUFlLElBQVBELEVBQWdCLEdBQUtBLEVBQUlFLEVBQUtaLEVBQVlhLFdBQVlBLE9BQW9CLElBQVBELEVBQWdCLEdBQUtBLEVBQUlFLEVBQUtkLEVBQVllLFVBQVdBLE9BQW1CLElBQVBELEVBQWdCLEdBQUtBLEVBQUlFLEVBQUtoQixFQUFZTSxVQUFXQSxPQUFtQixJQUFQVSxFQUFnQixHQUFLQSxHQTFCN1IsU0FBVTdCLEVBQUc4QixHQUMvQyxJQUFJL0IsRUFBSSxHQUNSLElBQUssSUFBSU0sS0FBS0wsRUFBT0gsT0FBT1MsVUFBVUMsZUFBZUMsS0FBS1IsRUFBR0ssSUFBTXlCLEVBQUVD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QkFDQSxrQkFDQSxrQkFDQSxrQkFDQSxrQkFDQSxrQkFDQSxrQkFDQSxrQkFDQSxrQkFDQSxrQkFDQSxtQkFHd0NySCxFQUFFLEVBQUV3UyxhQUFZLElBQ25DZSxTQUFTLENBQUMxUCxNQUFNLEdBQUdHLE9BQU8sR0FBR3dQLGNBQWEsSUFFekR0TixTQUFRLENBQUMyTCxFQUFJcE4sS0FDbkJvTixFQUFJM0wsU0FBUSxDQUFDOFEsRUFBSWpYLEtBQ2JvVSxRQUFRQyxJQUFJNEMsR0FDWkMsRUFBYzFQLFFBQVF4SCxFQUFFMEUsRUFBRXVTLFUiLCJmaWxlIjoic2NyaXB0YnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxyXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xyXG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxudmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcbnZhciBiYXNlQ2xhc3NOYW1lID0gXCJwdW1wa2luLXRpbGVcIjtcclxuLyoqIENsYXNzIHRvIGtlZXAgdHJhY2sgb2YgZWFjaCBpbmRpdmlkdWFsIHRpbGUgaW4gdGhlIGRpc3BsYXkgKi9cclxudmFyIFRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUaWxlKHRpbGVPcHRpb25zLCBwb3NpdGlvbiwgdGlsZVNpemUpIHtcclxuICAgICAgICAvLyBDcmVhdGUgbmVjZXNzYXJ5IGVsZW1lbnRzIGFuZCBhcHBseSBjbGFzc2VzXHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoYmFzZUNsYXNzTmFtZSk7XHJcbiAgICAgICAgLy8gU2V0IHRpbGUgY29udGVudCBhbmQgY29sb3VyIHNjaGVtZVxyXG4gICAgICAgIHZhciBfYSA9IHRpbGVPcHRpb25zLmNvbnRlbnQsIGNvbnRlbnQgPSBfYSA9PT0gdm9pZCAwID8gJycgOiBfYSwgX2IgPSB0aWxlT3B0aW9ucy5jb2xvciwgY29sb3IgPSBfYiA9PT0gdm9pZCAwID8gJycgOiBfYiwgX2MgPSB0aWxlT3B0aW9ucy5iYWNrZ3JvdW5kLCBiYWNrZ3JvdW5kID0gX2MgPT09IHZvaWQgMCA/ICcnIDogX2MsIF9kID0gdGlsZU9wdGlvbnMuY2xhc3NOYW1lLCBjbGFzc05hbWUgPSBfZCA9PT0gdm9pZCAwID8gJycgOiBfZCwgX2UgPSB0aWxlT3B0aW9ucy5jbGFzc0xpc3QsIGNsYXNzTGlzdCA9IF9lID09PSB2b2lkIDAgPyBbXSA6IF9lLCByZXN0ID0gX19yZXN0KHRpbGVPcHRpb25zLCBbXCJjb250ZW50XCIsIFwiY29sb3JcIiwgXCJiYWNrZ3JvdW5kXCIsIFwiY2xhc3NOYW1lXCIsIFwiY2xhc3NMaXN0XCJdKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kO1xyXG4gICAgICAgIGlmIChjbGFzc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdCA9IGNsYXNzTGlzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZXQgdGhlIHRpbGUgc2l6ZVxyXG4gICAgICAgIHRoaXMudGlsZVdpZHRoID0gKHRpbGVTaXplID09PSBudWxsIHx8IHRpbGVTaXplID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0aWxlU2l6ZS50aWxlV2lkdGgpID8gdGlsZVNpemUudGlsZVdpZHRoIDogMTY7XHJcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gKHRpbGVTaXplID09PSBudWxsIHx8IHRpbGVTaXplID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0aWxlU2l6ZS50aWxlSGVpZ2h0KSA/IHRpbGVTaXplLnRpbGVIZWlnaHQgOiB0aGlzLnRpbGVXaWR0aDtcclxuICAgICAgICAvLyBTZXQgdGhlIHRpbGUgcG9zaXRpb25cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIHRpbGUgY29udGVudHMgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRlbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdDb250ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb250ZW50RWxlbWVudCBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3RcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtQ29udGVudEVsZW1lbnQoKTtcclxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdGhlIG5ldyBhbmQgb2xkIGNvbnRlbnQgZG9uJ3QgbWF0Y2hcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnQgIT09IG5ld0NvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIGNvbnRlbnQgaXMgYSBzdHJpbmcsIGp1c3QgYWRkIGl0XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5pbm5lckhUTUwgPSBuZXdDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQgaXMgYW4gZWxlbWVudCwgZW1wdHkgdGhlIHRpbGUgYW5kIGFwcGVuZCB0aGUgbmV3IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLmNvbnRlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmNvbnRlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKG5ld0NvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwiYmFja2dyb3VuZFwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIGJhY2tncm91bmQgY29sb3VyICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYWNrZ3JvdW5kO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3QmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgICBpZiAobmV3QmFja2dyb3VuZCAhPT0gdGhpcy5fYmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFja2dyb3VuZCA9IG5ld0JhY2tncm91bmQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbmV3QmFja2dyb3VuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaWxlLnByb3RvdHlwZSwgXCJjb2xvclwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIGNvbG9yIGNvbG91ciAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdjb2xvcikge1xyXG4gICAgICAgICAgICBpZiAobmV3Y29sb3IgIT09IHRoaXMuX2NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2xvciA9IG5ld2NvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmNvbG9yID0gbmV3Y29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHBvc2l0aW9uICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gX19hc3NpZ24oe30sIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSBwb3NpdGlvbi54ICogdGhpcy50aWxlV2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBwb3NpdGlvbi55ICogdGhpcy50aWxlSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaWxlLnByb3RvdHlwZSwgXCJ0aWxlV2lkdGhcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRpbGUgd2lkdGggKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbGVXaWR0aDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbGVXaWR0aCA9IG5ld1dpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSBuZXdXaWR0aCArIFwicHhcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGlsZS5wcm90b3R5cGUsIFwidGlsZUhlaWdodFwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIHRpbGUgaGVpZ2h0ICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aWxlSGVpZ2h0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbGVIZWlnaHQgPSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbGUucHJvdG90eXBlLCBcImNsYXNzTmFtZVwiLCB7XHJcbiAgICAgICAgLyoqIEdldCBvciBzZXQgdGhlIGNsYXNzbmFtZSAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGFzc0xpc3Quam9pbihcIiBcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdDbGFzcykge1xyXG4gICAgICAgICAgICBpZiAobmV3Q2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gbmV3Q2xhc3Muc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaWxlLnByb3RvdHlwZSwgXCJjbGFzc0xpc3RcIiwge1xyXG4gICAgICAgIC8qKiBHZXQgb3Igc2V0IHRoZSBsaXN0IG9mIGNsYXNzZXMgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXlzKFtiYXNlQ2xhc3NOYW1lXSwgdGhpcy5fY2xhc3NMaXN0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld0NsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2xhc3NMaXN0ID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gT25seSBhZGQvcmVtb3ZlIGNsYXNzZXMgaWYgdGhlIHR3byBsaXN0cyBhcmUgYWN0dWFsbHkgZGlmZmVyZW50XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdWdseSwgYnV0IGNoYW5naW5nIHRoZSBET00gaXMgbW9yZSBleHBlbnNpdmUgdGhhbiB0aGlzIGlzLlxyXG4gICAgICAgICAgICBpZiAobmV3Q2xhc3NMaXN0Lmxlbmd0aCAhPT0gdGhpcy5fY2xhc3NMaXN0Lmxlbmd0aCB8fFxyXG4gICAgICAgICAgICAgICAgIW5ld0NsYXNzTGlzdC5ldmVyeShmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gX3RoaXMuX2NsYXNzTGlzdC5pbmNsdWRlcyhuYW1lKTsgfSkgfHxcclxuICAgICAgICAgICAgICAgICF0aGlzLl9jbGFzc0xpc3QuZXZlcnkoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG5ld0NsYXNzTGlzdC5pbmNsdWRlcyhuYW1lKTsgfSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jbGFzc0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QpLnJlbW92ZS5hcHBseShfYSwgdGhpcy5fY2xhc3NMaXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NsYXNzTGlzdCA9IG5ld0NsYXNzTGlzdC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudHJpbSgpICYmIHggIT09IGJhc2VDbGFzc05hbWU7IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0NsYXNzTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHVzaW5nIHRoZSBnZXR0ZXIsIHRvIGVuc3VyZSBiYXNlQ2xhc3NOYW1lIGlzIHN0aWxsIG9uIHRoZSBsaXN0LlxyXG4gICAgICAgICAgICAgICAgICAgIChfYiA9IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QpLmFkZC5hcHBseShfYiwgdGhpcy5jbGFzc0xpc3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqIFNldCBvcHRpb25zIGZvciB0aGUgdGlsZSAqL1xyXG4gICAgVGlsZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChuZXdPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hID0gbmV3T3B0aW9ucy5jb250ZW50LCBjb250ZW50ID0gX2EgPT09IHZvaWQgMCA/IFwiXCIgOiBfYSwgX2IgPSBuZXdPcHRpb25zLmJhY2tncm91bmQsIGJhY2tncm91bmQgPSBfYiA9PT0gdm9pZCAwID8gXCJcIiA6IF9iLCBfYyA9IG5ld09wdGlvbnMuY29sb3IsIGNvbG9yID0gX2MgPT09IHZvaWQgMCA/IFwiXCIgOiBfYywgX2QgPSBuZXdPcHRpb25zLmNsYXNzTmFtZSwgY2xhc3NOYW1lID0gX2QgPT09IHZvaWQgMCA/IFwiXCIgOiBfZCwgY2xhc3NMaXN0ID0gbmV3T3B0aW9ucy5jbGFzc0xpc3Q7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICBpZiAoY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gY2xhc3NMaXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIG9wdGlvbnMgZm9yIHRoZSB0aWxlXHJcbiAgICAgKi9cclxuICAgIFRpbGUucHJvdG90eXBlLnVwZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiAobmV3T3B0aW9ucykge1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gbmV3T3B0aW9ucy5jb250ZW50LCBiYWNrZ3JvdW5kID0gbmV3T3B0aW9ucy5iYWNrZ3JvdW5kLCBjb2xvciA9IG5ld09wdGlvbnMuY29sb3IsIGNsYXNzTmFtZSA9IG5ld09wdGlvbnMuY2xhc3NOYW1lLCBjbGFzc0xpc3QgPSBuZXdPcHRpb25zLmNsYXNzTGlzdDtcclxuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBiYWNrZ3JvdW5kICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgY29sb3IgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhc3NMaXN0ICYmIGNsYXNzTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gY2xhc3NMaXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgY2xhc3NOYW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogQ2hlY2sgaWYgYSBjb250ZW50RWxlbWVudCBleGlzdHMsIGFuZCBpZiBpdCBkb2Vzbid0LCBhZGQgaXQgKi9cclxuICAgIFRpbGUucHJvdG90eXBlLmNvbmZpcm1Db250ZW50RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY29udGVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBUaWxlO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBUaWxlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59O1xyXG5pbXBvcnQgVGlsZSBmcm9tICcuL1RpbGUuanMnO1xyXG5pbXBvcnQgY3NzIGZyb20gJy4vRGlzcGxheVN0eWxlLmpzJztcclxuLyoqIERpc3BsYXkgY2xhc3MsIHRvIGNyZWF0ZSBhbmQgY29udHJvbCBhIGRpc3BsYXkgKi9cclxudmFyIERpc3BsYXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKiogQ3JlYXRlIGEgbmV3IERpc3BsYXlcclxuICAgICAqICBAcGFyYW0ge0Rpc3BsYXlQYXJhbXN9IHBhcmFtZXRlcnMgLSBPYmplY3Qgb2YgcGFyYW1ldGVycyB0byBpbml0aWFsaXplIHRoZSBkaXNwbGF5LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBEaXNwbGF5KHBhcmFtZXRlcnMpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gcGFyYW1ldGVycy50YXJnZXQsIF9hID0gcGFyYW1ldGVycy53aWR0aCwgd2lkdGggPSBfYSA9PT0gdm9pZCAwID8gMSA6IF9hLCBfYiA9IHBhcmFtZXRlcnMuaGVpZ2h0LCBoZWlnaHQgPSBfYiA9PT0gdm9pZCAwID8gMSA6IF9iLCB0aWxlV2lkdGggPSBwYXJhbWV0ZXJzLnRpbGVXaWR0aCwgdGlsZUhlaWdodCA9IHBhcmFtZXRlcnMudGlsZUhlaWdodCwgcmVzdCA9IF9fcmVzdChwYXJhbWV0ZXJzLCBbXCJ0YXJnZXRcIiwgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcInRpbGVXaWR0aFwiLCBcInRpbGVIZWlnaHRcIl0pO1xyXG4gICAgICAgIC8vIFNldCB0aGUgdGFyZ2V0XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0LmNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwicHVtcGtpbi1jb250YWluZXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5jbGFzc05hbWUgPSBcInB1bXBraW4tY29udGFpbmVyXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZWxlbWVudCBmb3IgdGhlIGRpc3BsYXlcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJwdW1wa2luLWRpc3BsYXlcIjtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIC8vIFNldCB0aGUgZGlzcGxheSBkaW1lbnNpb25zXHJcbiAgICAgICAgdGhpcy5kaW1lbnNpb25zID0geyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XHJcbiAgICAgICAgdGhpcy50aWxlU2l6ZSA9IHtcclxuICAgICAgICAgICAgdGlsZVdpZHRoOiAodGlsZVdpZHRoKSA/IHRpbGVXaWR0aCA6IDE2LFxyXG4gICAgICAgICAgICB0aWxlSGVpZ2h0OiAodGlsZUhlaWdodCkgPyB0aWxlSGVpZ2h0IDogKHRpbGVXaWR0aCkgPyB0aWxlV2lkdGggOiAxNlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQWRkIHN0eWxlIHRvIHRoZSBwYWdlIGZvciB0aGUgZGlzcGxheVxyXG4gICAgICAgIHRoaXMuYXBwbHlEZWZhdWx0U3R5bGVzKCk7XHJcbiAgICAgICAgLy8gQXBwZW5kIHRvIHRoZSBjb250YWluZXIgZWxlbWVudFxyXG4gICAgICAgIHRoaXMudGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGlzcGxheS5wcm90b3R5cGUsIFwidGlsZVNpemVcIiwge1xyXG4gICAgICAgIC8qKiBUaWxlIHNpemUgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbGVTaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VGlsZVNpemUpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICB0aGlzLl90aWxlU2l6ZSA9IG5ld1RpbGVTaXplO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBuZXdUaWxlU2l6ZS50aWxlSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAoX2EgPSB0aGlzLnRpbGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChmdW5jdGlvbiAodGlsZSkge1xyXG4gICAgICAgICAgICAgICAgdGlsZS50aWxlV2lkdGggPSBuZXdUaWxlU2l6ZS50aWxlV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aWxlLnRpbGVIZWlnaHQgPSBuZXdUaWxlU2l6ZS50aWxlSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGlsZS5wb3NpdGlvbiA9IHRpbGUucG9zaXRpb247XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0U2l6ZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIDtcclxuICAgIDtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEaXNwbGF5LnByb3RvdHlwZSwgXCJkaW1lbnNpb25zXCIsIHtcclxuICAgICAgICAvKiogR2V0IG9yIHNldCB0aGUgZGlzcGxheSBkaW1lbnNpb25zICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHdpZHRoOiB0aGlzLl93aWR0aCwgaGVpZ2h0OiB0aGlzLl9oZWlnaHQgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld0RpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG5ld0RpbWVuc2lvbnMud2lkdGggIT09IHRoaXMuX3dpZHRoICYmIG5ld0RpbWVuc2lvbnMuaGVpZ2h0ICE9PSB0aGlzLl9oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gbmV3RGltZW5zaW9ucy53aWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IG5ld0RpbWVuc2lvbnMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGRpc3BsYXkgdG8gYWNjb21vZGF0ZSB0aGUgbmV3IHNpemVcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVEaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9DZW50ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIDtcclxuICAgIDtcclxuICAgIC8qKiBSZXNldCBkaXNwbGF5IGVsZW1lbnQgc2l6ZSAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUucmVzZXRTaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl93aWR0aCAmJiB0aGlzLl9oZWlnaHQgJiYgdGhpcy50aWxlU2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLl93aWR0aCAqIHRoaXMudGlsZVNpemUudGlsZVdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5faGVpZ2h0ICogdGhpcy50aWxlU2l6ZS50aWxlSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogUG9zaXRpb24gdG8gY2VudGVyIHRoZSBkaXNwbGF5IHZpZXcgb24gKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmNlbnRlckRpc3BsYXkgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgeSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclBvc2l0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXJQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgICAgICB5OiB5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW92ZVRvQ2VudGVyKCk7XHJcbiAgICB9O1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUubW92ZVRvQ2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNlbnRlclBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciB4UGVyY2VudCA9ICh0aGlzLmNlbnRlclBvc2l0aW9uLnggKyAwLjUpIC8gdGhpcy5kaW1lbnNpb25zLndpZHRoO1xyXG4gICAgICAgICAgICB2YXIgeVBlcmNlbnQgPSAodGhpcy5jZW50ZXJQb3NpdGlvbi55ICsgMC41KSAvIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIC14UGVyY2VudCAqIDEwMCArIFwiJSxcIiArIC15UGVyY2VudCAqIDEwMCArIFwiJSlcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogQnVpbGQgdGhlIGFycmF5IG9mIHRpbGVzIGFuZCBhdHRhY2ggdGhlbSB0byB0aGUgZGlzcGxheSAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUuYWxsb2NhdGVEaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gU3RhcnQgYSBmcmVzaCB0aWxlcyBhcnJheVxyXG4gICAgICAgIGlmICh0aGlzLnRpbGVzKSB7XHJcbiAgICAgICAgICAgIC8vIEVtcHR5IGRpc3BsYXkgaWYgaXQgaGFzIGNvbnRlbnRzIGFscmVhZHlcclxuICAgICAgICAgICAgdGhpcy50aWxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKHRpbGUuZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbGVzID0gW107XHJcbiAgICAgICAgLy8gR2VuZXJhdGUgdGlsZXNcclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuX2hlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5fd2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIG5ldyB0aWxlXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VGlsZSA9IG5ldyBUaWxlKHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJyxcclxuICAgICAgICAgICAgICAgIH0sIHsgeDogeCwgeTogeSB9LCB0aGlzLnRpbGVTaXplKTtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgbGlzdCBvZiB0aWxlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aWxlcy5wdXNoKG5ld1RpbGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRvIHRoZSBhY3R1YWwgZGlzcGxheVxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKG5ld1RpbGUuZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIEdldCB0aGUgZGlzcGxheSB0aWxlIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gUG9zaXRpb24gZnJvbSB0aGUgbGVmdCBzaWRlIG9mIHRoZSBkaXNwbGF5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFBvc2l0aW9uIGZyb20gdGhlIHRvcCBvZiB0aGUgZGlzcGxheVxyXG4gICAgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIGlmICh4ID49IDAgJiYgeCA8IHRoaXMuX3dpZHRoICYmIHkgPj0gMCAmJiB5IDwgdGhpcy5faGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHggKyB5ICogdGhpcy5fd2lkdGg7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVzW2luZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBUYWtlIGlucHV0IGFuZCBmb3JtYXQgaW50byBUaWxlT3B0aW9ucyAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUuZm9ybWF0VGlsZU9wdGlvbnMgPSBmdW5jdGlvbiAoaW5wdXQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRlbnQ6IGlucHV0IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlucHV0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY29udGVudDogaW5wdXQgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFNldCBkZXRhaWxzIGZvciB0aGUgc3BlY2lmaWVkIHRpbGUgKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLnNldFRpbGUgPSBmdW5jdGlvbiAoeCwgeSwgbmV3T3B0aW9ucykge1xyXG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5nZXRUaWxlKHgsIHkpO1xyXG4gICAgICAgIGlmICh0aWxlKSB7XHJcbiAgICAgICAgICAgIHRpbGUuc2V0T3B0aW9ucyh0aGlzLmZvcm1hdFRpbGVPcHRpb25zKG5ld09wdGlvbnMpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIFVwZGF0ZSBkZXRhaWxzIGZvciB0aGUgc3BlY2lmaWVkIHRpbGUsIHByZXNlcnZpbmcgZXZlcnkgdW5zZXQgcHJvcGVydHkuICovXHJcbiAgICBEaXNwbGF5LnByb3RvdHlwZS51cGRhdGVUaWxlID0gZnVuY3Rpb24gKHgsIHksIG5ld09wdGlvbnMpIHtcclxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuZ2V0VGlsZSh4LCB5KTtcclxuICAgICAgICBpZiAodGlsZSkge1xyXG4gICAgICAgICAgICB0aWxlLnVwZGF0ZU9wdGlvbnModGhpcy5mb3JtYXRUaWxlT3B0aW9ucyhuZXdPcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHaXZlbiB0aGUgc2l6ZSBvZiB0aGUgdGFyZ2V0IGNvbnRhaW5lciwgYW5kIHRoZSB0aWxlIHNpemUsIGRldGVybWluZSB0aGUgbnVtYmVyIG9mIHRpbGVzIG5lZWRlZC4gKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmNhbGN1bGF0ZURpbWVuc2lvbnMgPSBmdW5jdGlvbiAoY2xpZW50UmVjdCkge1xyXG4gICAgICAgIGlmIChjbGllbnRSZWN0ID09PSB2b2lkIDApIHsgY2xpZW50UmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9XHJcbiAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gTWF0aC5hYnMoY2xpZW50UmVjdC5yaWdodCAtIGNsaWVudFJlY3QubGVmdCk7XHJcbiAgICAgICAgdmFyIGNsaWVudEhlaWdodCA9IE1hdGguYWJzKGNsaWVudFJlY3QuYm90dG9tIC0gY2xpZW50UmVjdC50b3ApO1xyXG4gICAgICAgIC8vIFJvdW5kIGRvd247IHdlIGRvIG5vdCB3YW50IHBhcnRpYWwgdGlsZXNcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5mbG9vcihjbGllbnRXaWR0aCAvIHRoaXMudGlsZVNpemUudGlsZVdpZHRoKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLmZsb29yKGNsaWVudEhlaWdodCAvIHRoaXMudGlsZVNpemUudGlsZUhlaWdodClcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHaXZlbiB0aGUgc2l6ZSBvZiB0aGUgdGFyZ2V0IGNvbnRhaW5lciwgYW5kIHRoZSBudW1iZXIgb2YgdGlsZXMsIGRldGVybWluZSB0aGUgdGlsZSBzaXplIG5lZWRlZFxyXG4gICAgICogIFRoaXMgYXNzdW1lcyBzcXVhcmUgdGlsZXMgYXJlIGRlc2lyZWQuXHJcbiAgICAqL1xyXG4gICAgRGlzcGxheS5wcm90b3R5cGUuY2FsY3VsYXRlVGlsZVNpemUgPSBmdW5jdGlvbiAoY2xpZW50UmVjdCkge1xyXG4gICAgICAgIGlmIChjbGllbnRSZWN0ID09PSB2b2lkIDApIHsgY2xpZW50UmVjdCA9IHRoaXMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9XHJcbiAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gTWF0aC5hYnMoY2xpZW50UmVjdC5yaWdodCAtIGNsaWVudFJlY3QubGVmdCk7XHJcbiAgICAgICAgdmFyIGNsaWVudEhlaWdodCA9IE1hdGguYWJzKGNsaWVudFJlY3QuYm90dG9tIC0gY2xpZW50UmVjdC50b3ApO1xyXG4gICAgICAgIC8vIFRoaXMgY291bGQgcG90ZW50aWFsbHkgZ2l2ZSBhYnN1cmQgcmVzdWx0cywgc28gZ2V0IHRoZSBcIm5haXZlIGZpcnN0LWd1ZXNzXCIgaGVyZVxyXG4gICAgICAgIHZhciBzaXplID0ge1xyXG4gICAgICAgICAgICB0aWxlV2lkdGg6IGNsaWVudFdpZHRoIC8gdGhpcy5kaW1lbnNpb25zLndpZHRoLFxyXG4gICAgICAgICAgICB0aWxlSGVpZ2h0OiBjbGllbnRIZWlnaHQgLyB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBDaG9vc2UgdGhlIGxvd2VzdCBvZiB0aGUgdHdvLiBUaGlzIGlzIHRoZSBtYXhpbXVtIHNxdWFyZSB0aWxlIHNpemUgdGhhdCB3aWxsIGZpdCB0aGUgZ2l2ZW4gZGltZW5zaW9uc1xyXG4gICAgICAgIHZhciBtYXhUaWxlU2l6ZSA9IE1hdGgubWluKHNpemUudGlsZVdpZHRoLCBzaXplLnRpbGVIZWlnaHQpO1xyXG4gICAgICAgIC8vIERvbid0IGJvdGhlciByb3VuZGluZzsgZm9udHMgY2FuIGJlIHByZWNpc2UgbnVtYmVyc1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRpbGVXaWR0aDogbWF4VGlsZVNpemUsXHJcbiAgICAgICAgICAgIHRpbGVIZWlnaHQ6IG1heFRpbGVTaXplXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogQWRkIHRoZSBkZWZhdWx0IHN0eWxlcyB0byB0aGUgaGVhZCBvZiB0aGUgcGFnZS4gKi9cclxuICAgIERpc3BsYXkucHJvdG90eXBlLmFwcGx5RGVmYXVsdFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3R5bGVzSWQgPSBcInB1bXBraW4tZGVmYXVsdC1zdHlsZXNcIjtcclxuICAgICAgICAvLyBDaGVjayB0byBtYWtlIHN1cmUgdGhlIHN0eWxlcyBhcmVuJ3QgYWxyZWFkeSBwcmVzZW50XHJcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdHlsZXNJZCkpIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBzdHlsZSBlbGVtZW50XHJcbiAgICAgICAgICAgIHZhciBzdHlsZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgIHN0eWxlcy5pZCA9IHN0eWxlc0lkO1xyXG4gICAgICAgICAgICBzdHlsZXMudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuICAgICAgICAgICAgc3R5bGVzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGhlYWQgb2YgdGhlIHBhZ2VcclxuICAgICAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkO1xyXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBmaXJzdCBzdHlsZSBvciBsaW5rIGVsZW1lbnQsIGFuZCBpbnNlcnQgaW4gZnJvbnQgb2YgaXRcclxuICAgICAgICAgICAgdmFyIGZpcnN0U3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3R5bGUsIGxpbmtcIik7XHJcbiAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlcywgZmlyc3RTdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEaXNwbGF5O1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBEaXNwbGF5O1xyXG47XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpc3BsYXkuanMubWFwIiwiLy8gRGVmYXVsdCBzdHlsaW5nIGZvciB0aGUgZGlzcGxheS4gVGhpcyBnZXRzIGluc2VydGVkIGludG8gdGhlIGRvY3VtZW50IGhlYWQsIGJlZm9yZSBvdGhlciBzdHlsZXNoZWV0cyAoc28gdGhhdCB5b3UgY2FuIG92ZXJyaWRlIHRoZW0gaWYgZGVzaXJlZCEpXHJcbnZhciBjc3MgPSBcIlxcbi5wdW1wa2luLWNvbnRhaW5lciB7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDtcXG4gICAgY29sb3I6ICNmZmZmZmY7XFxufVxcblxcbi5wdW1wa2luLWRpc3BsYXkge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IDUwJTtcXG4gICAgdG9wOiA1MCU7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xcbn1cXG5cXG4ucHVtcGtpbi10aWxlIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbn1cXG5cXG4ucHVtcGtpbi10aWxlID4gKiB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgbGVmdDogNTAlO1xcbiAgICB0b3A6IDUwJTtcXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XFxuICAgIHotaW5kZXg6IDEwO1xcbn1cXG5cIjtcclxuZXhwb3J0IGRlZmF1bHQgY3NzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaXNwbGF5U3R5bGUuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbi8qKiBFdmVudCBtYW5hZ2VyLCB0byBrZWVwIHRyYWNrIG9mIHR1cm5zICovXHJcbnZhciBFdmVudE1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudE1hbmFnZXIocGFyYW1ldGVycykge1xyXG4gICAgICAgIGlmICghcGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDtcclxuICAgICAgICB2YXIgX2EgPSBwYXJhbWV0ZXJzLnR5cGUsIHR5cGUgPSBfYSA9PT0gdm9pZCAwID8gXCJzaW1wbGVcIiA6IF9hO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xyXG4gICAgICAgIHRoaXMudGltZSA9IDA7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKiogQWRkIGFuIGV2ZW50IHRvIHRoZSBxdWV1ZSAqL1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoYWRkZWRFdmVudCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHt9O1xyXG4gICAgICAgIC8vIERldGVybWluZSB0eXBlIG9mIHRoZSBpbnB1dCwgYW5kIGhhbmRsZSBhY2NvcmRpbmdseVxyXG4gICAgICAgIGlmIChhZGRlZEV2ZW50IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgZXZlbnQuY2FsbGJhY2sgPSBhZGRlZEV2ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChcImFjdFwiIGluIGFkZGVkRXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQuYWN0b3IgPSBhZGRlZEV2ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihldmVudCwgYWRkZWRFdmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc3VtZSByZXBlYXRpbmcgaWYgYW4gYWN0b3Igd2FzIHByb3ZpZGVkXHJcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudC5yZXBlYXRzID09PSBcInVuZGVmaW5lZFwiICYmIGV2ZW50LmFjdG9yKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnJlcGVhdHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDb21wbGV4IGV2ZW50IHF1ZXVlIHVzZXMgZGVsYXkgdGltZSBhIGJpdCBiZXR0ZXJcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBcImNvbXBsZXhcIikge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5kZWxheSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNjaGVkdWxlRm9yID0gZXZlbnQuZGVsYXkgKyB0aGlzLnRpbWU7XHJcbiAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZXZlbnQgYXQgdGhlIGFwcHJvcHJpYXRlIHRpbWVcclxuICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID09PSAwIHx8IHRoaXMucXVldWVbdGhpcy5xdWV1ZS5sZW5ndGggLSAxXS50aW1lIDw9IHNjaGVkdWxlRm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBzY2hlZHVsZUZvclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucXVldWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZWR1bGVGb3IgPCB0aGlzLnF1ZXVlW2ldLnRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zcGxpY2UoaSwgMCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogc2NoZWR1bGVGb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gU2ltcGxlLCBubyB3ZWlyZCB0aW1lIHNoaXRcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgICAgIHRpbWU6IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBSdW4gdGhlIG5leHQgZXZlbnQgKi9cclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUuYWR2YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzRXZlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbmZpcm0gaWYgdGhlcmUgaXMgYW55dGhpbmcgaW4gdGhlIHF1ZXVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXZlbnQgcXVldWUgaXMgZW1wdHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNFdmVudCA9IHRoaXMucXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGltZSA9IHRoaXNFdmVudC50aW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiByZXBlYXRzIGlzIGEgbnVtYmVyLCByZWR1Y2UgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc0V2ZW50LmV2ZW50LnJlcGVhdHMgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNFdmVudC5ldmVudC5yZXBlYXRzLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgbmVlZHMgdG8gcmVwZWF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzRXZlbnQuZXZlbnQucmVwZWF0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYWRkIHRvIHRoZSBxdWV1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpc0V2ZW50LmV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNFdmVudC5ldmVudC5jYWxsYmFjaykgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXNFdmVudC5ldmVudC5jYWxsYmFjaygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzRXZlbnQuZXZlbnQuYWN0b3IpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzRXZlbnQuZXZlbnQuYWN0b3IuYWN0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZW1vdmUgYWN0b3IgZnJvbSB0aGUgZXZlbnQgcXVldWUgKi9cclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGFjdG9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucXVldWUuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5ldmVudC5hY3RvciA9PT0gYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZXZlcnNlIG1hdGNoZXMgKHdvcmsgZnJvbSB0aGUgZW5kIGZpcnN0KVxyXG4gICAgICAgIG1hdGNoZXMucmV2ZXJzZSgpO1xyXG4gICAgICAgIC8vIFJlbW92ZSBlYWNoIG1hdGNoXHJcbiAgICAgICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChtYXRjaCkge1xyXG4gICAgICAgICAgICBfdGhpcy5xdWV1ZS5zcGxpY2UobWF0Y2gsIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudE1hbmFnZXIucHJvdG90eXBlLCBcImxlbmd0aFwiLCB7XHJcbiAgICAgICAgLyoqIERldGVybWluZSB0aGUgbnVtYmVyIG9mIHF1ZXVlZCBldmVudHMgaW4gdGhlIHF1ZXVlLiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEV2ZW50TWFuYWdlcjtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgRXZlbnRNYW5hZ2VyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudE1hbmFnZXIuanMubWFwIiwiLyoqIFJhbmRvbSBnZW5lcmF0b3IgKi9cclxudmFyIFJhbmRvbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJhbmRvbShzZWVkLCBiYXNlKSB7XHJcbiAgICAgICAgaWYgKCFzZWVkKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBzZWVkIGZyb20gbWlsbGlzZWNvbmRzIHNpbmNlIEphbiAxc3QsIDE5NzBcclxuICAgICAgICAgICAgc2VlZCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VlZCA9IE1hdGguZmxvb3Ioc2VlZCk7XHJcbiAgICAgICAgdGhpcy53ZXlsID0gMDtcclxuICAgICAgICB0aGlzLnggPSAwO1xyXG4gICAgICAgIHRoaXMuYmFzZSA9IChiYXNlKSA/IGJhc2UgOiAxMDAwMDA7XHJcbiAgICAgICAgLy8gUnVuIGl0IGEgY291cGxlIG9mIHRpbWVzLCBpbiBjYXNlIHRoZSBzZWVkIGlzbid0IHRoYXQgZ29vZC5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRSYW5kb20oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKiogR2VuZXJhdGUgYSByYW5kb20gbnVtYmVyIGZyb20gMCA8PSBudW1iZXIgPCAxICovXHJcbiAgICAvLyBBbiBhdHRlbXB0IHRvIHJlcHJvZHVjZSBzb21ldGhpbmcgcmVzZW1ibGluZyB0aGUgTWlkZGxlIFNxdWFyZSBXZXlsIFNlcXVlbmNlIFBSTkdcclxuICAgIC8vIFNlZSBXaWR5bnNraSAoMjAxNykgaHR0cHM6Ly9hcnhpdi5vcmcvYWJzLzE3MDQuMDAzNTh2NVxyXG4gICAgLy8gVGhlIGFib3ZlIGFsZ29yaXRobSB1c2VzIHVuc2lnbmVkIGludHMuIEpTIHVzZXMgc2lnbmVkIGZsb2F0cy4gRnVydGhlciB0ZXN0aW5nIHJlcXVpcmVkIHRvIHNlZSB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIGFjdHVhbGx5IGEgcHJvYmxlbS5cclxuICAgIFJhbmRvbS5wcm90b3R5cGUuZ2V0UmFuZG9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMueCAqPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy54ICs9ICh0aGlzLndleWwgKz0gdGhpcy5zZWVkKTtcclxuICAgICAgICAvLyBOb3RlLCA+Pj4gbWFrZXMgdGhlIHNoaWZ0IGJlIHVuc2lnbmVkLiBUaGUgPj4+IDAgYXQgdGhlIGVuZCBmbGlwcyB0aGUgXCJzaWduXCIgYml0IHRvIGJlIHBvc2l0aXZlLCBlbnN1cmluZyBhIG5vbi1uZWdhdGl2ZSByZXN1bHQuXHJcbiAgICAgICAgdGhpcy54ID0gKCh0aGlzLnggPj4+IDMyKSB8ICh0aGlzLnggPDwgMzIpKSA+Pj4gMDtcclxuICAgICAgICByZXR1cm4gKHRoaXMueCAlIHRoaXMuYmFzZSkgLyB0aGlzLmJhc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdldCBhIHJhbmRvbSBudW1iZXIgaW4gYSByYW5nZSAqL1xyXG4gICAgUmFuZG9tLnByb3RvdHlwZS5nZXROdW1iZXIgPSBmdW5jdGlvbiAobWluLCBtYXgsIGludGVnZXIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGludGVnZXIgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIobWluKSAmJiBOdW1iZXIuaXNJbnRlZ2VyKG1heCkpIHtcclxuICAgICAgICAgICAgICAgIGludGVnZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbnRlZ2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZ2V0UmFuZG9tKCkgKiAobWF4ICsgMSAtIG1pbikpICsgTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuZ2V0UmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBHZXQgYSByYW5kb20gZWxlbWVudCBmcm9tIGFuIGFycmF5ICovXHJcbiAgICBSYW5kb20ucHJvdG90eXBlLmdldFJhbmRvbUVsZW1lbnQgPSBmdW5jdGlvbiAoYXJyYXkpIHtcclxuICAgICAgICB2YXIgcmFuZG9tSW5kZXggPSB0aGlzLmdldE51bWJlcigwLCBhcnJheS5sZW5ndGggLSAxLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gYXJyYXlbcmFuZG9tSW5kZXhdO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXQgYSByYW5kb20gZWxlbWVudCwgd2l0aCB3ZWlnaHRzICovXHJcbiAgICBSYW5kb20ucHJvdG90eXBlLmdldFdlaWdodGVkRWxlbWVudCA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgICAgIHZhciB0b3RhbFdlaWdodCA9IDA7XHJcbiAgICAgICAgdmFyIGludGVnZXIgPSB0cnVlO1xyXG4gICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdG90YWxXZWlnaHQgKz0gZWxlbWVudC53ZWlnaHQ7XHJcbiAgICAgICAgICAgIGludGVnZXIgPSBpbnRlZ2VyICYmIE51bWJlci5pc0ludGVnZXIoZWxlbWVudC53ZWlnaHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByYW5kb21OdW1iZXIgPSB0aGlzLmdldE51bWJlcigoaW50ZWdlcikgPyAxIDogMCwgdG90YWxXZWlnaHQsIGludGVnZXIpO1xyXG4gICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGFycmF5IHVudGlsIHdlIGhhdmUgYSB3aW5uZXJcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJhbmRvbU51bWJlciAtPSBhcnJheVtpXS53ZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmIChyYW5kb21OdW1iZXIgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRm91bmQgaXQhXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlbaV0ub3B0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vdCBmb3VuZDsgc2VlbXMgbGlrZSBhIHByb2JsZW1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBtYXRjaCBmb3VuZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJhbmRvbTtcclxufSgpKTtcclxuZXhwb3J0IHsgUmFuZG9tIH07XHJcbmV4cG9ydCBkZWZhdWx0IFJhbmRvbTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmFuZG9tLmpzLm1hcCIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59O1xyXG52YXIgX19zcHJlYWRBcnJheXMgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuLyoqIFBhdGhmaW5kZXIgdG8gZGV0ZXJtaW5lIGhvdyB0byB0cmF2ZWwgZnJvbSBvbmUgcG9pbnQgdG8gYW5vdGhlciAqL1xyXG52YXIgUGF0aEZpbmRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhdGhGaW5kZXIocGFyYW1ldGVycykge1xyXG4gICAgICAgIHZhciBjYW5QYXNzID0gcGFyYW1ldGVycy5jYW5QYXNzLCBtZXRyaWMgPSBwYXJhbWV0ZXJzLm1ldHJpYywgbWF4SXRlcmF0aW9ucyA9IHBhcmFtZXRlcnMubWF4SXRlcmF0aW9ucywgd2VpZ2h0ID0gcGFyYW1ldGVycy53ZWlnaHQsIHJlc3QgPSBfX3Jlc3QocGFyYW1ldGVycywgW1wiY2FuUGFzc1wiLCBcIm1ldHJpY1wiLCBcIm1heEl0ZXJhdGlvbnNcIiwgXCJ3ZWlnaHRcIl0pO1xyXG4gICAgICAgIHRoaXMuY2FuUGFzcyA9IGNhblBhc3M7XHJcbiAgICAgICAgaWYgKCFtZXRyaWMpIHtcclxuICAgICAgICAgICAgLy8gRGVmYXVsdCBtZXRyaWMgaXMgTWFuaGF0dGFuIG1ldHJpYywgaWYgbm9uZSBwcm92aWRlZFxyXG4gICAgICAgICAgICBtZXRyaWMgPSBmdW5jdGlvbiAocG9zaXRpb24xLCBwb3NpdGlvbjIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhwb3NpdGlvbjJbMV0gLSBwb3NpdGlvbjFbMV0pICsgTWF0aC5hYnMocG9zaXRpb24yWzBdIC0gcG9zaXRpb24xWzBdKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF3ZWlnaHQpIHtcclxuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byBldmVyeXRoaW5nIGJlaW5nIGxlbmd0aCBvZiAxXHJcbiAgICAgICAgICAgIHdlaWdodCA9IGZ1bmN0aW9uIChwb3NpdGlvbikgeyByZXR1cm4gMTsgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXhJdGVyYXRpb25zID0gbWF4SXRlcmF0aW9ucztcclxuICAgICAgICB0aGlzLm1ldHJpYyA9IG1ldHJpYztcclxuICAgICAgICB0aGlzLndlaWdodCA9IHdlaWdodDtcclxuICAgIH1cclxuICAgIC8qKiBGaW5kIHJvdXRlIGZyb20gc3RhcnRQb3NpdGlvbiB0byBlbmRQb3NpdGlvbiwgdmlhIEEqICovXHJcbiAgICBQYXRoRmluZGVyLnByb3RvdHlwZS5maW5kUGF0aCA9IGZ1bmN0aW9uIChzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiwgb3J0aG9nb25hbE9ubHkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChvcnRob2dvbmFsT25seSA9PT0gdm9pZCAwKSB7IG9ydGhvZ29uYWxPbmx5ID0gZmFsc2U7IH1cclxuICAgICAgICB2YXIgcm91dGUgPSBbXTtcclxuICAgICAgICAvLyBMaW1pdCB0aGUgbG9vcCBzbyBpdCBkb2Vzbid0IGJyZWFrIHRoaW5nc1xyXG4gICAgICAgIHZhciBtYXhJdGVyYXRpb25zID0gKHRoaXMubWF4SXRlcmF0aW9ucykgPyB0aGlzLm1heEl0ZXJhdGlvbnMgOiA0MCAqIHRoaXMubWV0cmljKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKTtcclxuICAgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgbGlzdCwgYW5kIGFkZCB0aGUgc3RhcnQgdG8gaXRcclxuICAgICAgICB2YXIgY2xvc2VkTGlzdCA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IF9fc3ByZWFkQXJyYXlzKHN0YXJ0UG9zaXRpb24pLFxyXG4gICAgICAgICAgICAgICAgc3RlcHM6IDAsXHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZUZyb21Hb2FsOiB0aGlzLm1ldHJpYyhzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiksXHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c0xvY2F0aW9uOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhciBvcGVuTGlzdCA9IFtdO1xyXG4gICAgICAgIC8vIEhhbmRsZSBkaWFnb25hbHNcclxuICAgICAgICB2YXIgc3RlcFNpemVBcnIgPSBbMCwgMSwgMS4yXTtcclxuICAgICAgICAvLyBGaW5kIGEgcGF0aFxyXG4gICAgICAgIHdoaWxlIChpdGVyYXRpb25zIDwgbWF4SXRlcmF0aW9ucyAmJlxyXG4gICAgICAgICAgICAhdGhpcy5jb250YWlucyhjbG9zZWRMaXN0LCBlbmRQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgaXRlcmF0aW9ucysrO1xyXG4gICAgICAgICAgICAvLyBFeHBhbmQgdGhlIG9wZW4gbGlzdFxyXG4gICAgICAgICAgICBjbG9zZWRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gLTE7IGkgPCAyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gLTE7IGogPCAyOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ydGhvZ29uYWxPbmx5ICYmIGkgIT09IDAgJiYgaiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Bvc2l0aW9uID0gW2xvY2F0aW9uLnBvc2l0aW9uWzBdICsgaSwgbG9jYXRpb24ucG9zaXRpb25bMV0gKyBqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjb3N0IC8gc2l6ZSBvZiBzdGVwIGludG8gdGhlIHNxdWFyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcFNpemUgPSBzdGVwU2l6ZUFycltNYXRoLmFicyhpKSArIE1hdGguYWJzKGopXSAqIF90aGlzLndlaWdodChuZXdQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuY2FuUGFzcyhuZXdQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbkNsb3NlZExpc3RBbHJlYWR5ID0gX3RoaXMuZ2V0TG9jYXRpb24oY2xvc2VkTGlzdCwgbmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5PcGVuTGlzdEFscmVhZHkgPSBfdGhpcy5nZXRMb2NhdGlvbihvcGVuTGlzdCwgbmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXcgcG9zaXRpb24gaXMgaW4gbmVpdGhlciBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW5DbG9zZWRMaXN0QWxyZWFkeSAmJiAhaW5PcGVuTGlzdEFscmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5MaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXdQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwczogbG9jYXRpb24uc3RlcHMgKyBzdGVwU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZUZyb21Hb2FsOiBfdGhpcy5tZXRyaWMobmV3UG9zaXRpb24sIGVuZFBvc2l0aW9uKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0xvY2F0aW9uOiBsb2NhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcG9zaXRpb24gaXMgYWxyZWFkeSBpbiB0aGUgbGlzdCwgYWRqdXN0IHRvIGJlIHdoaWNoZXZlciB2ZXJzaW9uIGlzIHNob3J0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbkNsb3NlZExpc3RBbHJlYWR5ICYmIGluQ2xvc2VkTGlzdEFscmVhZHkuc3RlcHMgPiBsb2NhdGlvbi5zdGVwcyArIHN0ZXBTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5DbG9zZWRMaXN0QWxyZWFkeS5zdGVwcyA9IGxvY2F0aW9uLnN0ZXBzICsgc3RlcFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5DbG9zZWRMaXN0QWxyZWFkeS5wcmV2aW91c0xvY2F0aW9uID0gbG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5PcGVuTGlzdEFscmVhZHkgJiYgaW5PcGVuTGlzdEFscmVhZHkuc3RlcHMgPiBsb2NhdGlvbi5zdGVwcyArIHN0ZXBTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5PcGVuTGlzdEFscmVhZHkuc3RlcHMgPSBsb2NhdGlvbi5zdGVwcyArIHN0ZXBTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluT3Blbkxpc3RBbHJlYWR5LnByZXZpb3VzTG9jYXRpb24gPSBsb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFNvcnQgdGhlIG9wZW4gbGlzdCAoaGlnaGVzdCAtLT4gbG93ZXN0KVxyXG4gICAgICAgICAgICBvcGVuTGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiAoYi5zdGVwcyArIGIuZGlzdGFuY2VGcm9tR29hbCkgLSAoYS5zdGVwcyArIGEuZGlzdGFuY2VGcm9tR29hbCk7IH0pO1xyXG4gICAgICAgICAgICAvLyBQb3Agb2ZmIHRoZSBsb3dlc3Qgb3Blbkxpc3QgaXRlbSBhbmQgYWRkIGl0IHRvIHRoZSBjbG9zZWQgbGlzdFxyXG4gICAgICAgICAgICBjbG9zZWRMaXN0LnB1c2gob3Blbkxpc3QucG9wKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGb3VuZCBhIHJvdXRlISBQdXQgdGhlIHBpZWNlcyB0b2dldGhlciBieSB3b3JraW5nIGJhY2t3YXJkc1xyXG4gICAgICAgIHZhciBsb2NhdGlvbiA9IHRoaXMuZ2V0TG9jYXRpb24oY2xvc2VkTGlzdCwgZW5kUG9zaXRpb24pO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKGNsb3NlZExpc3QsIGVuZFBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICBpdGVyYXRpb25zID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKChsb2NhdGlvbi5wb3NpdGlvblswXSAhPT0gc3RhcnRQb3NpdGlvblswXSB8fCBsb2NhdGlvbi5wb3NpdGlvblsxXSAhPT0gc3RhcnRQb3NpdGlvblsxXSkgJiYgaXRlcmF0aW9ucyA8IG1heEl0ZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnMrKztcclxuICAgICAgICAgICAgICAgIHJvdXRlLnB1c2gobG9jYXRpb24ucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBsb2NhdGlvbi5wcmV2aW91c0xvY2F0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByb3V0ZS5yZXZlcnNlKCk7XHJcbiAgICB9O1xyXG4gICAgUGF0aEZpbmRlci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChwb3NpdGlvbjEsIHBvc2l0aW9uMikge1xyXG4gICAgICAgIHJldHVybiAocG9zaXRpb24xLnBvc2l0aW9uWzBdID09PSBwb3NpdGlvbjIucG9zaXRpb25bMF0gJiYgcG9zaXRpb24xLnBvc2l0aW9uWzFdID09PSBwb3NpdGlvbjIucG9zaXRpb25bMV0pO1xyXG4gICAgfTtcclxuICAgIFBhdGhGaW5kZXIucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGxvY2F0aW9uTGlzdCwgdGVzdExvY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZXN0TG9jYXRpb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbkxpc3Quc29tZShmdW5jdGlvbiAobG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAobG9jYXRpb24ucG9zaXRpb25bMF0gPT09IHRlc3RMb2NhdGlvblswXSAmJiBsb2NhdGlvbi5wb3NpdGlvblsxXSA9PT0gdGVzdExvY2F0aW9uWzFdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb25MaXN0LnNvbWUoZnVuY3Rpb24gKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNFcXVhbChsb2NhdGlvbiwgdGVzdExvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBhdGhGaW5kZXIucHJvdG90eXBlLmdldExvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uTGlzdCwgdGVzdFBvc2l0aW9uKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBsb2NhdGlvbkxpc3RfMSA9IGxvY2F0aW9uTGlzdDsgX2kgPCBsb2NhdGlvbkxpc3RfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uXzEgPSBsb2NhdGlvbkxpc3RfMVtfaV07XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl8xLnBvc2l0aW9uWzBdID09PSB0ZXN0UG9zaXRpb25bMF0gJiYgbG9jYXRpb25fMS5wb3NpdGlvblsxXSA9PT0gdGVzdFBvc2l0aW9uWzFdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYXRpb25fMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXRoRmluZGVyO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBQYXRoRmluZGVyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QYXRoRmluZGVyLmpzLm1hcCIsIi8qKiBGaWVsZCBvZiB2aWV3ICovXHJcbnZhciBGT1YgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKiogQWNjZXB0cyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBhIGxvY2F0aW9uIGlzIHNlZXRocm91Z2ggKi9cclxuICAgIGZ1bmN0aW9uIEZPVihjYW5TZWUsIHJhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5jYW5TZWUgPSBjYW5TZWU7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlID8gcmFuZ2UgOiA4O1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqIERvIHRoZSBGT1YgY2FsY3VsYXRpb24gKi9cclxuICAgIEZPVi5wcm90b3R5cGUubG9vayA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgbG9va1JhbmdlT3ZlcnJpZGUpIHtcclxuICAgICAgICB2YXIgcmFuZ2UgPSAobG9va1JhbmdlT3ZlcnJpZGUpID8gbG9va1JhbmdlT3ZlcnJpZGUgOiB0aGlzLnJhbmdlO1xyXG4gICAgICAgIC8vIFNlZSB0aGUgc3RhcnRpbmcgbG9jYXRpb24gKGhvb3JheSEgR3JlYXQgc3RhcnQpXHJcbiAgICAgICAgdGhpcy5jYW5TZWUocG9zaXRpb24pO1xyXG4gICAgICAgIC8vIGNvbnN0IGxvb2tUaWxlczpBcnJheTxUaWxlPiA9IFtdO1xyXG4gICAgICAgIHZhciBzaGFkb3dzID0gW107XHJcbiAgICAgICAgdmFyIG5ld1NoYWRvd3MgPSBbXTtcclxuICAgICAgICAvLyBGcm9tIG5lYXJieSB0byBmYXIgYXdheVxyXG4gICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICB2YXIgaiA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgZGlzdGFuY2UgPSAxOyBkaXN0YW5jZSA8PSByYW5nZTsgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAvLyBHZXQgc3F1YXJlIHNoZWxsIGFyb3VuZCBwb3NpdGlvblxyXG4gICAgICAgICAgICBmb3IgKHZhciBzaWRlID0gMDsgc2lkZSA8IDQ7IHNpZGUrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZWRnZSA9IC1kaXN0YW5jZTsgZWRnZSA8PSBkaXN0YW5jZTsgZWRnZSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGVkZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2lkZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gZWRnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzaWRlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlZGdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gLWRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGVkZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAtZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb29rUG9zID0gW3Bvc2l0aW9uWzBdICsgaSwgcG9zaXRpb25bMV0gKyBqXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdCA9IHRoaXMuZGlzdGFuY2UocG9zaXRpb24sIGxvb2tQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE91dCBvZiByYW5nZT8gU2tpcC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA+IHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiBzaGFkb3dzPyBTa2lwLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZVRvID0gdGhpcy5hbmdsZVRvKHBvc2l0aW9uLCBsb29rUG9zKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5ndWxhclNpemUgPSB0aGlzLmFuZ3VsYXJTaXplKHBvc2l0aW9uLCBsb29rUG9zKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluU2hhZG93cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW5TaGFkb3dzKGFuZ2xlVG8sIHNoYWRvd3MpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNJblNoYWRvd3MoYW5nbGVUbyArIGFuZ3VsYXJTaXplLCBzaGFkb3dzKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzSW5TaGFkb3dzKGFuZ2xlVG8gLSBhbmd1bGFyU2l6ZSwgc2hhZG93cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5TaGFkb3dzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm93LCB0ZXN0IGlmIHdlIGNhbiBzZWUgdGhyb3VnaCB0aGUgdGlsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpblNoYWRvd3MgfHwgIXRoaXMuY2FuU2VlKGxvb2tQb3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNxdWFyZSBpcyBvcGFxdWUhIEFkZCBpdHMgc2hhZG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NoYWRvd3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlOiBhbmdsZVRvIC0gYW5ndWxhclNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBbmdsZTogYW5nbGVUbyArIGFuZ3VsYXJTaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBZGQgbmV3U2hhZG93cyB0byBzaGFkb3dzXHJcbiAgICAgICAgICAgIHdoaWxlIChuZXdTaGFkb3dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIHNoYWRvd3MucHVzaChuZXdTaGFkb3dzLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tYmluZVNoYWRvdyhzaGFkb3dzLCBuZXdTaGFkb3dzLnBvcCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgY2FsbCBpdCBxdWl0c1xyXG4gICAgICAgICAgICBpZiAoc2hhZG93cy5sZW5ndGggPT09IDEgJiYgc2hhZG93c1swXS5lbmRBbmdsZSAtIHNoYWRvd3NbMF0uc3RhcnRBbmdsZSA+PSAzNjApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICA7XHJcbiAgICAvKiogR2V0IGFuZ2xlIGEgdGlsZSByZXNpZGVzIGluXHJcbiAgICAgKiBUaGlzIHJhbmdlcyBmcm9tIC0xODAgdG8gMTgwLCBzbyBiZSBjYXJlZnVsXHJcbiAgICAqL1xyXG4gICAgRk9WLnByb3RvdHlwZS5hbmdsZVRvID0gZnVuY3Rpb24gKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIHkgPSBlbmRQb3NpdGlvblsxXSAtIHN0YXJ0UG9zaXRpb25bMV07XHJcbiAgICAgICAgdmFyIHggPSBlbmRQb3NpdGlvblswXSAtIHN0YXJ0UG9zaXRpb25bMF07XHJcbiAgICAgICAgdmFyIGFuZ2xlID0gMTgwICogTWF0aC5hdGFuMih5LCB4KSAvIE1hdGguUEk7XHJcbiAgICAgICAgcmV0dXJuIChhbmdsZSA+PSAwKSA/IGFuZ2xlIDogYW5nbGUgKyAzNjA7XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgLyoqIEdldCBhbmd1bGFyIHNpemUgb2YgYSBzcXVhcmUgKi9cclxuICAgIEZPVi5wcm90b3R5cGUuYW5ndWxhclNpemUgPSBmdW5jdGlvbiAoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKTtcclxuICAgICAgICByZXR1cm4gMzYwICogTWF0aC5hdGFuKDEgLyAoMiAqIGRpc3RhbmNlKSkgLyBNYXRoLlBJO1xyXG4gICAgfTtcclxuICAgIDtcclxuICAgIC8qKiBHZXQgZGlzdGFuY2UgKi9cclxuICAgIEZPVi5wcm90b3R5cGUuZGlzdGFuY2UgPSBmdW5jdGlvbiAoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KChlbmRQb3NpdGlvblsxXSAtIHN0YXJ0UG9zaXRpb25bMV0pLCAyKSArIE1hdGgucG93KChlbmRQb3NpdGlvblswXSAtIHN0YXJ0UG9zaXRpb25bMF0pLCAyKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrIGlmIGluIHNoYWRvd3MgKi9cclxuICAgIEZPVi5wcm90b3R5cGUuaXNJblNoYWRvd3MgPSBmdW5jdGlvbiAoYW5nbGUsIHNoYWRvd3MpIHtcclxuICAgICAgICB2YXIgbmVnQW5nbGUgPSBhbmdsZSAtIDM2MDtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHNoYWRvd3NfMSA9IHNoYWRvd3M7IF9pIDwgc2hhZG93c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgc2hhZG93ID0gc2hhZG93c18xW19pXTtcclxuICAgICAgICAgICAgaWYgKChhbmdsZSA8PSBzaGFkb3cuZW5kQW5nbGUgJiYgYW5nbGUgPj0gc2hhZG93LnN0YXJ0QW5nbGUpIHx8IChuZWdBbmdsZSA8PSBzaGFkb3cuZW5kQW5nbGUgJiYgbmVnQW5nbGUgPj0gc2hhZG93LnN0YXJ0QW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqIEFkZCBhIHNoYWRvdyB0byB0aGUgc2hhZG93IGFycmF5ICovXHJcbiAgICBGT1YucHJvdG90eXBlLmNvbWJpbmVTaGFkb3cgPSBmdW5jdGlvbiAoc2hhZG93cywgbmV3U2hhZG93KSB7XHJcbiAgICAgICAgdmFyIG92ZXJMYXBBcnIgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoYWRvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHNoYWRvdyA9IHNoYWRvd3NbaV07XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXkgb3ZlcmxhcFxyXG4gICAgICAgICAgICBpZiAobmV3U2hhZG93LnN0YXJ0QW5nbGUgPCBzaGFkb3cuZW5kQW5nbGUgJiYgbmV3U2hhZG93LmVuZEFuZ2xlID4gc2hhZG93LnN0YXJ0QW5nbGUpIHtcclxuICAgICAgICAgICAgICAgIG5ld1NoYWRvdy5zdGFydEFuZ2xlID0gTWF0aC5taW4oc2hhZG93LnN0YXJ0QW5nbGUsIG5ld1NoYWRvdy5zdGFydEFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIG5ld1NoYWRvdy5lbmRBbmdsZSA9IE1hdGgubWF4KHNoYWRvdy5lbmRBbmdsZSwgbmV3U2hhZG93LmVuZEFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIG92ZXJMYXBBcnIucHVzaChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3ZlckxhcEFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBtYWluU2hhZG93ID0gc2hhZG93c1tvdmVyTGFwQXJyLnNoaWZ0KCldO1xyXG4gICAgICAgICAgICBtYWluU2hhZG93LnN0YXJ0QW5nbGUgPSBuZXdTaGFkb3cuc3RhcnRBbmdsZTtcclxuICAgICAgICAgICAgbWFpblNoYWRvdy5lbmRBbmdsZSA9IG5ld1NoYWRvdy5lbmRBbmdsZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IG92ZXJMYXBBcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHNoYWRvd3Muc3BsaWNlKG92ZXJMYXBBcnJbaV0sIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzaGFkb3dzLnB1c2gobmV3U2hhZG93KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZPVjtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgRk9WO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GT1YuanMubWFwIiwidmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcbi8qKlxyXG4gKiBBIHRpbGUsIGFzIGRlZmluZWQgZm9yIFdhdmUgRnVuY3Rpb24gQ29sbGFwc2UgcHVycG9zZXNcclxuICovXHJcbnZhciBXZmNUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2ZjVGlsZShpbnB1dCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudHMgPSBpbnB1dC5tYXAoZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gX19zcHJlYWRBcnJheXMocm93KTsgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQ2hlY2sgaWYgdHdvIFdmY1RpbGUncyBhcmUgZXF1YWwsIHRvIHJlbW92ZSBkdXBsaWNhdGVzLiAqL1xyXG4gICAgV2ZjVGlsZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKHRpbGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXRpYmxlKHRpbGUsIDAsIDApO1xyXG4gICAgfTtcclxuICAgIC8qKiBDaGVjayBpZiB0d28gV2ZjVGlsZSdzIGFyZSBjb21wYXRpYmxlIChpLmUuIGNhbiBiZSBuZWlnaGJvdXJzKSAqL1xyXG4gICAgV2ZjVGlsZS5wcm90b3R5cGUuY29tcGF0aWJsZSA9IGZ1bmN0aW9uICh0aWxlLCB4LCB5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudHMuZXZlcnkoZnVuY3Rpb24gKHJvdywgaikge1xyXG4gICAgICAgICAgICByZXR1cm4gcm93LmV2ZXJ5KGZ1bmN0aW9uICh2YWwsIGkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB4UG9zID0gaSArIHg7XHJcbiAgICAgICAgICAgICAgICB2YXIgeVBvcyA9IGogKyB5O1xyXG4gICAgICAgICAgICAgICAgaWYgKHhQb3MgPj0gMCAmJiB5UG9zID49IDAgJiYgeVBvcyA8IHRpbGUuY29udGVudHMubGVuZ3RoICYmIHhQb3MgPCB0aWxlLmNvbnRlbnRzW3lQb3NdLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwgPT09IHRpbGUuY29udGVudHNbeVBvc11beFBvc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrIGlmIHRoaXMgdGlsZSB3b3JrIHdpdGggYSBnaXZlbiBjb25zdHJhaW50ICovXHJcbiAgICBXZmNUaWxlLnByb3RvdHlwZS5jb25zdHJhaW4gPSBmdW5jdGlvbiAoY29uc3RyYWludCwgeCwgeSkge1xyXG4gICAgICAgIGlmICh5ID49IDAgJiYgeSA8IHRoaXMuY29udGVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICh4ID49IDAgJiYgeCA8IHRoaXMuY29udGVudHNbeV0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50c1t5XVt4XSA9PT0gY29uc3RyYWludDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gV2ZjVGlsZTtcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgV2ZjVGlsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2ZjVGlsZS5qcy5tYXAiLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxuaW1wb3J0IFdmY1RpbGUgZnJvbSAnLi9XZmNUaWxlLmpzJztcclxuaW1wb3J0IFJhbmRvbSBmcm9tICcuLi9yYW5kb20vUmFuZG9tLmpzJztcclxuLyoqXHJcbiAqIENsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgV2F2ZSBGdW5jdGlvbiBDb2xsYXBzZSBhbGdvcml0aG0uXHJcbiAqL1xyXG52YXIgV0ZDID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV0ZDKHBhcmFtcykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB2YXIgaW5wdXQgPSBwYXJhbXMuaW5wdXQsIF9iID0gcGFyYW1zLm4sIG4gPSBfYiA9PT0gdm9pZCAwID8gMSA6IF9iLCBfYyA9IHBhcmFtcy5tLCBtID0gX2MgPT09IHZvaWQgMCA/IG4gOiBfYywgX2QgPSBwYXJhbXMucmVwZWF0SW5wdXQsIHJlcGVhdElucHV0ID0gX2QgPT09IHZvaWQgMCA/IGZhbHNlIDogX2QsIHJhbmRvbSA9IHBhcmFtcy5yYW5kb20sIHJlc3QgPSBfX3Jlc3QocGFyYW1zLCBbXCJpbnB1dFwiLCBcIm5cIiwgXCJtXCIsIFwicmVwZWF0SW5wdXRcIiwgXCJyYW5kb21cIl0pO1xyXG4gICAgICAgIC8vIENvbnZlcnQgaW50byBhIDJkIGFycmF5XHJcbiAgICAgICAgdmFyIGlucHV0SW1hZ2UgPSBpbnB1dC5tYXAoZnVuY3Rpb24gKHJvdykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJvdyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5zcGxpdChcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBQcm9jZXNzIHRoZSBpbnB1dCBpbWFnZSBhbmQgc3RvcmUgdGhhdCBkYXRhXHJcbiAgICAgICAgX2EgPSB0aGlzLnByb2Nlc3NJbnB1dChpbnB1dEltYWdlLCByZXBlYXRJbnB1dCwgbiwgbSksIHRoaXMucnVsZXMgPSBfYVswXSwgdGhpcy5mcmVxdWVuY2llcyA9IF9hWzFdO1xyXG4gICAgICAgIHRoaXMubiA9IG47XHJcbiAgICAgICAgdGhpcy5tID0gbTtcclxuICAgICAgICBpZiAoIXJhbmRvbSkge1xyXG4gICAgICAgICAgICB0aGlzLnJhbmRvbSA9IG5ldyBSYW5kb20oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFuZG9tID0gcmFuZG9tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWV0aG9kIHRoYXQgcHJvY2Vzc2VzIHRoZSBpbWFnZSB0byBnZW5lcmF0ZSBhZGphY2VuY3kgcnVsZXMgYW5kIHRpbGUgZnJlcXVlbmNpZXMuXHJcbiAgICAgKi9cclxuICAgIFdGQy5wcm90b3R5cGUucHJvY2Vzc0lucHV0ID0gZnVuY3Rpb24gKGlucHV0LCByZXBlYXRJbnB1dCwgbiwgbSkge1xyXG4gICAgICAgIC8vIEdldCBkaW1lbnNpb25zXHJcbiAgICAgICAgLy8gSGVpZ2h0IGlzIGp1c3QgdGhlIGxlbmd0aCBvZiB0aGUgYXJyYXlcclxuICAgICAgICB2YXIgaGVpZ2h0ID0gaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgIHZhciBoZWlnaHRUaWxlcyA9IGhlaWdodCAtICgoIXJlcGVhdElucHV0KSA/IChtIC0gMSkgOiAwKTtcclxuICAgICAgICAvLyBXaWR0aCBpcyB0aGUgbWluaW11bSBsZW5ndGggb2YgYSBzdWJhcnJheTsgZm9yY2UgaXQgdG8gYmUgc3F1YXJlLlxyXG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgubWluLmFwcGx5KE1hdGgsIGlucHV0Lm1hcChmdW5jdGlvbiAocm93KSB7IHJldHVybiByb3cubGVuZ3RoOyB9KSk7XHJcbiAgICAgICAgdmFyIHdpZHRoVGlsZXMgPSB3aWR0aCAtICgoIXJlcGVhdElucHV0KSA/IChuIC0gMSkgOiAwKTtcclxuICAgICAgICAvLyBHZXQgYWxsIHRpbGVzIGluIHRoZSBpbnB1dFxyXG4gICAgICAgIHZhciByYXdUaWxlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2lkdGhUaWxlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVpZ2h0VGlsZXM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpbGVJbnB1dCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBtOyB5KyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHlQb3MgPSAoaiArIHkpICUgaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgbjsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4UG9zID0gKHggKyBpKSAlIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cucHVzaChpbnB1dFt5UG9zXVt4UG9zXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpbGVJbnB1dC5wdXNoKHJvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VGlsZSA9IG5ldyBXZmNUaWxlKHRpbGVJbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByYXdUaWxlcy5wdXNoKG5ld1RpbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZpbHRlciBkb3duLCB0byBnZXQgcmlkIG9mIHJlcGVhdHNcclxuICAgICAgICB2YXIgdGlsZXMgPSBbXTtcclxuICAgICAgICB2YXIgZnJlcXVlbmNpZXMgPSBbXTtcclxuICAgICAgICByYXdUaWxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRpbGVzLmZpbmRJbmRleChmdW5jdGlvbiAob3RoZXJUaWxlKSB7IHJldHVybiBvdGhlclRpbGUuZXF1YWxzKHRpbGUpOyB9KTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIGZyZXF1ZW5jaWVzW2luZGV4XS53ZWlnaHQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpbGVzLnB1c2godGlsZSk7XHJcbiAgICAgICAgICAgICAgICBmcmVxdWVuY2llcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb246IHRpbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAxLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBOZXh0LCB3ZSBuZWVkIGFkamFjZW5jeSBydWxlc1xyXG4gICAgICAgIHZhciBydWxlcyA9IHRpbGVzLm1hcChmdW5jdGlvbiAodGlsZSkge1xyXG4gICAgICAgICAgICAvLyBCZWdpbiBhIG5ldyBydWxlIVxyXG4gICAgICAgICAgICB2YXIgcnVsZSA9IHtcclxuICAgICAgICAgICAgICAgIHVwOiBbXSxcclxuICAgICAgICAgICAgICAgIGRvd246IFtdLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogW10sXHJcbiAgICAgICAgICAgICAgICByaWdodDogW10sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0aWxlIGlzIGNvbXBhdGlibGUgd2l0aCBldmVyeSBvdGhlciB0aWxlLCBpbiB0aGUgNCBkaXJlY3Rpb25zXHJcbiAgICAgICAgICAgIHRpbGVzLmZvckVhY2goZnVuY3Rpb24gKG90aGVyVGlsZSwgaSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuY29tcGF0aWJsZShvdGhlclRpbGUsIC0xLCAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUucmlnaHQucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aWxlLmNvbXBhdGlibGUob3RoZXJUaWxlLCAxLCAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUubGVmdC5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuY29tcGF0aWJsZShvdGhlclRpbGUsIDAsIC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUuZG93bi5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuY29tcGF0aWJsZShvdGhlclRpbGUsIDAsIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnVsZS51cC5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gRG9uZSwgcmV0dXJuIHRoZSBmaW5pc2hlZCBydWxlXHJcbiAgICAgICAgICAgIHJldHVybiBydWxlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBbcnVsZXMsIGZyZXF1ZW5jaWVzXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIGFuIG91dHB1dCBpbWFnZS5cclxuICAgICAqL1xyXG4gICAgV0ZDLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICB2YXIgd2lkdGggPSBwYXJhbXMud2lkdGgsIGhlaWdodCA9IHBhcmFtcy5oZWlnaHQsIHJlcGVhdE91dHB1dCA9IHBhcmFtcy5yZXBlYXRPdXRwdXQsIHJlc3QgPSBfX3Jlc3QocGFyYW1zLCBbXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcInJlcGVhdE91dHB1dFwiXSk7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB3aXRoIGFsbCB0aWxlcyBiZWluZyBwb3NzaWJsZVxyXG4gICAgICAgIHZhciB3YXZlRnVuY3Rpb24gPSBbXTtcclxuICAgICAgICB2YXIgZW50cm9weUxpc3QgPSBbXTtcclxuICAgICAgICB2YXIgZG9uZUxpc3QgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhlaWdodDsgaisrKSB7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBudW0gPSAwOyBudW0gPCB0aGlzLmZyZXF1ZW5jaWVzLmxlbmd0aDsgbnVtKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgdGhpcy5mcmVxdWVuY2llc1tudW1dLndlaWdodDsgY291bnQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4ucHVzaChudW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFNhbWUgZGF0YSBpcyBpbiBib3RoOyBvbmUgaXMganVzdCBmb3IgcG9zaXRpb25zLCBvbmUgaXMgZm9yIHNvcnRpbmdcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGNvbHVtbixcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogW2ksIGpdLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgZW50cm9weUxpc3QucHVzaChvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3YXZlRnVuY3Rpb24ucHVzaChyb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiBBZGQgc3RlcCBmb3IgYXBwbHlpbmcgY29uc3RyYWludHMgdG8gdGhlIGltYWdlXHJcbiAgICAgICAgLy8gQmVnaW4gdGhlIG1haW4gbG9vcCFcclxuICAgICAgICAvLyBQdXQgYSBoYXJkIGNhcCBvbiB0aGUgZHVyYXRpb24sIGRvbid0IHdhbnQgdG8gZnVjayB3aXRoIHNvbWVvbmVzIGJyb3dzZXJcclxuICAgICAgICB2YXIgY2FwID0gd2lkdGggKiBoZWlnaHQgKyAxO1xyXG4gICAgICAgIHdoaWxlIChlbnRyb3B5TGlzdC5sZW5ndGggPiAwICYmIGNhcCA+PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIFNvcnQgdGhlIGVudHJvcHlMaXN0LCB0byBwdXQgdGhlIG9wdGlvbiB3aXRoIGZld2VzdCBwb3NzaWJpbGl0aWVzIGZpcnN0XHJcbiAgICAgICAgICAgIGVudHJvcHlMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLm9wdGlvbnMubGVuZ3RoIC0gYi5vcHRpb25zLmxlbmd0aDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgZmlyc3Qgc2V0IG9mIG9wdGlvbnNcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBlbnRyb3B5TGlzdC5zaGlmdCgpO1xyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgaXQncyBsZW5ndGggaXMgbm90IDAuIElmIGl0IGlzLCB3ZSBmdWNrZWQgdXAuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9wdGlvbnMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IE90aGVyIG9wdGlvbnMgZm9yIGZhaWx1cmUgKG1heWJlIGEgZGVmYXVsdCB0aWxlPyBVZ2x5IGJ1dCBub3QgdGVycmlibGUgZm9yIGEgcm9ndWVsaWtlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2hvb3NlIGFuIG9wdGlvbjtcclxuICAgICAgICAgICAgdmFyIGNob2ljZSA9IFt0aGlzLnJhbmRvbS5nZXRSYW5kb21FbGVtZW50KG9wdGlvbnMub3B0aW9ucyldO1xyXG4gICAgICAgICAgICBvcHRpb25zLm9wdGlvbnMgPSBjaG9pY2U7XHJcbiAgICAgICAgICAgIGRvbmVMaXN0LnB1c2gob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8vIFByb3BhZ2F0ZSB0aGF0IGNob2ljZSB0byB0aGUgb3RoZXIgdGlsZXNcclxuICAgICAgICAgICAgdGhpcy5wcm9wb2dhdGUod2F2ZUZ1bmN0aW9uLCBvcHRpb25zLnBvc2l0aW9uLCByZXBlYXRPdXRwdXQpO1xyXG4gICAgICAgICAgICAvLyBSZWR1Y2UgdGhlIGNhcCB0byBhdm9pZCBpbmZpbml0ZSBsb29waW5nLlxyXG4gICAgICAgICAgICBjYXAtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2cod2F2ZUZ1bmN0aW9uKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UHJvY2Vzcyh3YXZlRnVuY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIC8qKiBDb252ZXJ0IHRoZSBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIGRlc2lyZWQgb3V0cHV0ICovXHJcbiAgICBXRkMucHJvdG90eXBlLnBvc3RQcm9jZXNzID0gZnVuY3Rpb24gKHdhdmVGdW5jdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IHdhdmVGdW5jdGlvbi5sZW5ndGggKyAodGhpcy5tIC0gMSk7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gd2F2ZUZ1bmN0aW9uLmxlbmd0aCArICh0aGlzLm4gLSAxKTtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBoZWlnaHQ7IGorKykge1xyXG4gICAgICAgICAgICB2YXIgcm93ID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2lkdGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcm93LnB1c2gobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gocm93KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2F2ZUZ1bmN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHJvdywgaikge1xyXG4gICAgICAgICAgICByb3cuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uLCBpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLm9wdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWxlID0gX3RoaXMuZnJlcXVlbmNpZXNbb3B0aW9uLm9wdGlvbnNbMF1dLm9wdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IF90aGlzLm47IHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IF90aGlzLm07IHkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W2ogKyB5XVtpICsgeF0gPSB0aWxlLmNvbnRlbnRzW3ldW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIC8qKiBBcHBseSBhZGphY2VuY3kgcnVsZXMgKi9cclxuICAgIFdGQy5wcm90b3R5cGUucHJvcG9nYXRlID0gZnVuY3Rpb24gKHdhdmVGdW5jdGlvbiwgX2EsIHJlcGVhdE91dHB1dCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHggPSBfYVswXSwgeSA9IF9hWzFdO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gd2F2ZUZ1bmN0aW9uW3ldW3hdO1xyXG4gICAgICAgIHZhciBhZ2dyZWdhdGVSdWxlcyA9IHtcclxuICAgICAgICAgICAgdXA6IFtdLFxyXG4gICAgICAgICAgICBkb3duOiBbXSxcclxuICAgICAgICAgICAgbGVmdDogW10sXHJcbiAgICAgICAgICAgIHJpZ2h0OiBbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEdldCBhbGwgYXZhaWxhYmxlIHBvc3NpYmlsaXRpZXNcclxuICAgICAgICBvcHRpb25zLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBydWxlID0gX3RoaXMucnVsZXNbb3B0aW9uXTtcclxuICAgICAgICAgICAgcnVsZS51cC5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiBhZ2dyZWdhdGVSdWxlcy51cC5wdXNoKHgpOyB9KTtcclxuICAgICAgICAgICAgcnVsZS5kb3duLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGFnZ3JlZ2F0ZVJ1bGVzLmRvd24ucHVzaCh4KTsgfSk7XHJcbiAgICAgICAgICAgIHJ1bGUubGVmdC5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiBhZ2dyZWdhdGVSdWxlcy5sZWZ0LnB1c2goeCk7IH0pO1xyXG4gICAgICAgICAgICBydWxlLnJpZ2h0LmZvckVhY2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGFnZ3JlZ2F0ZVJ1bGVzLnJpZ2h0LnB1c2goeCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXHJcbiAgICAgICAgYWdncmVnYXRlUnVsZXMudXAgPSBhZ2dyZWdhdGVSdWxlcy51cC5maWx0ZXIoZnVuY3Rpb24gKHgsIGksIGFycikgeyByZXR1cm4gYXJyLmluZGV4T2YoeCkgPT09IGk7IH0pO1xyXG4gICAgICAgIGFnZ3JlZ2F0ZVJ1bGVzLmRvd24gPSBhZ2dyZWdhdGVSdWxlcy5kb3duLmZpbHRlcihmdW5jdGlvbiAoeCwgaSwgYXJyKSB7IHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gaTsgfSk7XHJcbiAgICAgICAgYWdncmVnYXRlUnVsZXMubGVmdCA9IGFnZ3JlZ2F0ZVJ1bGVzLmxlZnQuZmlsdGVyKGZ1bmN0aW9uICh4LCBpLCBhcnIpIHsgcmV0dXJuIGFyci5pbmRleE9mKHgpID09PSBpOyB9KTtcclxuICAgICAgICBhZ2dyZWdhdGVSdWxlcy5yaWdodCA9IGFnZ3JlZ2F0ZVJ1bGVzLnJpZ2h0LmZpbHRlcihmdW5jdGlvbiAoeCwgaSwgYXJyKSB7IHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gaTsgfSk7XHJcbiAgICAgICAgdmFyIHN0ZXBzID0gW1widXBcIiwgXCJkb3duXCIsIFwibGVmdFwiLCBcInJpZ2h0XCJdO1xyXG4gICAgICAgIHZhciBzdGVwRGlyZWN0aW9ucyA9IHtcclxuICAgICAgICAgICAgdXA6IFswLCAtMV0sXHJcbiAgICAgICAgICAgIGRvd246IFswLCAxXSxcclxuICAgICAgICAgICAgbGVmdDogWy0xLCAwXSxcclxuICAgICAgICAgICAgcmlnaHQ6IFsxLCAwXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN0ZXBzLmZvckVhY2goZnVuY3Rpb24gKHN0ZXApIHtcclxuICAgICAgICAgICAgdmFyIHh4ID0geCArIHN0ZXBEaXJlY3Rpb25zW3N0ZXBdWzBdO1xyXG4gICAgICAgICAgICB2YXIgeXkgPSB5ICsgc3RlcERpcmVjdGlvbnNbc3RlcF1bMV07XHJcbiAgICAgICAgICAgIGlmIChyZXBlYXRPdXRwdXQpIHtcclxuICAgICAgICAgICAgICAgIHh4ICs9IHdhdmVGdW5jdGlvblswXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB4eCA9IHh4ICUgd2F2ZUZ1bmN0aW9uWzBdLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHl5ICs9IHdhdmVGdW5jdGlvbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB5eSA9IHl5ICUgd2F2ZUZ1bmN0aW9uLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoeHggPj0gMCAmJiB4eCA8IHdhdmVGdW5jdGlvblswXS5sZW5ndGggJiYgeXkgPj0gMCAmJiB5eSA8IHdhdmVGdW5jdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiZWZvcmVMZW5ndGggPSB3YXZlRnVuY3Rpb25beXldW3h4XS5vcHRpb25zLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHdhdmVGdW5jdGlvblt5eV1beHhdLm9wdGlvbnMgPSB3YXZlRnVuY3Rpb25beXldW3h4XS5vcHRpb25zLmZpbHRlcihmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZ2dyZWdhdGVSdWxlc1tzdGVwXS5pbmNsdWRlcyh4KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZUxlbmd0aCA+IHdhdmVGdW5jdGlvblt5eV1beHhdLm9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvcG9nYXRlKHdhdmVGdW5jdGlvbiwgW3h4LCB5eV0sIHJlcGVhdE91dHB1dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gV0ZDO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBXRkM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVdGQy5qcy5tYXAiLCJpbXBvcnQgeyBEaXNwbGF5LCBFdmVudE1hbmFnZXIsIFJhbmRvbSwgUGF0aEZpbmRlciwgRk9WLCBXRkMgfSBmcm9tICcuLi9saWIvaW5kZXgnO1xyXG5cclxuLy8gRmlyc3QsIHNlbGVjdCB0aGUgdGFyZ2V0IGVsZW1lbnQgeW91IHdhbnQgdGhlIGRpc3BsYXkgdG8gYmUgd2l0aGluXHJcbmNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzcGxheUV4YW1wbGVcIik7XHJcblxyXG4vLyBQYXJhbWF0ZXJzIG9iamVjdFxyXG5jb25zdCBwYXJhbXMgPSB7XHJcbiAgICAvLyBSZXF1aXJlZCEgVGhlIGRpc3BsYXkgbXVzdCBnbyBzb21ld2hlcmVcclxuICAgIHRhcmdldDogdGFyZ2V0LFxyXG4gICAgLy8gV2lkdGggb2YgdGhlIGRpc3BsYXkgaW4gdGlsZXNcclxuICAgIHdpZHRoOiAyMCxcclxuICAgIC8vIEhlaWdodCBvZiB0aGUgZGlzcGxheSBpbiB0aWxlc1xyXG4gICAgaGVpZ2h0OiAxNSxcclxufTtcclxuXHJcbi8vIFN0YXJ0IHRoZSBkaXNwbGF5IVxyXG5jb25zdCBkaXNwbGF5ID0gbmV3IERpc3BsYXkocGFyYW1zKTtcclxuXHJcbi8vIFNldCB0aGUgdGlsZSBzaXplIHNvIHRoYXQgaXQgZml0cyBpdHMgY29udGFpbmVyXHJcbmRpc3BsYXkudGlsZVNpemUgPSBkaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcblxyXG4vLyBPbmUgY29vbCB0aGluZyB5b3UgY2FuIGRvIGlzIGFkZCBhIGxpc3RlbmVyIGZvciB3aW5kb3cgcmVzaXppbmdcclxuLy8gS2VlcCB5b3VyIGRpc3BsYXkgbG9va2luZyBnb29kIVxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCgpPT57XHJcbiAgICBkaXNwbGF5LnRpbGVTaXplID0gZGlzcGxheS5jYWxjdWxhdGVUaWxlU2l6ZSgpO1xyXG59KTtcclxuXHJcbi8vIExldHMgZHJhdyBzb21lIHN0dWZmXHJcbmZvciAobGV0IHg9MDsgeCA8IHBhcmFtcy53aWR0aDsgeCsrKSB7XHJcbiAgICBmb3IgKGxldCB5PTA7IHkgPCBwYXJhbXMuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAvLyBEcmF3IHNvbWUgd2FsbHNcclxuICAgICAgICBpZiAoeD09PTAgfHwgeT09PTAgfHwgeD09PXBhcmFtcy53aWR0aC0xIHx8IHk9PT1wYXJhbXMuaGVpZ2h0LTEpIHtcclxuICAgICAgICAgICAgZGlzcGxheS5zZXRUaWxlKHgseSx7XHJcbiAgICAgICAgICAgICAgICAvLyBDb250ZW50IGNhbiBiZSBhIHN0cmluZywgb3IgQU5ZIGh0bWwgZWxlbWVudCEgKGluY2x1ZGluZyBpbWFnZXMhKVxyXG4gICAgICAgICAgICAgICAgY29udGVudDogJyMnLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJyaWNrV2FsbFwiXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgb3VyIHBsYXllciFcclxuICAgICAgICB9IGVsc2UgaWYgKHg9PT0zICYmIHk9PT01KSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXkuc2V0VGlsZSh4LHkse1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogJ0AnLFxyXG4gICAgICAgICAgICAgICAgLy8gWW91IGNhbiB1c2UgYXMgbWFueSBjbGFzc2VzIGFzIHlvdSB3b3VsZCBsaWtlIVxyXG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0OiBbXCJwbGF5ZXJcIl1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gU29tZSBmbG9vciBldmVyeXdoZXJlIGVsc2VcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkaXNwbGF5LnNldFRpbGUoeCx5LHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcuJyxcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb29sRmxvb3JcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEhtbSBhY3R1YWxseSBJIHdhbnQgdG8gY2hhbmdlIHNvbWUgb2YgdGhlIHRpbGVzIGEgYml0LiB1cGRhdGVUaWxlIGNoYW5nZXMgdGhlXHJcbi8vIHBhcmFtZXRlcnMgdGhhdCB5b3Ugc3BlY2lmeTsgc2V0VGlsZSByZXBsYWNlcyBldmVyeXRoaW5nLlxyXG5cclxuZm9yIChsZXQgaT01OyBpIDwgMTA7IGkrKykge1xyXG4gICAgZGlzcGxheS51cGRhdGVUaWxlKGksaSx7Y2xhc3NOYW1lOlwic3VwZXJBd2Vzb21lXCJ9KTtcclxufVxyXG5cclxuY29uc3QgcmFuZG9tU3R1ZmYgPSAoKT0+e1xyXG4gICAgLy8gWW91IGNhbiBkZWZpbmUgYSBzZWVkIGlmIHlvdSB3b3VsZCBsaWtlOyBpZiBub3QsIHRoZSBjdXJyZW50IHRpbWUgaXMgdXNlZC5cclxuICAgIGNvbnN0IG9wdGlvbmFsU2VlZCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSk7XHJcbiAgICBcclxuICAgIC8vIFN0YXJ0IHRoZSByYW5kb20gbnVtYmVyIGdlbmVyYXRvclxyXG4gICAgY29uc3QgcmFuZG9tID0gbmV3IFJhbmRvbShvcHRpb25hbFNlZWQpO1xyXG4gICAgXHJcbiAgICAvLyBJZiB5b3Ugd2FudCBhIHJhbmRvbSBudW1iZXIgZnJvbSAwIDw9IHggPCAxOlxyXG4gICAgY29uc3QgeCA9IHJhbmRvbS5nZXRSYW5kb20oKTtcclxuICAgIFxyXG4gICAgLy8gSWYgeW91IHdvdWxkIGxpa2UgYSByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBvZiBsb3dlciA8PSB5IDw9IHVwcGVyIHlvdSBjYW4gdXNlIGdldE51bWJlci5cclxuICAgIGNvbnN0IGxvd2VyID0gMDtcclxuICAgIGNvbnN0IHVwcGVyID0gMTA7XHJcbiAgICBjb25zdCB5ID0gcmFuZG9tLmdldE51bWJlcihsb3dlcix1cHBlcik7XHJcbiAgICBcclxuICAgIC8vIElmIHRoZSBnaXZlbiBib3VuZHMgYXJlIGludGVnZXJzLCBpdCB3aWxsIGdlbmVyYXRlIGludGVnZXJzLlxyXG4gICAgLy8gSWYgbm90LCBpdCB3aWxsIGdlbmVyYXRlIGRlY2ltYWxzLlxyXG4gICAgLy8gSWYgeW91IHdhbnQgdG8gc3BlY2lmeSBleHBsaWNpdGx5LCB1c2UgdGhlIGludGVnZXIgYm9vbGVhbiBwYXJhbWV0ZXIuXHJcbiAgICBjb25zdCBub1RoYW5rc05vdEludGVnZXIgPSByYW5kb20uZ2V0TnVtYmVyKGxvd2VyLHVwcGVyLGZhbHNlKTtcclxuICAgIFxyXG4gICAgLy8gSWYgeW91IHdhbnQgYSByYW5kb20gZWxlbWVudCBmcm9tIGFuIGFycmF5LCB1c2UgZ2V0UmFuZG9tRWxlbWVudC5cclxuICAgIGNvbnN0IGNvb2xBcnJheSA9IFsxLCAyLCAzLCA0LCA1LCA2LCA3XTtcclxuICAgIGNvbnN0IHJhbmRvbUVsZW1lbnQgPSByYW5kb20uZ2V0UmFuZG9tRWxlbWVudChjb29sQXJyYXkpO1xyXG4gICAgXHJcbiAgICAvLyBJZiB5b3Ugd2FudCB0byBwcm92aWRlIHdlaWdodHMgZm9yIGVhY2ggdmFsdWUsIHlvdSBjYW4gdXNlIGdldFdlaWdodGVkRWxlbWVudC5cclxuICAgIGNvbnN0IHdlaWdodGVkQXJyYXkgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3ZWlnaHQ6IDEwLFxyXG4gICAgICAgICAgICBvcHRpb246IFwiQ3V0ZSBkb2dcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3ZWlnaHQ6IDE1LFxyXG4gICAgICAgICAgICBvcHRpb246IFwiQXdlc29tZSBjYXRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3ZWlnaHQ6IDEsXHJcbiAgICAgICAgICAgIG9wdGlvbjogXCJSYXJlIEZyYW5rbGluXCJcclxuICAgICAgICB9XHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICBjb25zdCByYW5kb21XZWlnaHRlZEVsZW1lbnQgPSByYW5kb20uZ2V0V2VpZ2h0ZWRFbGVtZW50KHdlaWdodGVkQXJyYXkpO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHRzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZG9tUmVzdWx0c1wiKTtcclxuXHJcbiAgICAvLyBDbGVhciBpdCBvdXQsIHRoZW4gZmlsbCBpdCB1cCBhZ2FpblxyXG4gICAgd2hpbGUocmVzdWx0c0xpc3QubGFzdENoaWxkKSB7XHJcbiAgICAgICAgcmVzdWx0c0xpc3QucmVtb3ZlQ2hpbGQocmVzdWx0c0xpc3QubGFzdENoaWxkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgYXR0YWNoUmVzdWx0ID0gZnVuY3Rpb24gKG5hbWUsIHJlc3VsdCkge1xyXG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBgJHtuYW1lfSA6ICR7cmVzdWx0fWA7XHJcbiAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpO1xyXG4gICAgICAgIHJlc3VsdHNMaXN0LmFwcGVuZENoaWxkKGxpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXR0YWNoUmVzdWx0KFwieFwiLCB4LnRvU3RyaW5nKCkpO1xyXG4gICAgYXR0YWNoUmVzdWx0KFwieVwiLCB5LnRvU3RyaW5nKCkpO1xyXG4gICAgYXR0YWNoUmVzdWx0KFwibm9UaGFua3NOb3RJbnRlZ2VyXCIsIG5vVGhhbmtzTm90SW50ZWdlci50b1N0cmluZygpKTtcclxuICAgIGF0dGFjaFJlc3VsdChcInJhbmRvbUVsZW1lbnRcIiwgcmFuZG9tRWxlbWVudC50b1N0cmluZygpKTtcclxuICAgIGF0dGFjaFJlc3VsdChcInJhbmRvbVdlaWdodGVkRWxlbWVudFwiLCByYW5kb21XZWlnaHRlZEVsZW1lbnQudG9TdHJpbmcoKSk7XHJcbn1cclxuXHJcbi8vIERvIGl0IG9uY2Ugb24gcGFnZSBsb2FkXHJcbnJhbmRvbVN0dWZmKCk7XHJcblxyXG4vLyBBdHRhY2ggaXQgdG8gYSBidXR0b24gc28gdGhlIHJlYWRlciBjYW4gcHVzaCBpdFxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhbmRvbUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixyYW5kb21TdHVmZik7XHJcblxyXG4vLyBDb2xvcmZ1bCBkaXNwbGF5LCBob29yYXlcclxuY29uc3QgY29sb3JUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbG9yRGlzcGxheVwiKTtcclxuXHJcbi8vIEluaXRpYWxpemUgaXRcclxuY29uc3QgY29sb3JEaXNwbGF5ID0gbmV3IERpc3BsYXkoe3RhcmdldDpjb2xvclRhcmdldCwgd2lkdGg6IDEwLCBoZWlnaHQ6IDEwfSk7XHJcblxyXG4vLyBEcmF3IHNvbWUgc3R1ZmZcclxuZm9yKGxldCBpPTA7aTwxMDtpKyspIHtcclxuICAgIGZvcihsZXQgaj0wO2o8MTA7aisrKSB7XHJcbiAgICAgICAgaWYgKGk9PT0wIHx8IGo9PT0wIHx8IGk9PT05IHx8IGo9PT05KSB7XHJcbiAgICAgICAgICAgIC8vIERpZCB5b3Uga25vdyB5b3UgY2FuIHVzZSBhIHNob3J0aGFuZCBoZXJlPyBOb3cgeW91IGRvIVxyXG4gICAgICAgICAgICBjb2xvckRpc3BsYXkuc2V0VGlsZShpLGosJyMnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGk9PT0zICYmIGo9PT0zKSB7XHJcbiAgICAgICAgICAgIGNvbG9yRGlzcGxheS5zZXRUaWxlKGksaiwnQCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaT09PTQgJiYgaj09PTUpIHtcclxuICAgICAgICAgICAgY29sb3JEaXNwbGF5LnNldFRpbGUoaSxqLHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdnJyxcclxuICAgICAgICAgICAgICAgIC8vIFlvdSBjYW4gdXNlIGlubGluZSBjb2xvcnMgYW5kIGJhY2tncm91bmRzIGlmXHJcbiAgICAgICAgICAgICAgICAvLyB5b3UgUkVBTExZIHdhbnQgdG8sIGJ1dCBJIGRpc2NvdXJhZ2UgaXQuXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZWVuJyxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDEyOCwwLDAsMC4yKScsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbG9yRGlzcGxheS5zZXRUaWxlKGksaiwnLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gTWFrZSB0aGUgZGlzcGxheSBmaXQgdGhlIGNvbnRhaW5lclxyXG5jb2xvckRpc3BsYXkudGlsZVNpemUgPSBjb2xvckRpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIENlbnRlciBpdCBvbiB0aGUgcGxheWVyXHJcbmNvbG9yRGlzcGxheS5jZW50ZXJEaXNwbGF5KDMsMyk7XHJcblxyXG4vLyBIZXJlJ3MgYSBjb29sIG1hcCB0byBsaXZlIGluXHJcbmNvbnN0IG1hcCA9IFtcclxuICAgIFwiIyMjIyMjIyMjIyMjIyMjIyMjIyNcIixcclxuICAgIFwiIy4uLi4uLi4uLi4uLi4uLi4uLiNcIixcclxuICAgIFwiIy4uIy4uLi4uIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIy4uIy4uLi4uIyMjLi4uIyMuLiNcIixcclxuICAgIFwiIy4uIy4uLi4uIy4uLi4uLi4uLiNcIixcclxuICAgIFwiIy4uLi4uLi4uLi4uLi4jIyMjLiNcIixcclxuICAgIFwiIy4uLi4uLi4uIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIyMjIy4uLiMjIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIy4uLi4uLi4uIy4uLi4jLi4uLiNcIixcclxuICAgIFwiIyMjIyMjIyMjIyMjIyMjIyMjIyNcIixcclxuXTtcclxuY29uc3Qgd2lkdGggPSBtYXBbMF0ubGVuZ3RoO1xyXG5jb25zdCBoZWlnaHQgPSBtYXAubGVuZ3RoO1xyXG5cclxuLy8gQW5kIGxldHMgc3RhcnQgdXAgYSBkaXNwbGF5IHRvIHVzZVxyXG5jb25zdCBmb3ZEaXNwbGF5UGFyYW1zID0ge1xyXG4gICAgdGFyZ2V0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvdk1hcFwiKSxcclxuICAgIHdpZHRoOiB3aWR0aCxcclxuICAgIGhlaWdodDogaGVpZ2h0LFxyXG59O1xyXG5jb25zdCBmb3ZEaXNwbGF5ID0gbmV3IERpc3BsYXkoZm92RGlzcGxheVBhcmFtcyk7XHJcbmZvdkRpc3BsYXkudGlsZVNpemUgPSBmb3ZEaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcblxyXG4vLyBGT1YgdGFrZXMgYSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGRlY2lkZXMgd2hldGhlciBvciBub3QgeW91IGNhbiBzZWUgc29tZXRoaW5nLlxyXG4vLyBJdCB0YWtlcyBvbmUgcGFyYW1ldGVyLCB3aGljaCBpcyBhIHR3byBlbGVtZW50IHBvc2l0aW9uIGFycmF5IHBvcyA9IFt4LHldXHJcbi8vIGFuZCByZXR1cm5zIHRydWUgb3IgZmFsc2UuXHJcbmNvbnN0IGNhblNlZSA9IChwb3NpdGlvbikgPT4ge1xyXG4gICAgY29uc3QgeCA9IHBvc2l0aW9uWzBdO1xyXG4gICAgY29uc3QgeSA9IHBvc2l0aW9uWzFdO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSBpdCdzIGV2ZW4gb24gdGhlIG1hcFxyXG4gICAgaWYgKCB4PDAgfHwgeD49d2lkdGggfHwgeTwwIHx8IHk+PWhlaWdodCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRpbGUgPSBtYXBbeV1beF07XHJcblxyXG4gICAgLy8gRmlyc3QsIHJlZ2FyZGxlc3Mgb2Ygc3VjY2VzcyBvciBub3QsIHNlZSB0aGlzIHRpbGVcclxuICAgIGZvdkRpc3BsYXkuc2V0VGlsZSh4LHksdGlsZSk7XHJcblxyXG4gICAgLy8gTmV4dCwgdXNlIHdoYXRldmVyIGNyaXRlcmlhIHdlIHdhbnQgdG8gZGVjaWRlIGlmIGl0IGlzIHNlZXRocm91Z2ggb3Igbm90LlxyXG4gICAgLy8gSW4gdGhpcyBjYXNlLCBpZiBpdCdzIG5vdCBhIHdhbGwgKG9yICMgY2hhcmFjdGVyKSwgd2UgY2FuIHNlZSB0aHJvdWdoIGl0LlxyXG4gICAgcmV0dXJuIHRpbGUgIT09ICcjJztcclxufVxyXG5cclxuLy8gSXQgaGFzIGFuIG9wdGlvbmFsIHNlY29uZCBwYXJhbWV0ZXIgZm9yIGRpc3RhbmNlLiBUaGUgZGVmYXVsdCBpcyA4LlxyXG5jb25zdCBvcHRpb25hbFJhbmdlID0gMjA7XHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBGT1Ygb2JqZWN0IVxyXG5jb25zdCBmb3YgPSBuZXcgRk9WKGNhblNlZSwgb3B0aW9uYWxSYW5nZSk7XHJcblxyXG4vLyBDaG9vc2UgYSBwb3NpdGlvbiBmb3IgdGhlIHBsYXllciB0byBiZVxyXG5jb25zdCBwbGF5ZXJQb3MgPSBbNSw1XTtcclxuXHJcbi8vIFNsaWdodGx5IGhhY2t5IHdheSB0byBhZGQgdGhlIHBsYXllcjsgdXNlIGEgYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciB5b3VyIGdhbWVzIVxyXG5jb25zdCBtYXBSb3cgPSBtYXBbcGxheWVyUG9zWzFdXTtcclxubWFwW3BsYXllclBvc1sxXV0gPSBtYXBSb3cuc2xpY2UoMCxwbGF5ZXJQb3NbMF0pICsgJ0AnICsgbWFwUm93LnNsaWNlKHBsYXllclBvc1swXSsxKTtcclxuXHJcbi8vIE5vdywgTE9PSyFcclxuZm92Lmxvb2socGxheWVyUG9zKTtcclxuXHJcbi8vIEZpcnN0LCBzb21lIHNldHVwLCBzbyB3ZSBjYW4gcmVjb3JkIG91ciBvdXRwdXRcclxuY29uc3Qgc2ltcGxlTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2ltcGxlRXZlbnRMaXN0XCIpO1xyXG5jb25zdCBjb21wbGV4TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGxleEV2ZW50TGlzdFwiKTtcclxuXHJcblxyXG4vLyBMZXRzIG1ha2UgYSBoZWxwZXIgZnVuY3Rpb24gdG8gcmVjb3JkIG91ciBvdXRwdXRcclxuY29uc3Qgc2hvd0FjdGlvbiA9IChhY3Rpb24sIGxpc3QpID0+IHtcclxuICAgIC8vIE1ha2UgYSBsaXN0IGl0ZW0gYW5kIGFkZCB0aGUgYWN0aW9uIHRvIGl0LlxyXG4gICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIilcclxuICAgIGxpc3RJdGVtLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGFjdGlvbikpO1xyXG4gICAgLy8gQXR0YWNoIGl0IHRvIHRoZSBsaXN0LCBzbyB3ZSBjYW4gc2VlIHdoYXQgaGFwcGVucy5cclxuICAgIGxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG59O1xyXG5cclxuLy8gVGhlcmUncyB0d28gdHlwZXMgb2YgZXZlbnQgbWFuYWdlcnMgeW91IGNhbiBtYWtlLlxyXG4vLyBMZXRzIHN0YXJ0IHdpdGggdGhlIHNpbXBsZSBvbmUuIEV2ZXJ5b25lIHRha2VzIHR1cm5zLCBvbmUgYWZ0ZXIgdGhlIG90aGVyLlxyXG5jb25zdCBzaW1wbGVFdmVudHMgPSBuZXcgRXZlbnRNYW5hZ2VyKHt0eXBlOlwic2ltcGxlXCJ9KTtcclxuXHJcbi8vIFVzdWFsbHksIHdlIHdhbnQgdG8gYWRkIHNvbWUgYWN0b3JzIHRvIHRoZSBzeXN0ZW0uXHJcbi8vIFRoZSBzeXN0ZW0gY2FsbHMgdGhlaXIgXCJhY3RcIiBtZXRob2QuXHJcblxyXG5jb25zdCBzaW1wbGVHb2JsaW4gPSB7XHJcbiAgICBhY3Q6ICgpPT5zaG93QWN0aW9uKFwiVGhlIEdvYmxpbiBnb2JsaW5zIVwiLCBzaW1wbGVMaXN0KVxyXG59XHJcblxyXG5jb25zdCBzaW1wbGVDYXQgPSB7XHJcbiAgICBhY3Q6ICgpPT5zaG93QWN0aW9uKFwiVGhlIGNhdCBtZW93cyFcIiwgc2ltcGxlTGlzdClcclxufVxyXG5cclxuLy8gQWRkIHRoZW0gdG8gdGhlIGV2ZW50IG1hbmFnZXJcclxuc2ltcGxlRXZlbnRzLmFkZChzaW1wbGVHb2JsaW4pO1xyXG5zaW1wbGVFdmVudHMuYWRkKHNpbXBsZUNhdCk7XHJcblxyXG4vLyBZb3UgY2FuIGFsc28gYWRkIGNhbGxiYWNrIGZ1bmN0aW9ucyBvbiB0aGVpciBvd24sIGFzIGV2ZW50cyBvciB3aGF0ZXZlciB5b3VyIGhlYXJ0IHBsZWFzZXMuXHJcbi8vIFRoZXkgY2FuIHJlcGVhdCBmb3JldmVyLi4uXHJcbnNpbXBsZUV2ZW50cy5hZGQoe1xyXG4gICAgY2FsbGJhY2s6ICgpPT5zaG93QWN0aW9uKFwiRHJpcCBkcmlwIGdvZXMgdGhlIGZhdWNldC5cIiwgc2ltcGxlTGlzdCksXHJcbiAgICByZXBlYXRzOiB0cnVlXHJcbn0pXHJcblxyXG4vLyBSZXBlYXQgYSBmZXcgdGltZXNcclxuc2ltcGxlRXZlbnRzLmFkZCh7XHJcbiAgICBjYWxsYmFjazogKCk9PnNob3dBY3Rpb24oXCJSdXNoaW5nIHdpbmQhIE9oIG5vIVwiLCBzaW1wbGVMaXN0KSxcclxuICAgIHJlcGVhdHM6IDJcclxufSlcclxuXHJcbi8vIE9yIG5vdCByZXBlYXQgYXQgYWxsIVxyXG5zaW1wbGVFdmVudHMuYWRkKHtcclxuICAgIGNhbGxiYWNrOiAoKT0+c2hvd0FjdGlvbihcIlRoZSBob3VzZSBvZiBjYXJkcyBmYWxscyBvdmVyLiBXaG9vcHMhXCIsIHNpbXBsZUxpc3QpXHJcbn0pO1xyXG5cclxuLy8gVGhlbiB5b3UganVzdCBraWNrIGl0IG9mZiBpbiB5b3VyIHByZWZlcnJlZCBtYW5uZXIuXHJcbi8vIEVhY2ggdGltZSB5b3UgY2FsbCBhZHZhbmNlLCBpdCB3aWxsIHN0ZXAgZm9yd2FyZCBvbmUgc3RlcC5cclxuLy8gSWYgYWN0IHJldHVybnMgYSBwcm9taXNlIChzYXksIGlmIHlvdSdyZSB3YWl0aW5nIGZvciBwbGF5ZXIgaW5wdXQpXHJcbi8vIGl0IHdpbGwgd2FpdCBmb3IgdGhhdCBhY3Rpb24gdG8gY29uY2x1ZGUuXHJcbmZvcihsZXQgaT0wO2k8MjA7aSsrKSB7XHJcbiAgICBzaW1wbGVFdmVudHMuYWR2YW5jZSgpO1xyXG59XHJcblxyXG4vLyBUaGUgc2Vjb25kIHR5cGUgb2YgZXZlbnQgbWFuYWdlciBpcyBjb21wbGV4OlxyXG5jb25zdCBjb21wbGV4RXZlbnRzID0gbmV3IEV2ZW50TWFuYWdlcih7dHlwZTpcImNvbXBsZXhcIn0pO1xyXG5cclxuLy8gVGhlIGNvbXBsZXggZXZlbnQgbWFuYWdlciBhY2NlcHRzIGRpZmZlcmVudCBkZWxheXMgZm9yIGRpZmZlcmVudCBhY3RvcnNcclxuXHJcbmNvbnN0IGZhc3RDYXQgPSB7XHJcbiAgICBhY3Q6KCk9PnNob3dBY3Rpb24oXCJGYXN0IGNhdCBueW9vbXMhXCIsIGNvbXBsZXhMaXN0KVxyXG59XHJcblxyXG5jb25zdCBzbG93T2dyZSA9IHtcclxuICAgIGFjdDooKT0+c2hvd0FjdGlvbihcIlNsb3cgb2dyZSBpcyBzbG9vb293XCIsIGNvbXBsZXhMaXN0KVxyXG59XHJcblxyXG4vLyBUaGUgZGVsYXkgcHJvcGVydHkgZGVmaW5lcyBob3cgc2xvdyBhbiBhY3RvciBpc1xyXG5jb21wbGV4RXZlbnRzLmFkZCh7XHJcbiAgICBhY3RvcjpmYXN0Q2F0LFxyXG4gICAgZGVsYXk6MVxyXG59KTtcclxuXHJcbmNvbXBsZXhFdmVudHMuYWRkKHtcclxuICAgIGFjdG9yOnNsb3dPZ3JlLFxyXG4gICAgZGVsYXk6NVxyXG59KTtcclxuXHJcbi8vIE9yIGhvdyBsb25nIGFuIGV2ZW50IHRha2VzXHJcbmNvbXBsZXhFdmVudHMuYWRkKHtcclxuICAgIGNhbGxiYWNrOigpPT5zaG93QWN0aW9uKFwiVGhlIG1haWwgaGFzIGp1c3QgYXJyaXZlZC4gU3dlZXQhXCIsIGNvbXBsZXhMaXN0KSxcclxuICAgIGRlbGF5OiAxNlxyXG59KTtcclxuXHJcbi8vIEFkdmFuY2UgdGhlIGNsb2NrLi4uXHJcbmZvcihsZXQgaT0wO2k8MjA7aSsrKSB7XHJcbiAgICBjb21wbGV4RXZlbnRzLmFkdmFuY2UoKTtcclxufVxyXG5cclxubWFwW3BsYXllclBvc1sxXV0gPSBtYXBSb3cuc2xpY2UoMCxwbGF5ZXJQb3NbMF0pICsgJy4nICsgbWFwUm93LnNsaWNlKHBsYXllclBvc1swXSsxKTtcclxuXHJcbi8vIEZpcnN0LCBsZXRzIHNldHVwIGFub3RoZXIgZGlzcGxheSEgSSB3YW50IHRvIGRyYXcgdGhlIHBhdGggd2UgZmluZC5cclxuLy8gQW5kIGxldHMgc3RhcnQgdXAgYSBkaXNwbGF5IHRvIHVzZS5cclxuLy8gV2UncmUgZ29pbmcgdG8gdXNlIHRoZSBzYW1lIG1hcCBmcm9tIHRoZSBGT1Ygc2VjdGlvbi5cclxuY29uc3QgcGF0aERpc3BsYXlQYXJhbXMgPSB7XHJcbiAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGF0aERpc3BsYXlcIiksXHJcbiAgICB3aWR0aDogd2lkdGgsXHJcbiAgICBoZWlnaHQ6IGhlaWdodCxcclxufTtcclxuY29uc3QgcGF0aERpc3BsYXkgPSBuZXcgRGlzcGxheShwYXRoRGlzcGxheVBhcmFtcyk7XHJcbnBhdGhEaXNwbGF5LnRpbGVTaXplID0gcGF0aERpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIExldHMgZHJhdyB0aGUgbWFwIHRvIHN0YXJ0XHJcbm1hcC5mb3JFYWNoKChyb3cseSk9PnJvdy5zcGxpdCgnJykuZm9yRWFjaCgodGlsZSx4KT0+e1xyXG4gICAgcGF0aERpc3BsYXkuc2V0VGlsZSh4LHksdGlsZSk7XHJcbn0pKTtcclxuXHJcbi8vIE5vdywgbGV0cyBzZXR1cCB0aGUgcGF0aGZpbmRlciFcclxuLy8gVGhlIFBhdGhGaW5kZXIgdGFrZXMgYSBcImNhblBhc3NcIiBjYWxsYmFjayB0byBkZXRlcm1pbmUgd2hhdCBpcyBwYXNzYWJsZS5cclxuLy8gVGhpcyBsb29rcyBzaW1pbGFyIHRvIHRoZSBjYW5TZWUgY2FsbGJhY2sgZnJvbSBiZWZvcmUsIGJ1dCBpdCBkb2Vzbid0IGhhdmUgdG8uXHJcbmNvbnN0IHBhdGhmaW5kZXIgPSBuZXcgUGF0aEZpbmRlcih7XHJcbiAgICBjYW5QYXNzOihbeCx5XSk9PntcclxuICAgICAgICAvLyBNYWtlIHN1cmUgaXQncyBldmVuIG9uIHRoZSBtYXBcclxuICAgICAgICBpZiAoIHg8MCB8fCB4Pj13aWR0aCB8fCB5PDAgfHwgeT49aGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGlsZSA9IG1hcFt5XVt4XTtcclxuXHJcbiAgICAgICAgLy8gTmV4dCwgdXNlIHdoYXRldmVyIGNyaXRlcmlhIHdlIHdhbnQgdG8gZGVjaWRlIGlmIGl0IGlzIHBhc3NhYmxlLlxyXG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSwgaWYgaXQncyBub3QgYSB3YWxsIChvciAjIGNoYXJhY3RlciksIHdlIGNhbiB3YWxrIHRocm91Z2ggaXQuXHJcbiAgICAgICAgcmV0dXJuIHRpbGUgIT09ICcjJztcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBMZXQgY2hvb3NlIGEgc3RhcnRpbmcgcG9zaXRpb24sIGFuZCBhIHRhcmdldCBwb3NpdGlvbiFcclxuY29uc3Qgc3RhcnRQb3MgPSBbMSw4XTtcclxuY29uc3QgZW5kUG9zID0gWzE1LDhdO1xyXG5cclxuLy8gSXQgY2FuIGFsc28gdGFrZSBhbiBvcHRpb25hbCBcIm9ydGhvZ29uYWxPbmx5XCIgcGFyYW1ldGVyLlxyXG4vLyBUaGlzIHNldHMgd2hldGhlciBvciBub3QgdGhlIHBhdGhmaW5kZXIgd2lsbCB1c2UgZGlhZ29uYWxzLlxyXG5jb25zdCBvcHRpb25hbE9ydGhvZ29uYWxPbmx5ID0gZmFsc2U7XHJcblxyXG4vLyBOb3csIGxldHMgZmluZCB0aGUgcGF0aCFcclxuY29uc3QgcGF0aCA9IHBhdGhmaW5kZXIuZmluZFBhdGgoc3RhcnRQb3MsIGVuZFBvcywgb3B0aW9uYWxPcnRob2dvbmFsT25seSk7XHJcblxyXG4vLyBEcmF3IGl0IG9udG8gdGhlIG1hcCB0byB0YWtlIGEgbG9vayBhdCBpdC5cclxucGF0aC5mb3JFYWNoKChbeCx5XSk9PntcclxuICAgIHBhdGhEaXNwbGF5LnVwZGF0ZVRpbGUoeCx5LHtcclxuICAgICAgICBjb250ZW50OidYJyxcclxuICAgICAgICBjbGFzc05hbWU6IFwicGF0aE1hcmtlclwiXHJcbiAgICB9KVxyXG59KTtcclxuXHJcbi8vIE5vdGUgdGhhdCB0aGUgZHJhd24gcGF0aCBkb2Vzbid0IGluY2x1ZGUgdGhlIHN0YXJ0aW5nIHBvc2l0aW9uLlxyXG4vLyBUaGlzIGlzIHNvIHlvdSBjYW4ganVzdCBncmFiIHBhdGhbMF0gdG8gZ2V0IHRoZSBmaXJzdCBzdGVwIGluIHlvdXIgam91cm5leS5cclxuLy8gTGV0cyBkcmF3IG9uIHRoZSBwbGF5ZXIsIHRvbywgZm9yIGlsbHVzdHJhdGlvbi5cclxucGF0aERpc3BsYXkudXBkYXRlVGlsZShzdGFydFBvc1swXSwgc3RhcnRQb3NbMV0sICdAJyk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCgpPT57XHJcbiAgICBjb2xvckRpc3BsYXkudGlsZVNpemUgPSBjb2xvckRpc3BsYXkuY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuICAgIGZvdkRpc3BsYXkudGlsZVNpemUgPSBmb3ZEaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcbiAgICBwYXRoRGlzcGxheS50aWxlU2l6ZSA9IHBhdGhEaXNwbGF5LmNhbGN1bGF0ZVRpbGVTaXplKCk7XHJcbn0pO1xyXG5cclxuLy8gV0ZDIGRpc3BsYXlcclxuY29uc3Qgd2ZjRGlzcGxheVBhcmFtcyA9IHtcclxuICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZmNEaXNwbGF5XCIpLFxyXG4gICAgd2lkdGg6IDIwLFxyXG4gICAgaGVpZ2h0OiAyMCxcclxufTtcclxuY29uc3Qgd2ZjRGlzcGxheSA9IG5ldyBEaXNwbGF5KHdmY0Rpc3BsYXlQYXJhbXMpO1xyXG53ZmNEaXNwbGF5LnRpbGVTaXplID0gd2ZjRGlzcGxheS5jYWxjdWxhdGVUaWxlU2l6ZSgpO1xyXG5cclxuLy8gVGhlIFdGQyBnZW5lcmF0b3IgdGFrZXMgYW4gaW5wdXQgXCJpbWFnZVwiLCB3aGljaCBpdCB1c2VzIHRvIGZpZ3VyZSBvdXQgcnVsZXMgZm9yIHRoZSBvdXRwdXQuXHJcbmNvbnN0IGlucHV0SW1hZ2UgPSBbXHJcbiAgICBcIi4jLi5cIixcclxuICAgIFwiLiMuLlwiLFxyXG4gICAgXCIjIyMjXCIsXHJcbiAgICBcIi4jLi5cIixcclxuXTtcclxuXHJcbmNvbnN0IHdmYyA9IG5ldyBXRkMoe2lucHV0OmlucHV0SW1hZ2UsbjozLHJlcGVhdElucHV0OnRydWV9KTtcclxuY29uc3Qgb3V0cHV0ID0gd2ZjLmdlbmVyYXRlKHt3aWR0aDoyMCxoZWlnaHQ6MjAscmVwZWF0T3V0cHV0OnRydWV9KTtcclxuXHJcbm91dHB1dC5mb3JFYWNoKChyb3csaik9PntcclxuICAgIHJvdy5mb3JFYWNoKChjb2wsaSk9PntcclxuICAgICAgICBjb25zb2xlLmxvZyhjb2wpO1xyXG4gICAgICAgIHdmY0Rpc3BsYXkuc2V0VGlsZShpLGosY29sKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IHdmY0Rpc3BsYXlQYXJhbXNUd28gPSB7XHJcbiAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2ZjRGlzcGxheVR3b1wiKSxcclxuICAgIHdpZHRoOiAyMCxcclxuICAgIGhlaWdodDogMjAsXHJcbn07XHJcbmNvbnN0IHdmY0Rpc3BsYXlUd28gPSBuZXcgRGlzcGxheSh3ZmNEaXNwbGF5UGFyYW1zVHdvKTtcclxud2ZjRGlzcGxheVR3by50aWxlU2l6ZSA9IHdmY0Rpc3BsYXlUd28uY2FsY3VsYXRlVGlsZVNpemUoKTtcclxuXHJcbi8vIFRoZSBXRkMgZ2VuZXJhdG9yIHRha2VzIGFuIGlucHV0IFwiaW1hZ2VcIiwgd2hpY2ggaXQgdXNlcyB0byBmaWd1cmUgb3V0IHJ1bGVzIGZvciB0aGUgb3V0cHV0LlxyXG5jb25zdCBpbnB1dEltYWdlVHdvID0gW1xyXG4gICAgXCIgICAgIy4jICAgICAgICBcIixcclxuICAgIFwiICAgICMuIyAgICAgICAgXCIsXHJcbiAgICBcIiAgICAjLiMgICAgICAgIFwiLFxyXG4gICAgXCIjIyMjIy4jIyAgICAgICBcIixcclxuICAgIFwiLi4uLi4uLiMjIyMjIyMjXCIsXHJcbiAgICBcIiMjIyMuLi4uLi4uLi4uLlwiLFxyXG4gICAgXCIgICAjIy4jIyMjIyMjIyNcIixcclxuICAgIFwiICAgICMuIyAgICAgICAgXCIsXHJcbiAgICBcIiAgICMjLiMjICAjIyMjI1wiLFxyXG4gICAgXCIjIyMjLi4uIyMjIy4uLiNcIixcclxuICAgIFwiLi4uLi4uLi4uLi4uLi4uXCIsXHJcbiAgICBcIiMjIyMuLi4jIyMjLi4uI1wiLFxyXG4gICAgXCIgICAjIy4jIyAgIyMjIyNcIixcclxuXTtcclxuXHJcbmNvbnN0IHdmY1R3byA9IG5ldyBXRkMoe2lucHV0OmlucHV0SW1hZ2VUd28sbjozLHJlcGVhdElucHV0OnRydWV9KTtcclxuY29uc3Qgb3V0cHV0VHdvID0gd2ZjVHdvLmdlbmVyYXRlKHt3aWR0aDoyMCxoZWlnaHQ6MjAscmVwZWF0T3V0cHV0OnRydWV9KTtcclxuXHJcbm91dHB1dFR3by5mb3JFYWNoKChyb3csaik9PntcclxuICAgIHJvdy5mb3JFYWNoKChjb2wsaSk9PntcclxuICAgICAgICBjb25zb2xlLmxvZyhjb2wpO1xyXG4gICAgICAgIHdmY0Rpc3BsYXlUd28uc2V0VGlsZShpLGosY29sKTtcclxuICAgIH0pO1xyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==